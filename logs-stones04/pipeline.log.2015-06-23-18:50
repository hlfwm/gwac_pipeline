du /scratch/meng/gwac/dbfarm2 -sh
141G	/scratch/meng/gwac/dbfarm2
2
Tue Jun 23 18:15:05 CEST 2015
Time: CALL insert_tempuniquecatalog 6.66
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
0 affected rows (41.311ms)
DELETE FROM new_to_new;
0 affected rows (14.469ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
1924 affected rows (58.312ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
1924 affected rows (59.080ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
960 affected rows (16.151ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
1924 affected rows (16.649ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
1924 affected rows (8.347ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
1924 affected rows (8.032ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
1933 affected rows (25.195ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
174371 affected rows (96.576ms)
Time: mclient gwacdb -e -i onetomany.sql 0.35
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 2 AND tuc.targetid IS NULL ORDER BY t.id;
251 affected rows
Time: insert_new_uniq(2) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
251 affected rows (19.635ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
251 affected rows (8.162ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
960 affected rows (8.197ms)
Time: mclient gwacdb -e -i newsource.sql 0.04
Time for image2 9 seconds
3
Tue Jun 23 18:15:14 CEST 2015
Time: CALL insert_tempuniquecatalog 6.86
Time: CALL flag_n_to_m_tempunique() 0.41
DELETE FROM one_to_many;
1924 affected rows (46.237ms)
DELETE FROM new_to_new;
1924 affected rows (13.640ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
1238 affected rows (41.663ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
1238 affected rows (58.632ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
618 affected rows (33.193ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
1238 affected rows (33.360ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
1238 affected rows (8.362ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
1238 affected rows (7.928ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
1250 affected rows (16.807ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
175620 affected rows (105.530ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
251 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 3 AND tuc.targetid IS NULL ORDER BY t.id;
213 affected rows
Time: insert_new_uniq(3) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
213 affected rows (36.029ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
213 affected rows (33.272ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
618 affected rows (24.756ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image3 9 seconds
4
Tue Jun 23 18:15:23 CEST 2015
Time: CALL insert_tempuniquecatalog 6.77
Time: CALL flag_n_to_m_tempunique() 0.38
DELETE FROM one_to_many;
1238 affected rows (40.174ms)
DELETE FROM new_to_new;
1238 affected rows (13.068ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
1681 affected rows (42.241ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
1681 affected rows (58.553ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
840 affected rows (32.859ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
1681 affected rows (33.245ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
1681 affected rows (8.424ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
1681 affected rows (8.056ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
1695 affected rows (16.778ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
175938 affected rows (114.373ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
213 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 4 AND tuc.targetid IS NULL ORDER BY t.id;
49 affected rows
Time: insert_new_uniq(4) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
49 affected rows (43.774ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
49 affected rows (24.896ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
840 affected rows (24.868ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image4 9 seconds
5
Tue Jun 23 18:15:32 CEST 2015
Time: CALL insert_tempuniquecatalog 7.49
Time: CALL flag_n_to_m_tempunique() 1.96
DELETE FROM one_to_many;
1681 affected rows (27.785ms)
DELETE FROM new_to_new;
1681 affected rows (452.045ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
1322 affected rows (754.000ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
1322 affected rows (69.707ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
661 affected rows (33.101ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
1322 affected rows (33.204ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
1322 affected rows (8.376ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
1322 affected rows (8.233ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
1328 affected rows (16.447ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
176717 affected rows (139.414ms)
Time: mclient gwacdb -e -i onetomany.sql 1.55
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
49 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 5 AND tuc.targetid IS NULL ORDER BY t.id;
27 affected rows
Time: insert_new_uniq(5) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
27 affected rows (36.108ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
27 affected rows (24.938ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
661 affected rows (24.687ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image5 13 seconds
6
Tue Jun 23 18:15:45 CEST 2015
Time: CALL insert_tempuniquecatalog 6.78
Time: CALL flag_n_to_m_tempunique() 0.41
DELETE FROM one_to_many;
1322 affected rows (32.320ms)
DELETE FROM new_to_new;
1322 affected rows (6.158ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
1073 affected rows (41.681ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
1073 affected rows (66.944ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
536 affected rows (33.073ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
1073 affected rows (33.277ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
1073 affected rows (8.333ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
1073 affected rows (7.995ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
1078 affected rows (16.729ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
177274 affected rows (104.944ms)
Time: mclient gwacdb -e -i onetomany.sql 0.35
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
27 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 6 AND tuc.targetid IS NULL ORDER BY t.id;
19 affected rows
Time: insert_new_uniq(6) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
19 affected rows (36.262ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
19 affected rows (24.755ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
536 affected rows (24.887ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image6 9 seconds
7
Tue Jun 23 18:15:54 CEST 2015
Time: CALL insert_tempuniquecatalog 6.67
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
1073 affected rows (30.156ms)
DELETE FROM new_to_new;
1073 affected rows (14.439ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
972 affected rows (41.650ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
972 affected rows (66.897ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
486 affected rows (33.253ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
972 affected rows (33.162ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
972 affected rows (8.406ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
972 affected rows (7.950ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
982 affected rows (16.788ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
177705 affected rows (130.209ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
19 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 7 AND tuc.targetid IS NULL ORDER BY t.id;
12 affected rows
Time: insert_new_uniq(7) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
12 affected rows (43.563ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
12 affected rows (33.174ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
486 affected rows (24.727ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image7 9 seconds
8
Tue Jun 23 18:16:03 CEST 2015
Time: CALL insert_tempuniquecatalog 7.13
Time: CALL flag_n_to_m_tempunique() 0.41
DELETE FROM one_to_many;
972 affected rows (38.513ms)
DELETE FROM new_to_new;
972 affected rows (8.736ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
862 affected rows (41.622ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
862 affected rows (58.614ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
431 affected rows (33.214ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
862 affected rows (33.266ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
862 affected rows (8.356ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
862 affected rows (7.964ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
873 affected rows (21.190ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
178002 affected rows (115.626ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 2.34
DELETE FROM newsrc;
12 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 8 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(8) 0.09
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (57.757ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (33.081ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
431 affected rows (35.244ms)
Time: mclient gwacdb -e -i newsource.sql 0.13
Time for image8 13 seconds
9
Tue Jun 23 18:16:16 CEST 2015
Time: CALL insert_tempuniquecatalog 7.04
Time: CALL flag_n_to_m_tempunique() 0.40
DELETE FROM one_to_many;
862 affected rows (30.671ms)
DELETE FROM new_to_new;
862 affected rows (3.075ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
750 affected rows (41.594ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
750 affected rows (58.541ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
375 affected rows (33.234ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
750 affected rows (24.848ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
750 affected rows (8.365ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
750 affected rows (7.939ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
758 affected rows (16.624ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
178364 affected rows (127.257ms)
Time: mclient gwacdb -e -i onetomany.sql 0.35
Time: CALL update_1_to_1_uniq() 1.37
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 9 AND tuc.targetid IS NULL ORDER BY t.id;
11 affected rows
Time: insert_new_uniq(9) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
11 affected rows (35.370ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
11 affected rows (33.310ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
375 affected rows (24.783ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image9 9 seconds
10
Tue Jun 23 18:16:25 CEST 2015
Time: CALL insert_tempuniquecatalog 7.14
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
750 affected rows (14.965ms)
DELETE FROM new_to_new;
750 affected rows (7.852ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
724 affected rows (41.604ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
724 affected rows (58.719ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
362 affected rows (32.976ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
724 affected rows (33.380ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
724 affected rows (8.367ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
724 affected rows (7.865ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
727 affected rows (16.699ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
178614 affected rows (112.530ms)
Time: mclient gwacdb -e -i onetomany.sql 0.34
Time: CALL update_1_to_1_uniq() 1.36
DELETE FROM newsrc;
11 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 10 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(10) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (43.269ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.161ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
362 affected rows (33.140ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image10 9 seconds
11
Tue Jun 23 18:16:34 CEST 2015
Time: CALL insert_tempuniquecatalog 7.13
Time: CALL flag_n_to_m_tempunique() 0.41
DELETE FROM one_to_many;
724 affected rows (31.432ms)
DELETE FROM new_to_new;
724 affected rows (19.457ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
670 affected rows (41.688ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
670 affected rows (58.507ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
335 affected rows (33.173ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
670 affected rows (24.932ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
670 affected rows (8.351ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
670 affected rows (7.919ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
675 affected rows (16.611ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
178813 affected rows (116.589ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 11 AND tuc.targetid IS NULL ORDER BY t.id;
12 affected rows
Time: insert_new_uniq(11) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
12 affected rows (34.422ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
12 affected rows (24.860ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
335 affected rows (24.840ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image11 10 seconds
12
Tue Jun 23 18:16:44 CEST 2015
Time: CALL insert_tempuniquecatalog 7.09
Time: CALL flag_n_to_m_tempunique() 1.94
DELETE FROM one_to_many;
670 affected rows (42.537ms)
DELETE FROM new_to_new;
670 affected rows (5.773ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
608 affected rows (49.929ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
608 affected rows (75.135ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
304 affected rows (33.081ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
608 affected rows (33.307ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
608 affected rows (8.357ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
608 affected rows (7.812ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
610 affected rows (16.627ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
179095 affected rows (141.925ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
12 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 12 AND tuc.targetid IS NULL ORDER BY t.id;
13 affected rows
Time: insert_new_uniq(12) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
13 affected rows (34.628ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
13 affected rows (32.929ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
304 affected rows (24.996ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image12 11 seconds
13
Tue Jun 23 18:16:55 CEST 2015
Time: CALL insert_tempuniquecatalog 7.14
Time: CALL flag_n_to_m_tempunique() 0.44
DELETE FROM one_to_many;
608 affected rows (44.003ms)
DELETE FROM new_to_new;
608 affected rows (3.960ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
568 affected rows (41.535ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
568 affected rows (71.125ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
284 affected rows (32.560ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
568 affected rows (24.934ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
568 affected rows (8.347ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
568 affected rows (7.968ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
573 affected rows (16.519ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
179378 affected rows (120.303ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
13 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 13 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(13) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (36.127ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (33.238ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
284 affected rows (24.846ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image13 10 seconds
14
Tue Jun 23 18:17:05 CEST 2015
Time: CALL insert_tempuniquecatalog 7.07
Time: CALL flag_n_to_m_tempunique() 0.52
DELETE FROM one_to_many;
568 affected rows (20.543ms)
DELETE FROM new_to_new;
568 affected rows (9.088ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
546 affected rows (49.951ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
546 affected rows (66.722ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
273 affected rows (33.169ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
546 affected rows (33.383ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
546 affected rows (8.314ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
546 affected rows (8.037ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
553 affected rows (16.486ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
179474 affected rows (138.313ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 14 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(14) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (35.397ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.100ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
273 affected rows (24.755ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image14 9 seconds
15
Tue Jun 23 18:17:14 CEST 2015
Time: CALL insert_tempuniquecatalog 8.11
Time: CALL flag_n_to_m_tempunique() 0.42
DELETE FROM one_to_many;
546 affected rows (29.516ms)
DELETE FROM new_to_new;
546 affected rows (32.879ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
550 affected rows (70.129ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
550 affected rows (79.851ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
275 affected rows (33.143ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
550 affected rows (33.287ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
550 affected rows (8.312ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
550 affected rows (7.924ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
553 affected rows (19.538ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
179751 affected rows (153.542ms)
Time: mclient gwacdb -e -i onetomany.sql 2.59
Time: CALL update_1_to_1_uniq() 1.55
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 15 AND tuc.targetid IS NULL ORDER BY t.id;
10 affected rows
Time: insert_new_uniq(15) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
10 affected rows (36.015ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
10 affected rows (33.213ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
275 affected rows (24.762ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image15 13 seconds
16
Tue Jun 23 18:17:27 CEST 2015
Time: CALL insert_tempuniquecatalog 6.94
Time: CALL flag_n_to_m_tempunique() 0.43
DELETE FROM one_to_many;
550 affected rows (42.226ms)
DELETE FROM new_to_new;
550 affected rows (8.827ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
560 affected rows (49.828ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
560 affected rows (66.892ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
280 affected rows (32.986ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
560 affected rows (33.269ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
560 affected rows (8.413ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
560 affected rows (7.776ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
563 affected rows (16.558ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
179854 affected rows (134.321ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.39
DELETE FROM newsrc;
10 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 16 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(16) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (35.286ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (33.194ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
280 affected rows (24.721ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image16 10 seconds
17
Tue Jun 23 18:17:37 CEST 2015
Time: CALL insert_tempuniquecatalog 7.00
Time: CALL flag_n_to_m_tempunique() 0.43
DELETE FROM one_to_many;
560 affected rows (51.592ms)
DELETE FROM new_to_new;
560 affected rows (19.221ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
563 affected rows (41.487ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
563 affected rows (58.550ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
281 affected rows (33.070ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
563 affected rows (33.393ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
563 affected rows (8.337ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
563 affected rows (7.894ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
568 affected rows (16.614ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
179974 affected rows (120.119ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.52
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 17 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(17) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (35.967ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.110ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
281 affected rows (24.790ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image17 9 seconds
18
Tue Jun 23 18:17:46 CEST 2015
Time: CALL insert_tempuniquecatalog 7.35
Time: CALL flag_n_to_m_tempunique() 0.55
DELETE FROM one_to_many;
563 affected rows (27.284ms)
DELETE FROM new_to_new;
563 affected rows (8.430ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
515 affected rows (41.651ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
515 affected rows (58.433ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
257 affected rows (33.220ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
515 affected rows (33.197ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
515 affected rows (8.353ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
515 affected rows (7.930ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
517 affected rows (16.692ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
180332 affected rows (127.936ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 18 AND tuc.targetid IS NULL ORDER BY t.id;
9 affected rows
Time: insert_new_uniq(18) 0.09
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
9 affected rows (40.463ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
9 affected rows (33.104ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
257 affected rows (24.747ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image18 12 seconds
19
Tue Jun 23 18:17:58 CEST 2015
Time: CALL insert_tempuniquecatalog 7.20
Time: CALL flag_n_to_m_tempunique() 0.43
DELETE FROM one_to_many;
515 affected rows (44.111ms)
DELETE FROM new_to_new;
515 affected rows (3.246ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
558 affected rows (41.714ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
558 affected rows (66.781ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
279 affected rows (33.127ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
558 affected rows (33.233ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
558 affected rows (8.436ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
558 affected rows (7.918ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
562 affected rows (16.642ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
180365 affected rows (135.605ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.39
DELETE FROM newsrc;
9 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 19 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(19) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (36.109ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (24.601ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
279 affected rows (25.025ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image19 9 seconds
20
Tue Jun 23 18:18:07 CEST 2015
Time: CALL insert_tempuniquecatalog 6.91
Time: CALL flag_n_to_m_tempunique() 0.56
DELETE FROM one_to_many;
558 affected rows (18.290ms)
DELETE FROM new_to_new;
558 affected rows (4.426ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
508 affected rows (58.172ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
508 affected rows (75.056ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
254 affected rows (33.058ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
508 affected rows (33.016ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
508 affected rows (8.341ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
508 affected rows (7.875ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
514 affected rows (24.964ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
180634 affected rows (133.468ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 20 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(20) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (35.817ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.059ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
254 affected rows (24.759ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image20 10 seconds
21
Tue Jun 23 18:18:17 CEST 2015
Time: CALL insert_tempuniquecatalog 7.17
Time: CALL flag_n_to_m_tempunique() 0.56
DELETE FROM one_to_many;
508 affected rows (43.418ms)
DELETE FROM new_to_new;
508 affected rows (10.327ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
466 affected rows (49.833ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
466 affected rows (66.705ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
233 affected rows (33.039ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
466 affected rows (33.256ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
466 affected rows (8.378ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
466 affected rows (7.737ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
469 affected rows (16.760ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
180769 affected rows (126.557ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 21 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(21) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (43.158ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.085ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
233 affected rows (24.688ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image21 10 seconds
22
Tue Jun 23 18:18:27 CEST 2015
Time: CALL insert_tempuniquecatalog 7.66
Time: CALL flag_n_to_m_tempunique() 1.83
DELETE FROM one_to_many;
466 affected rows (34.279ms)
DELETE FROM new_to_new;
466 affected rows (19.675ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
454 affected rows (41.558ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
454 affected rows (75.181ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
227 affected rows (32.902ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
454 affected rows (33.271ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
454 affected rows (8.336ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
454 affected rows (7.804ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
459 affected rows (24.893ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
180954 affected rows (137.325ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.39
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 22 AND tuc.targetid IS NULL ORDER BY t.id;
8 affected rows
Time: insert_new_uniq(22) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
8 affected rows (43.387ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
8 affected rows (33.156ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
227 affected rows (24.823ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image22 11 seconds
23
Tue Jun 23 18:18:38 CEST 2015
Time: CALL insert_tempuniquecatalog 6.77
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
454 affected rows (20.281ms)
DELETE FROM new_to_new;
454 affected rows (10.285ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
452 affected rows (49.890ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
452 affected rows (58.370ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
226 affected rows (33.117ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
452 affected rows (33.471ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
452 affected rows (8.333ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
452 affected rows (7.768ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
454 affected rows (16.709ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
181028 affected rows (118.103ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.35
DELETE FROM newsrc;
8 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 23 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(23) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (36.754ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (24.759ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
226 affected rows (24.893ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image23 10 seconds
24
Tue Jun 23 18:18:48 CEST 2015
Time: CALL insert_tempuniquecatalog 7.22
Time: CALL flag_n_to_m_tempunique() 0.45
DELETE FROM one_to_many;
452 affected rows (36.841ms)
DELETE FROM new_to_new;
452 affected rows (5.350ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
364 affected rows (41.559ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
364 affected rows (58.469ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
182 affected rows (33.166ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
364 affected rows (33.280ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
364 affected rows (8.329ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
364 affected rows (7.897ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
365 affected rows (16.658ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
181305 affected rows (123.403ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.39
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 24 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(24) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (43.718ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.059ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
182 affected rows (24.764ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image24 9 seconds
25
Tue Jun 23 18:18:57 CEST 2015
Time: CALL insert_tempuniquecatalog 7.79
Time: CALL flag_n_to_m_tempunique() 0.44
DELETE FROM one_to_many;
364 affected rows (30.784ms)
DELETE FROM new_to_new;
364 affected rows (19.220ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
346 affected rows (41.686ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
346 affected rows (66.807ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
173 affected rows (33.159ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
346 affected rows (33.280ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
346 affected rows (8.312ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
346 affected rows (7.829ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
351 affected rows (16.635ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
181365 affected rows (119.255ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 25 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(25) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (43.847ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (32.909ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
173 affected rows (24.827ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image25 12 seconds
26
Tue Jun 23 18:19:09 CEST 2015
Time: CALL insert_tempuniquecatalog 7.18
Time: CALL flag_n_to_m_tempunique() 0.47
DELETE FROM one_to_many;
346 affected rows (39.138ms)
DELETE FROM new_to_new;
346 affected rows (4.901ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
354 affected rows (41.591ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
354 affected rows (58.326ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
177 affected rows (33.207ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
354 affected rows (24.903ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
354 affected rows (8.329ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
354 affected rows (7.817ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
354 affected rows (16.556ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
181588 affected rows (133.877ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.36
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 26 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(26) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (35.372ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (24.809ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
177 affected rows (24.738ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image26 10 seconds
27
Tue Jun 23 18:19:19 CEST 2015
Time: CALL insert_tempuniquecatalog 7.24
Time: CALL flag_n_to_m_tempunique() 0.54
DELETE FROM one_to_many;
354 affected rows (43.658ms)
DELETE FROM new_to_new;
354 affected rows (14.880ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
382 affected rows (41.607ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
382 affected rows (75.155ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
191 affected rows (33.081ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
382 affected rows (33.245ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
382 affected rows (8.338ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
382 affected rows (7.898ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
383 affected rows (16.637ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
181594 affected rows (124.666ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 27 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(27) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (43.415ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.108ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
191 affected rows (24.669ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image27 9 seconds
28
Tue Jun 23 18:19:28 CEST 2015
Time: CALL insert_tempuniquecatalog 7.30
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
382 affected rows (37.526ms)
DELETE FROM new_to_new;
382 affected rows (7.987ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
384 affected rows (58.082ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
384 affected rows (66.734ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
192 affected rows (33.141ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
384 affected rows (33.315ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
384 affected rows (8.339ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
384 affected rows (7.921ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
384 affected rows (16.591ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
181685 affected rows (129.302ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 28 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(28) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (52.136ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.106ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
192 affected rows (24.813ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image28 10 seconds
29
Tue Jun 23 18:19:38 CEST 2015
Time: CALL insert_tempuniquecatalog 7.25
Time: CALL flag_n_to_m_tempunique() 1.84
DELETE FROM one_to_many;
384 affected rows (15.218ms)
DELETE FROM new_to_new;
384 affected rows (5.285ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
396 affected rows (41.642ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
396 affected rows (75.166ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
198 affected rows (32.998ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
396 affected rows (33.272ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
396 affected rows (9.014ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
396 affected rows (7.199ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
399 affected rows (24.901ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
181837 affected rows (142.284ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 29 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(29) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (35.537ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (32.893ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
198 affected rows (24.936ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image29 11 seconds
30
Tue Jun 23 18:19:49 CEST 2015
Time: CALL insert_tempuniquecatalog 7.03
Time: CALL flag_n_to_m_tempunique() 0.44
DELETE FROM one_to_many;
396 affected rows (20.462ms)
DELETE FROM new_to_new;
396 affected rows (10.214ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
384 affected rows (49.947ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
384 affected rows (75.069ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
192 affected rows (33.132ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
384 affected rows (33.239ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
384 affected rows (8.354ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
384 affected rows (7.811ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
385 affected rows (16.589ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
181793 affected rows (144.105ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 30 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(30) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (35.877ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.819ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
192 affected rows (24.874ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image30 10 seconds
31
Tue Jun 23 18:19:59 CEST 2015
Time: CALL insert_tempuniquecatalog 7.09
Time: CALL flag_n_to_m_tempunique() 0.58
DELETE FROM one_to_many;
384 affected rows (39.756ms)
DELETE FROM new_to_new;
384 affected rows (30.731ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
336 affected rows (49.824ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
336 affected rows (76.171ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
168 affected rows (40.283ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
336 affected rows (33.280ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
336 affected rows (8.370ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
336 affected rows (7.695ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
338 affected rows (16.615ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182026 affected rows (142.270ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 31 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(31) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.103ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.192ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
168 affected rows (24.618ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image31 10 seconds
32
Tue Jun 23 18:20:09 CEST 2015
Time: CALL insert_tempuniquecatalog 7.70
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
336 affected rows (24.521ms)
DELETE FROM new_to_new;
336 affected rows (41.021ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
334 affected rows (74.751ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
334 affected rows (83.375ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
167 affected rows (33.087ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
334 affected rows (33.288ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
334 affected rows (8.339ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
334 affected rows (7.861ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
334 affected rows (16.553ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182107 affected rows (149.603ms)
Time: mclient gwacdb -e -i onetomany.sql 1.15
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 32 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(32) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.470ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.052ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
167 affected rows (24.822ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image32 11 seconds
33
Tue Jun 23 18:20:20 CEST 2015
Time: CALL insert_tempuniquecatalog 7.35
Time: CALL flag_n_to_m_tempunique() 0.44
DELETE FROM one_to_many;
334 affected rows (37.848ms)
DELETE FROM new_to_new;
334 affected rows (14.117ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
342 affected rows (41.561ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
342 affected rows (58.366ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
171 affected rows (33.284ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
342 affected rows (33.173ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
342 affected rows (8.840ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
342 affected rows (7.371ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
345 affected rows (16.570ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182217 affected rows (115.636ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 33 AND tuc.targetid IS NULL ORDER BY t.id;
7 affected rows
Time: insert_new_uniq(33) 0.09
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
7 affected rows (35.267ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
7 affected rows (24.993ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
171 affected rows (24.586ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image33 10 seconds
34
Tue Jun 23 18:20:30 CEST 2015
Time: CALL insert_tempuniquecatalog 7.16
Time: CALL flag_n_to_m_tempunique() 0.43
DELETE FROM one_to_many;
342 affected rows (13.776ms)
DELETE FROM new_to_new;
342 affected rows (9.180ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
350 affected rows (41.560ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
350 affected rows (66.842ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
175 affected rows (33.016ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
350 affected rows (33.335ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
350 affected rows (8.353ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
350 affected rows (7.812ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
352 affected rows (16.617ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182294 affected rows (129.639ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
7 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 34 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(34) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (44.151ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.644ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
175 affected rows (24.251ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image34 9 seconds
35
Tue Jun 23 18:20:39 CEST 2015
Time: CALL insert_tempuniquecatalog 8.14
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
350 affected rows (25.076ms)
DELETE FROM new_to_new;
350 affected rows (51.647ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
346 affected rows (88.808ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
346 affected rows (91.605ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
173 affected rows (41.429ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
346 affected rows (33.261ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
346 affected rows (8.342ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
346 affected rows (7.882ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
347 affected rows (16.556ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182483 affected rows (142.556ms)
Time: mclient gwacdb -e -i onetomany.sql 2.59
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 35 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(35) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (35.224ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.808ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
173 affected rows (24.137ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image35 13 seconds
36
Tue Jun 23 18:20:52 CEST 2015
Time: CALL insert_tempuniquecatalog 7.12
Time: CALL flag_n_to_m_tempunique() 0.45
DELETE FROM one_to_many;
346 affected rows (54.131ms)
DELETE FROM new_to_new;
346 affected rows (8.638ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
294 affected rows (41.481ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
294 affected rows (58.341ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
147 affected rows (33.091ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
294 affected rows (33.335ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
294 affected rows (8.341ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
294 affected rows (7.894ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
294 affected rows (16.708ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182574 affected rows (128.369ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.59
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 36 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(36) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (35.420ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.266ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
147 affected rows (24.688ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image36 10 seconds
37
Tue Jun 23 18:21:02 CEST 2015
Time: CALL insert_tempuniquecatalog 6.99
Time: CALL flag_n_to_m_tempunique() 0.47
DELETE FROM one_to_many;
294 affected rows (38.618ms)
DELETE FROM new_to_new;
294 affected rows (29.590ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
302 affected rows (41.507ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
302 affected rows (58.290ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
151 affected rows (33.174ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
302 affected rows (33.261ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
302 affected rows (8.445ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
302 affected rows (7.803ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
303 affected rows (16.563ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182718 affected rows (127.748ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 37 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(37) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.289ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (24.927ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
151 affected rows (24.714ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image37 10 seconds
38
Tue Jun 23 18:21:12 CEST 2015
Time: CALL insert_tempuniquecatalog 7.39
Time: CALL flag_n_to_m_tempunique() 0.54
DELETE FROM one_to_many;
302 affected rows (14.817ms)
DELETE FROM new_to_new;
302 affected rows (9.573ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
294 affected rows (33.204ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
294 affected rows (58.471ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
147 affected rows (33.203ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
294 affected rows (33.277ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
294 affected rows (8.345ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
294 affected rows (7.852ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
295 affected rows (16.599ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182878 affected rows (134.978ms)
Time: mclient gwacdb -e -i onetomany.sql 0.35
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 38 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(38) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (48.414ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.009ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
147 affected rows (24.677ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image38 11 seconds
39
Tue Jun 23 18:21:23 CEST 2015
Time: CALL insert_tempuniquecatalog 7.15
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
294 affected rows (38.308ms)
DELETE FROM new_to_new;
294 affected rows (21.923ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
326 affected rows (41.552ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
326 affected rows (75.158ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
163 affected rows (33.178ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
326 affected rows (33.304ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
326 affected rows (8.332ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
326 affected rows (7.794ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
331 affected rows (16.550ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182832 affected rows (151.322ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 39 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(39) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (43.183ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.849ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
163 affected rows (24.740ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image39 10 seconds
40
Tue Jun 23 18:21:33 CEST 2015
Time: CALL insert_tempuniquecatalog 7.26
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
326 affected rows (38.549ms)
DELETE FROM new_to_new;
326 affected rows (8.138ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
270 affected rows (49.925ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
270 affected rows (74.990ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
135 affected rows (33.105ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
270 affected rows (33.245ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
270 affected rows (8.404ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
270 affected rows (7.654ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
272 affected rows (16.589ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182887 affected rows (154.434ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 40 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(40) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (52.014ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (32.976ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
135 affected rows (24.809ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image40 10 seconds
41
Tue Jun 23 18:21:43 CEST 2015
Time: CALL insert_tempuniquecatalog 7.29
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
270 affected rows (25.592ms)
DELETE FROM new_to_new;
270 affected rows (7.385ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
278 affected rows (41.548ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
278 affected rows (66.720ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
139 affected rows (36.011ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
278 affected rows (33.253ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
278 affected rows (8.438ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
278 affected rows (7.874ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
279 affected rows (16.599ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
182947 affected rows (138.008ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 41 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(41) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (44.669ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (32.896ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
139 affected rows (24.905ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image41 9 seconds
42
Tue Jun 23 18:21:52 CEST 2015
Time: CALL insert_tempuniquecatalog 7.89
Time: CALL flag_n_to_m_tempunique() 1.96
DELETE FROM one_to_many;
278 affected rows (25.189ms)
DELETE FROM new_to_new;
278 affected rows (4.245ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
306 affected rows (41.586ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
306 affected rows (66.666ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
153 affected rows (33.242ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
306 affected rows (33.106ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
306 affected rows (8.428ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
306 affected rows (7.828ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
309 affected rows (16.571ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183061 affected rows (134.565ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.51
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 42 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(42) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (36.539ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (32.954ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
153 affected rows (24.835ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image42 13 seconds
43
Tue Jun 23 18:22:05 CEST 2015
Time: CALL insert_tempuniquecatalog 7.11
Time: CALL flag_n_to_m_tempunique() 0.60
DELETE FROM one_to_many;
306 affected rows (17.730ms)
DELETE FROM new_to_new;
306 affected rows (3.890ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
260 affected rows (41.539ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
260 affected rows (66.547ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
130 affected rows (33.207ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
260 affected rows (33.203ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
260 affected rows (8.442ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
260 affected rows (7.715ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
262 affected rows (16.596ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183215 affected rows (125.992ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.55
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 43 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(43) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (43.571ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (33.090ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
130 affected rows (24.717ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image43 9 seconds
44
Tue Jun 23 18:22:14 CEST 2015
Time: CALL insert_tempuniquecatalog 7.28
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
260 affected rows (33.700ms)
DELETE FROM new_to_new;
260 affected rows (5.662ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
268 affected rows (41.452ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
268 affected rows (58.454ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
134 affected rows (33.064ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
268 affected rows (33.330ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
268 affected rows (8.334ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
268 affected rows (7.930ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
269 affected rows (16.560ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183226 affected rows (126.103ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 44 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(44) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (43.421ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.104ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
134 affected rows (24.810ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image44 10 seconds
45
Tue Jun 23 18:22:24 CEST 2015
Time: CALL insert_tempuniquecatalog 7.23
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
268 affected rows (25.329ms)
DELETE FROM new_to_new;
268 affected rows (24.357ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
258 affected rows (47.651ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
258 affected rows (75.047ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
129 affected rows (41.518ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
258 affected rows (33.133ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
258 affected rows (8.361ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
258 affected rows (7.875ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
260 affected rows (16.639ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183374 affected rows (134.553ms)
Time: mclient gwacdb -e -i onetomany.sql 1.92
Time: CALL update_1_to_1_uniq() 1.85
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 45 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(45) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (36.124ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.930ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
129 affected rows (24.668ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image45 12 seconds
46
Tue Jun 23 18:22:36 CEST 2015
Time: CALL insert_tempuniquecatalog 7.21
Time: CALL flag_n_to_m_tempunique() 0.47
DELETE FROM one_to_many;
258 affected rows (21.659ms)
DELETE FROM new_to_new;
258 affected rows (11.932ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
298 affected rows (41.490ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
298 affected rows (58.444ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
149 affected rows (33.182ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
298 affected rows (33.296ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
298 affected rows (8.322ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
298 affected rows (7.842ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
304 affected rows (16.605ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183489 affected rows (108.457ms)
Time: mclient gwacdb -e -i onetomany.sql 0.34
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 46 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(46) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (43.857ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (34.581ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
149 affected rows (23.191ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image46 10 seconds
47
Tue Jun 23 18:22:46 CEST 2015
Time: CALL insert_tempuniquecatalog 7.41
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
298 affected rows (21.154ms)
DELETE FROM new_to_new;
298 affected rows (10.336ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
246 affected rows (66.509ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
246 affected rows (66.759ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
123 affected rows (33.112ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
246 affected rows (33.376ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
246 affected rows (8.340ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
246 affected rows (7.763ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
246 affected rows (16.575ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183534 affected rows (127.030ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.52
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 47 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(47) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (36.093ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.167ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
123 affected rows (24.887ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image47 10 seconds
48
Tue Jun 23 18:22:56 CEST 2015
Time: CALL insert_tempuniquecatalog 7.35
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
246 affected rows (36.890ms)
DELETE FROM new_to_new;
246 affected rows (10.238ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
276 affected rows (41.548ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
276 affected rows (128.346ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
138 affected rows (36.385ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
276 affected rows (33.224ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
276 affected rows (8.359ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
276 affected rows (7.869ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
278 affected rows (16.609ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183729 affected rows (162.040ms)
Time: mclient gwacdb -e -i onetomany.sql 1.80
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(48) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (34.832ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.159ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
138 affected rows (24.768ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image48 11 seconds
49
Tue Jun 23 18:23:07 CEST 2015
Time: CALL insert_tempuniquecatalog 7.37
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
276 affected rows (38.377ms)
DELETE FROM new_to_new;
276 affected rows (19.687ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
260 affected rows (41.591ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
260 affected rows (66.780ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
130 affected rows (33.075ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
260 affected rows (33.236ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
260 affected rows (8.496ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
260 affected rows (7.807ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
262 affected rows (16.545ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183739 affected rows (117.572ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.39
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 49 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(49) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (44.332ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.069ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
130 affected rows (24.669ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image49 10 seconds
50
Tue Jun 23 18:23:17 CEST 2015
Time: CALL insert_tempuniquecatalog 7.24
Time: CALL flag_n_to_m_tempunique() 0.58
DELETE FROM one_to_many;
260 affected rows (20.654ms)
DELETE FROM new_to_new;
260 affected rows (8.717ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
238 affected rows (58.208ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
238 affected rows (66.625ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
119 affected rows (33.143ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
238 affected rows (33.269ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
238 affected rows (8.237ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
238 affected rows (7.880ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
242 affected rows (16.717ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183744 affected rows (131.712ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.56
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 50 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(50) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (43.976ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.222ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
119 affected rows (24.778ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image50 10 seconds
51
Tue Jun 23 18:23:27 CEST 2015
Time: CALL insert_tempuniquecatalog 7.13
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
238 affected rows (38.296ms)
DELETE FROM new_to_new;
238 affected rows (19.825ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
222 affected rows (41.634ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
222 affected rows (91.543ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
111 affected rows (33.137ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
222 affected rows (33.320ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
222 affected rows (8.337ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
222 affected rows (7.736ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
223 affected rows (16.672ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183949 affected rows (143.003ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 51 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(51) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.801ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.112ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
111 affected rows (24.704ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image51 11 seconds
52
Tue Jun 23 18:23:38 CEST 2015
Time: CALL insert_tempuniquecatalog 7.55
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
222 affected rows (37.700ms)
DELETE FROM new_to_new;
222 affected rows (13.683ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
282 affected rows (41.564ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
282 affected rows (66.729ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
141 affected rows (33.129ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
282 affected rows (33.242ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
282 affected rows (8.414ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
282 affected rows (7.833ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
283 affected rows (16.639ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183902 affected rows (138.538ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.57
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 52 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(52) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (35.826ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (24.907ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
141 affected rows (24.794ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image52 10 seconds
53
Tue Jun 23 18:23:48 CEST 2015
Time: CALL insert_tempuniquecatalog 7.33
Time: CALL flag_n_to_m_tempunique() 0.47
DELETE FROM one_to_many;
282 affected rows (37.751ms)
DELETE FROM new_to_new;
282 affected rows (6.403ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
244 affected rows (41.624ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
244 affected rows (66.630ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
122 affected rows (33.125ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
244 affected rows (33.336ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
244 affected rows (8.318ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
244 affected rows (7.896ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
245 affected rows (16.641ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
183986 affected rows (140.305ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.58
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 53 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(53) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (35.393ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (24.878ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
122 affected rows (24.703ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image53 10 seconds
54
Tue Jun 23 18:23:58 CEST 2015
Time: CALL insert_tempuniquecatalog 7.19
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
244 affected rows (20.135ms)
DELETE FROM new_to_new;
244 affected rows (9.526ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
204 affected rows (41.452ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
204 affected rows (66.758ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
102 affected rows (33.085ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
204 affected rows (25.006ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
204 affected rows (8.392ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
204 affected rows (7.725ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
204 affected rows (16.565ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184074 affected rows (130.842ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 54 AND tuc.targetid IS NULL ORDER BY t.id;
7 affected rows
Time: insert_new_uniq(54) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
7 affected rows (44.137ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
7 affected rows (33.112ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
102 affected rows (24.809ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image54 10 seconds
55
Tue Jun 23 18:24:08 CEST 2015
Time: CALL insert_tempuniquecatalog 7.37
Time: CALL flag_n_to_m_tempunique() 1.99
DELETE FROM one_to_many;
204 affected rows (39.903ms)
DELETE FROM new_to_new;
204 affected rows (15.485ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
212 affected rows (49.836ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
212 affected rows (75.115ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
106 affected rows (41.534ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
212 affected rows (33.118ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
212 affected rows (8.461ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
212 affected rows (7.692ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
214 affected rows (16.636ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184281 affected rows (141.358ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.59
DELETE FROM newsrc;
7 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 55 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(55) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (43.330ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (805.067ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
106 affected rows (479.958ms)
Time: mclient gwacdb -e -i newsource.sql 1.33
Time for image55 13 seconds
56
Tue Jun 23 18:24:21 CEST 2015
Time: CALL insert_tempuniquecatalog 7.43
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
212 affected rows (40.992ms)
DELETE FROM new_to_new;
212 affected rows (7.267ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
264 affected rows (41.569ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
264 affected rows (58.462ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
132 affected rows (33.156ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
264 affected rows (33.120ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
264 affected rows (8.360ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
264 affected rows (7.903ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
267 affected rows (16.617ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184236 affected rows (129.684ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 56 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(56) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (36.079ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.836ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
132 affected rows (24.801ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image56 10 seconds
57
Tue Jun 23 18:24:31 CEST 2015
Time: CALL insert_tempuniquecatalog 7.39
Time: CALL flag_n_to_m_tempunique() 0.47
DELETE FROM one_to_many;
264 affected rows (35.730ms)
DELETE FROM new_to_new;
264 affected rows (10.831ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
218 affected rows (41.535ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
218 affected rows (58.916ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
109 affected rows (32.593ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
218 affected rows (33.266ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
218 affected rows (8.338ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
218 affected rows (7.933ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
220 affected rows (16.539ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184229 affected rows (121.164ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.51
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 57 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(57) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (44.486ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.066ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
109 affected rows (24.907ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image57 10 seconds
58
Tue Jun 23 18:24:41 CEST 2015
Time: CALL insert_tempuniquecatalog 7.35
Time: CALL flag_n_to_m_tempunique() 1.81
DELETE FROM one_to_many;
218 affected rows (16.499ms)
DELETE FROM new_to_new;
218 affected rows (11.080ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
240 affected rows (58.073ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
240 affected rows (83.421ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
120 affected rows (41.314ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
240 affected rows (33.299ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
240 affected rows (8.373ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
240 affected rows (7.777ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
241 affected rows (16.562ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184409 affected rows (155.170ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.56
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 58 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(58) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (43.893ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (41.324ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
120 affected rows (24.686ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image58 11 seconds
59
Tue Jun 23 18:24:52 CEST 2015
Time: CALL insert_tempuniquecatalog 7.26
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
240 affected rows (44.099ms)
DELETE FROM new_to_new;
240 affected rows (18.655ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
216 affected rows (42.134ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
216 affected rows (74.473ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
108 affected rows (41.440ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
216 affected rows (33.199ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
216 affected rows (8.333ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
216 affected rows (7.763ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
216 affected rows (16.579ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184631 affected rows (165.370ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.51
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 59 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(59) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (43.391ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.186ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
108 affected rows (24.798ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image59 10 seconds
60
Tue Jun 23 18:25:02 CEST 2015
Time: CALL insert_tempuniquecatalog 7.21
Time: CALL flag_n_to_m_tempunique() 0.47
DELETE FROM one_to_many;
216 affected rows (60.132ms)
DELETE FROM new_to_new;
216 affected rows (19.722ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
200 affected rows (49.814ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
200 affected rows (66.582ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
100 affected rows (33.146ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
200 affected rows (33.258ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
200 affected rows (8.380ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
200 affected rows (7.835ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
200 affected rows (16.579ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184575 affected rows (129.027ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.59
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 60 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(60) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.159ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (32.500ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
100 affected rows (24.672ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image60 10 seconds
61
Tue Jun 23 18:25:12 CEST 2015
Time: CALL insert_tempuniquecatalog 7.43
Time: CALL flag_n_to_m_tempunique() 2.23
DELETE FROM one_to_many;
200 affected rows (16.263ms)
DELETE FROM new_to_new;
200 affected rows (9.511ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
226 affected rows (41.489ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
226 affected rows (66.785ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
113 affected rows (33.116ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
226 affected rows (33.272ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
226 affected rows (8.347ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
226 affected rows (7.865ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
226 affected rows (16.672ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184615 affected rows (147.129ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 61 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(61) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.187ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.119ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
113 affected rows (24.825ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image61 12 seconds
62
Tue Jun 23 18:25:24 CEST 2015
Time: CALL insert_tempuniquecatalog 8.54
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
226 affected rows (19.826ms)
DELETE FROM new_to_new;
226 affected rows (7.597ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
246 affected rows (41.651ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
246 affected rows (66.602ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
123 affected rows (33.191ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
246 affected rows (33.218ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
246 affected rows (8.334ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
246 affected rows (7.782ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
247 affected rows (16.567ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184606 affected rows (139.196ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 62 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(62) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (36.075ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (24.938ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
123 affected rows (24.796ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image62 11 seconds
63
Tue Jun 23 18:25:35 CEST 2015
Time: CALL insert_tempuniquecatalog 7.33
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
246 affected rows (44.998ms)
DELETE FROM new_to_new;
246 affected rows (5.726ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
256 affected rows (33.199ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
256 affected rows (58.360ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
128 affected rows (33.066ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
256 affected rows (33.252ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
256 affected rows (8.315ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
256 affected rows (7.898ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
257 affected rows (16.600ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184777 affected rows (134.375ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.57
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 63 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(63) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.188ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.172ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
128 affected rows (24.681ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image63 10 seconds
64
Tue Jun 23 18:25:45 CEST 2015
Time: CALL insert_tempuniquecatalog 7.14
Time: CALL flag_n_to_m_tempunique() 1.28
DELETE FROM one_to_many;
256 affected rows (40.544ms)
DELETE FROM new_to_new;
256 affected rows (17.916ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
256 affected rows (50.009ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
256 affected rows (91.701ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
128 affected rows (41.420ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
256 affected rows (33.252ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
256 affected rows (8.381ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
256 affected rows (7.730ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
258 affected rows (16.662ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
184990 affected rows (139.182ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 64 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(64) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.975ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (27.833ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
128 affected rows (25.745ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image64 11 seconds
65
Tue Jun 23 18:25:56 CEST 2015
Time: CALL insert_tempuniquecatalog 7.35
Time: CALL flag_n_to_m_tempunique() 0.57
DELETE FROM one_to_many;
256 affected rows (23.763ms)
DELETE FROM new_to_new;
256 affected rows (9.861ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
236 affected rows (41.527ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
236 affected rows (66.732ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
118 affected rows (33.135ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
236 affected rows (33.167ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
236 affected rows (8.335ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
236 affected rows (8.035ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
237 affected rows (16.521ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185024 affected rows (126.979ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 2.74
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 65 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(65) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (35.697ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (28.443ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
118 affected rows (41.279ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image65 11 seconds
66
Tue Jun 23 18:26:07 CEST 2015
Time: CALL insert_tempuniquecatalog 7.33
Time: CALL flag_n_to_m_tempunique() 0.47
DELETE FROM one_to_many;
236 affected rows (35.678ms)
DELETE FROM new_to_new;
236 affected rows (4.621ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
208 affected rows (42.177ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
208 affected rows (66.582ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
104 affected rows (33.136ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
208 affected rows (33.276ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
208 affected rows (8.356ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
208 affected rows (8.031ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
211 affected rows (16.399ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185184 affected rows (134.898ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.56
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 66 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(66) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.109ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.171ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
104 affected rows (24.748ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image66 10 seconds
67
Tue Jun 23 18:26:17 CEST 2015
Time: CALL insert_tempuniquecatalog 7.32
Time: CALL flag_n_to_m_tempunique() 1.88
DELETE FROM one_to_many;
208 affected rows (40.655ms)
DELETE FROM new_to_new;
208 affected rows (15.655ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
205 affected rows (49.618ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
205 affected rows (75.090ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
102 affected rows (41.556ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
205 affected rows (33.149ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
205 affected rows (8.301ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
205 affected rows (7.860ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
205 affected rows (16.530ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185068 affected rows (149.999ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.56
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 67 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(67) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.367ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.171ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
102 affected rows (33.060ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image67 11 seconds
68
Tue Jun 23 18:26:28 CEST 2015
Time: CALL insert_tempuniquecatalog 7.44
Time: CALL flag_n_to_m_tempunique() 0.47
DELETE FROM one_to_many;
205 affected rows (45.863ms)
DELETE FROM new_to_new;
205 affected rows (16.920ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
242 affected rows (41.532ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
242 affected rows (66.676ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
121 affected rows (33.144ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
242 affected rows (33.294ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
242 affected rows (9.563ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
242 affected rows (7.850ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
245 affected rows (16.641ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185116 affected rows (119.139ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 68 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(68) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (35.524ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.719ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
121 affected rows (24.812ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image68 10 seconds
69
Tue Jun 23 18:26:38 CEST 2015
Time: CALL insert_tempuniquecatalog 7.47
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
242 affected rows (22.154ms)
DELETE FROM new_to_new;
242 affected rows (6.418ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
240 affected rows (33.340ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
240 affected rows (66.703ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
120 affected rows (41.516ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
240 affected rows (33.234ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
240 affected rows (8.283ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
240 affected rows (7.966ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
242 affected rows (16.595ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185179 affected rows (133.724ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 69 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(69) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (36.457ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (24.802ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
120 affected rows (24.849ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image69 10 seconds
70
Tue Jun 23 18:26:48 CEST 2015
Time: CALL insert_tempuniquecatalog 7.33
Time: CALL flag_n_to_m_tempunique() 2.06
DELETE FROM one_to_many;
240 affected rows (33.158ms)
DELETE FROM new_to_new;
240 affected rows (10.886ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
230 affected rows (49.964ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
230 affected rows (74.970ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
115 affected rows (41.397ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
230 affected rows (33.257ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
230 affected rows (8.367ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
230 affected rows (7.740ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
231 affected rows (16.538ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185475 affected rows (154.626ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 70 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(70) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (36.576ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.834ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
115 affected rows (24.890ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image70 12 seconds
71
Tue Jun 23 18:27:00 CEST 2015
Time: CALL insert_tempuniquecatalog 7.19
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
230 affected rows (21.203ms)
DELETE FROM new_to_new;
230 affected rows (8.938ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
228 affected rows (41.596ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
228 affected rows (66.744ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
114 affected rows (32.968ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
228 affected rows (33.275ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
228 affected rows (8.341ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
228 affected rows (7.918ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
229 affected rows (16.542ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185270 affected rows (119.806ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.55
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 71 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(71) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (44.503ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.189ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
114 affected rows (33.128ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image71 9 seconds
72
Tue Jun 23 18:27:09 CEST 2015
Time: CALL insert_tempuniquecatalog 8.17
Time: CALL flag_n_to_m_tempunique() 0.57
DELETE FROM one_to_many;
228 affected rows (15.666ms)
DELETE FROM new_to_new;
228 affected rows (4.076ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
188 affected rows (49.897ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
188 affected rows (79.271ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
94 affected rows (37.145ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
188 affected rows (33.312ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
188 affected rows (8.316ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
188 affected rows (7.717ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
188 affected rows (16.562ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185570 affected rows (154.287ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 72 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(72) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (35.669ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.114ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
94 affected rows (33.086ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image72 11 seconds
73
Tue Jun 23 18:27:20 CEST 2015
Time: CALL insert_tempuniquecatalog 7.40
Time: CALL flag_n_to_m_tempunique() 1.80
DELETE FROM one_to_many;
188 affected rows (45.831ms)
DELETE FROM new_to_new;
188 affected rows (18.170ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
216 affected rows (39.797ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
216 affected rows (66.655ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
108 affected rows (33.182ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
216 affected rows (33.286ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
216 affected rows (8.328ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
216 affected rows (7.752ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
216 affected rows (16.580ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185564 affected rows (139.635ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.57
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 73 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(73) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (43.961ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (32.983ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
108 affected rows (33.135ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image73 12 seconds
74
Tue Jun 23 18:27:32 CEST 2015
Time: CALL insert_tempuniquecatalog 7.31
Time: CALL flag_n_to_m_tempunique() 0.60
DELETE FROM one_to_many;
216 affected rows (42.703ms)
DELETE FROM new_to_new;
216 affected rows (9.075ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
184 affected rows (58.039ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
184 affected rows (66.656ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
92 affected rows (33.176ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
184 affected rows (33.193ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
184 affected rows (8.388ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
184 affected rows (7.737ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
185 affected rows (16.612ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185522 affected rows (128.310ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.54
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 74 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(74) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (51.862ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.083ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
92 affected rows (33.146ms)
Time: mclient gwacdb -e -i newsource.sql 0.12
Time for image74 10 seconds
75
Tue Jun 23 18:27:42 CEST 2015
Time: CALL insert_tempuniquecatalog 7.60
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
184 affected rows (17.612ms)
DELETE FROM new_to_new;
184 affected rows (6.441ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
176 affected rows (41.549ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
176 affected rows (66.780ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
88 affected rows (33.087ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
176 affected rows (33.246ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
176 affected rows (8.320ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
176 affected rows (7.849ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
177 affected rows (16.590ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185688 affected rows (133.813ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 75 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(75) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (35.760ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.220ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
88 affected rows (24.839ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image75 10 seconds
76
Tue Jun 23 18:27:52 CEST 2015
Time: CALL insert_tempuniquecatalog 7.06
Time: CALL flag_n_to_m_tempunique() 1.85
DELETE FROM one_to_many;
176 affected rows (42.191ms)
DELETE FROM new_to_new;
176 affected rows (16.871ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
214 affected rows (41.523ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
214 affected rows (75.045ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
107 affected rows (41.521ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
214 affected rows (33.191ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
214 affected rows (8.321ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
214 affected rows (7.839ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
216 affected rows (16.510ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185726 affected rows (131.729ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.59
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 76 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(76) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.210ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.219ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
107 affected rows (33.070ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image76 11 seconds
77
Tue Jun 23 18:28:03 CEST 2015
Time: CALL insert_tempuniquecatalog 7.55
Time: CALL flag_n_to_m_tempunique() 0.60
DELETE FROM one_to_many;
214 affected rows (23.606ms)
DELETE FROM new_to_new;
214 affected rows (4.975ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
242 affected rows (41.696ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
242 affected rows (66.668ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
121 affected rows (33.056ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
242 affected rows (33.327ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
242 affected rows (8.858ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
242 affected rows (7.307ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
242 affected rows (16.588ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185626 affected rows (123.534ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 77 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(77) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (36.178ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (27.190ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
121 affected rows (26.372ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image77 10 seconds
78
Tue Jun 23 18:28:13 CEST 2015
Time: CALL insert_tempuniquecatalog 7.19
Time: CALL flag_n_to_m_tempunique() 0.46
DELETE FROM one_to_many;
242 affected rows (30.154ms)
DELETE FROM new_to_new;
242 affected rows (4.076ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
196 affected rows (41.578ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
196 affected rows (66.711ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
98 affected rows (33.065ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
196 affected rows (33.258ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
196 affected rows (8.334ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
196 affected rows (8.044ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
196 affected rows (16.403ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185803 affected rows (136.409ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 78 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(78) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.067ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (25.485ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
98 affected rows (29.125ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image78 10 seconds
79
Tue Jun 23 18:28:23 CEST 2015
Time: CALL insert_tempuniquecatalog 7.38
Time: CALL flag_n_to_m_tempunique() 1.87
DELETE FROM one_to_many;
196 affected rows (38.402ms)
DELETE FROM new_to_new;
196 affected rows (7.554ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
188 affected rows (41.490ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
188 affected rows (66.825ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
94 affected rows (32.995ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
188 affected rows (33.256ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
188 affected rows (8.295ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
188 affected rows (7.981ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
191 affected rows (16.440ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185902 affected rows (139.824ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 79 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(79) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (35.746ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (24.829ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
94 affected rows (24.783ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image79 11 seconds
80
Tue Jun 23 18:28:34 CEST 2015
Time: CALL insert_tempuniquecatalog 7.21
Time: CALL flag_n_to_m_tempunique() 0.58
DELETE FROM one_to_many;
188 affected rows (37.746ms)
DELETE FROM new_to_new;
188 affected rows (12.844ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
180 affected rows (41.585ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
180 affected rows (75.093ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
90 affected rows (41.499ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
180 affected rows (33.082ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
180 affected rows (8.340ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
180 affected rows (7.873ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
181 affected rows (16.566ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
185977 affected rows (130.412ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 80 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(80) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (60.688ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (41.204ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
90 affected rows (33.122ms)
Time: mclient gwacdb -e -i newsource.sql 0.14
Time for image80 10 seconds
81
Tue Jun 23 18:28:44 CEST 2015
Time: CALL insert_tempuniquecatalog 7.49
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
180 affected rows (14.946ms)
DELETE FROM new_to_new;
180 affected rows (5.541ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
182 affected rows (41.674ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
182 affected rows (66.688ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
91 affected rows (29.537ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
182 affected rows (33.293ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
182 affected rows (8.379ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
182 affected rows (7.713ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
183 affected rows (16.574ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186021 affected rows (129.758ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.54
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 81 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(81) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (35.663ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (32.992ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
91 affected rows (24.965ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image81 10 seconds
82
Tue Jun 23 18:28:54 CEST 2015
Time: CALL insert_tempuniquecatalog 7.26
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
182 affected rows (22.985ms)
DELETE FROM new_to_new;
182 affected rows (41.397ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
196 affected rows (43.785ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
196 affected rows (70.469ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
98 affected rows (33.120ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
196 affected rows (24.892ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
196 affected rows (8.330ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
196 affected rows (7.900ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
200 affected rows (16.603ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186026 affected rows (124.889ms)
Time: mclient gwacdb -e -i onetomany.sql 1.06
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 82 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(82) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (36.187ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (24.868ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
98 affected rows (24.782ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image82 11 seconds
83
Tue Jun 23 18:29:05 CEST 2015
Time: CALL insert_tempuniquecatalog 7.26
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
196 affected rows (38.542ms)
DELETE FROM new_to_new;
196 affected rows (17.117ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
202 affected rows (41.616ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
202 affected rows (58.387ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
101 affected rows (33.116ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
202 affected rows (24.952ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
202 affected rows (8.353ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
202 affected rows (7.822ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
204 affected rows (16.532ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186123 affected rows (120.538ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.35
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 83 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(83) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (44.487ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.190ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
101 affected rows (24.708ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image83 10 seconds
84
Tue Jun 23 18:29:15 CEST 2015
Time: CALL insert_tempuniquecatalog 7.31
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
202 affected rows (28.367ms)
DELETE FROM new_to_new;
202 affected rows (3.661ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
194 affected rows (41.546ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
194 affected rows (75.136ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
97 affected rows (32.982ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
194 affected rows (33.260ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
194 affected rows (8.373ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
194 affected rows (7.792ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
195 affected rows (16.617ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186347 affected rows (154.974ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.36
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 84 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(84) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (43.573ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.048ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
97 affected rows (24.777ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image84 9 seconds
85
Tue Jun 23 18:29:24 CEST 2015
Time: CALL insert_tempuniquecatalog 8.34
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
194 affected rows (32.785ms)
DELETE FROM new_to_new;
194 affected rows (47.571ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
184 affected rows (44.531ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
184 affected rows (89.342ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
92 affected rows (33.023ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
184 affected rows (33.293ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
184 affected rows (8.347ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
184 affected rows (7.729ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
185 affected rows (16.612ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186121 affected rows (147.471ms)
Time: mclient gwacdb -e -i onetomany.sql 1.96
Time: CALL update_1_to_1_uniq() 2.12
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 85 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(85) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (36.072ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.091ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
92 affected rows (24.724ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image85 14 seconds
86
Tue Jun 23 18:29:38 CEST 2015
Time: CALL insert_tempuniquecatalog 7.40
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
184 affected rows (49.591ms)
DELETE FROM new_to_new;
184 affected rows (19.939ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
196 affected rows (41.592ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
196 affected rows (58.341ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
98 affected rows (33.322ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
196 affected rows (24.862ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
196 affected rows (8.417ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
196 affected rows (7.736ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
196 affected rows (16.527ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186250 affected rows (126.173ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.55
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 86 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(86) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (42.562ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.253ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
98 affected rows (24.616ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image86 10 seconds
87
Tue Jun 23 18:29:48 CEST 2015
Time: CALL insert_tempuniquecatalog 7.46
Time: CALL flag_n_to_m_tempunique() 0.56
DELETE FROM one_to_many;
196 affected rows (12.997ms)
DELETE FROM new_to_new;
196 affected rows (9.622ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
192 affected rows (41.582ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
192 affected rows (58.355ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
96 affected rows (33.140ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
192 affected rows (24.800ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
192 affected rows (8.486ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
192 affected rows (7.745ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
192 affected rows (32.181ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186331 affected rows (156.628ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 87 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(87) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (43.193ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (33.489ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
96 affected rows (24.222ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image87 10 seconds
88
Tue Jun 23 18:29:58 CEST 2015
Time: CALL insert_tempuniquecatalog 7.32
Time: CALL flag_n_to_m_tempunique() 1.99
DELETE FROM one_to_many;
192 affected rows (16.519ms)
DELETE FROM new_to_new;
192 affected rows (9.924ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
162 affected rows (49.930ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
162 affected rows (75.095ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
81 affected rows (33.078ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
162 affected rows (33.265ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
162 affected rows (8.305ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
162 affected rows (7.727ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
163 affected rows (16.530ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186611 affected rows (138.423ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.54
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 88 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(88) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (43.646ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.183ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
81 affected rows (24.727ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image88 11 seconds
89
Tue Jun 23 18:30:09 CEST 2015
Time: CALL insert_tempuniquecatalog 7.54
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
162 affected rows (35.474ms)
DELETE FROM new_to_new;
162 affected rows (7.539ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
188 affected rows (33.267ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
188 affected rows (58.566ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
94 affected rows (32.953ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
188 affected rows (24.936ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
188 affected rows (8.429ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
188 affected rows (7.792ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
188 affected rows (16.548ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186458 affected rows (120.232ms)
Time: mclient gwacdb -e -i onetomany.sql 0.35
Time: CALL update_1_to_1_uniq() 1.60
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 89 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(89) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (52.332ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.032ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
94 affected rows (24.825ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image89 10 seconds
90
Tue Jun 23 18:30:19 CEST 2015
Time: CALL insert_tempuniquecatalog 7.14
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
188 affected rows (36.787ms)
DELETE FROM new_to_new;
188 affected rows (7.671ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
138 affected rows (41.534ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
138 affected rows (58.343ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
69 affected rows (33.136ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
138 affected rows (33.259ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
138 affected rows (8.336ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
138 affected rows (7.831ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
139 affected rows (16.649ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186618 affected rows (126.199ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.36
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 90 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(90) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (21.680ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (18.293ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
69 affected rows (24.709ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image90 10 seconds
91
Tue Jun 23 18:30:29 CEST 2015
Time: CALL insert_tempuniquecatalog 7.43
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
138 affected rows (38.314ms)
DELETE FROM new_to_new;
138 affected rows (47.142ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
160 affected rows (54.493ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
160 affected rows (86.028ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
80 affected rows (33.012ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
160 affected rows (33.245ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
160 affected rows (8.459ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
160 affected rows (7.886ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
161 affected rows (16.407ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186685 affected rows (157.712ms)
Time: mclient gwacdb -e -i onetomany.sql 1.95
Time: CALL update_1_to_1_uniq() 1.59
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 91 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(91) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (43.314ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.221ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
80 affected rows (24.641ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image91 12 seconds
92
Tue Jun 23 18:30:41 CEST 2015
Time: CALL insert_tempuniquecatalog 8.38
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
160 affected rows (17.820ms)
DELETE FROM new_to_new;
160 affected rows (6.763ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
186 affected rows (41.563ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
186 affected rows (58.294ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
93 affected rows (33.160ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
186 affected rows (24.881ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
186 affected rows (8.330ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
186 affected rows (10.513ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
186 affected rows (16.592ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186638 affected rows (127.820ms)
Time: mclient gwacdb -e -i onetomany.sql 0.35
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 92 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(92) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (36.156ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (24.780ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
93 affected rows (24.784ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image92 11 seconds
93
Tue Jun 23 18:30:52 CEST 2015
Time: CALL insert_tempuniquecatalog 7.59
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
186 affected rows (22.708ms)
DELETE FROM new_to_new;
186 affected rows (5.456ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
204 affected rows (41.607ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
204 affected rows (58.385ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
102 affected rows (33.022ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
204 affected rows (24.937ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
204 affected rows (8.365ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
204 affected rows (7.873ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
207 affected rows (16.521ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186657 affected rows (134.959ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.55
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 93 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(93) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (43.708ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.185ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
102 affected rows (24.732ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image93 10 seconds
94
Tue Jun 23 18:31:02 CEST 2015
Time: CALL insert_tempuniquecatalog 7.55
Time: CALL flag_n_to_m_tempunique() 2.01
DELETE FROM one_to_many;
204 affected rows (43.135ms)
DELETE FROM new_to_new;
204 affected rows (4.439ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
146 affected rows (49.732ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
146 affected rows (66.626ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
73 affected rows (33.149ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
146 affected rows (24.914ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
146 affected rows (8.333ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
146 affected rows (7.786ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
146 affected rows (16.560ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186599 affected rows (135.393ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.61
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 94 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(94) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (36.028ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (24.774ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
73 affected rows (24.801ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image94 12 seconds
95
Tue Jun 23 18:31:14 CEST 2015
Time: CALL insert_tempuniquecatalog 7.68
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
146 affected rows (35.777ms)
DELETE FROM new_to_new;
146 affected rows (3.079ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
196 affected rows (41.573ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
196 affected rows (1.1s)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
98 affected rows (629.952ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
196 affected rows (46.830ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
196 affected rows (8.325ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
196 affected rows (7.905ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
198 affected rows (16.669ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186862 affected rows (133.187ms)
Time: mclient gwacdb -e -i onetomany.sql 2.12
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 95 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(95) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (43.213ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.164ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
98 affected rows (24.692ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image95 12 seconds
96
Tue Jun 23 18:31:26 CEST 2015
Time: CALL insert_tempuniquecatalog 7.72
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
196 affected rows (20.062ms)
DELETE FROM new_to_new;
196 affected rows (7.468ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
186 affected rows (58.704ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
186 affected rows (74.458ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
93 affected rows (33.036ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
186 affected rows (33.284ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
186 affected rows (8.320ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
186 affected rows (7.786ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
186 affected rows (16.532ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186884 affected rows (149.163ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 96 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(96) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (34.665ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (24.837ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
93 affected rows (24.727ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image96 10 seconds
97
Tue Jun 23 18:31:36 CEST 2015
Time: CALL insert_tempuniquecatalog 7.35
Time: CALL flag_n_to_m_tempunique() 1.87
DELETE FROM one_to_many;
186 affected rows (36.961ms)
DELETE FROM new_to_new;
186 affected rows (13.260ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
134 affected rows (41.583ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
134 affected rows (66.632ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
67 affected rows (33.127ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
134 affected rows (33.266ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
134 affected rows (8.327ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
134 affected rows (7.806ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
134 affected rows (16.631ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186972 affected rows (126.563ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 97 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(97) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (43.957ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.028ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
67 affected rows (24.703ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image97 11 seconds
98
Tue Jun 23 18:31:47 CEST 2015
Time: CALL insert_tempuniquecatalog 7.38
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
134 affected rows (30.694ms)
DELETE FROM new_to_new;
134 affected rows (10.113ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
206 affected rows (41.621ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
206 affected rows (66.647ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
103 affected rows (33.165ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
206 affected rows (24.919ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
206 affected rows (8.357ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
206 affected rows (7.871ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
207 affected rows (16.796ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
186923 affected rows (126.180ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 98 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(98) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (34.718ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (24.844ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
103 affected rows (24.867ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image98 10 seconds
99
Tue Jun 23 18:31:57 CEST 2015
Time: CALL insert_tempuniquecatalog 7.49
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
206 affected rows (37.913ms)
DELETE FROM new_to_new;
206 affected rows (8.050ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
150 affected rows (41.560ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
150 affected rows (58.258ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
75 affected rows (33.120ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
150 affected rows (33.259ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
150 affected rows (8.346ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
150 affected rows (7.861ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
150 affected rows (16.582ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187017 affected rows (123.892ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.36
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 99 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(99) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (35.782ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.169ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
75 affected rows (24.809ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image99 10 seconds
100
Tue Jun 23 18:32:07 CEST 2015
Time: CALL insert_tempuniquecatalog 7.24
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
150 affected rows (27.925ms)
DELETE FROM new_to_new;
150 affected rows (24.213ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
146 affected rows (64.575ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
146 affected rows (88.667ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
73 affected rows (41.305ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
146 affected rows (33.173ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
146 affected rows (8.363ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
146 affected rows (7.759ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
148 affected rows (16.536ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187086 affected rows (153.433ms)
Time: mclient gwacdb -e -i onetomany.sql 1.26
Time: CALL update_1_to_1_uniq() 1.51
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 100 AND tuc.targetid IS NULL ORDER BY t.id;
8 affected rows
Time: insert_new_uniq(100) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
8 affected rows (35.798ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
8 affected rows (33.097ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
73 affected rows (24.746ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image100 11 seconds
101
Tue Jun 23 18:32:18 CEST 2015
Time: CALL insert_tempuniquecatalog 7.07
Time: CALL flag_n_to_m_tempunique() 0.47
DELETE FROM one_to_many;
146 affected rows (20.665ms)
DELETE FROM new_to_new;
146 affected rows (5.785ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
166 affected rows (41.599ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
166 affected rows (74.944ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
83 affected rows (33.219ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
166 affected rows (33.255ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
166 affected rows (8.354ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
166 affected rows (7.743ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
167 affected rows (16.545ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187115 affected rows (141.757ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.32
DELETE FROM newsrc;
8 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 101 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(101) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (44.520ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.160ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
83 affected rows (24.744ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image101 9 seconds
102
Tue Jun 23 18:32:27 CEST 2015
Time: CALL insert_tempuniquecatalog 8.20
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
166 affected rows (37.173ms)
DELETE FROM new_to_new;
166 affected rows (10.852ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
170 affected rows (49.817ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
170 affected rows (67.715ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
85 affected rows (32.181ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
170 affected rows (33.161ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
170 affected rows (8.321ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
170 affected rows (7.897ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
171 affected rows (16.627ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187080 affected rows (137.562ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.39
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 102 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(102) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (44.147ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.235ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
85 affected rows (24.724ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image102 11 seconds
103
Tue Jun 23 18:32:38 CEST 2015
Time: CALL insert_tempuniquecatalog 7.39
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
170 affected rows (35.110ms)
DELETE FROM new_to_new;
170 affected rows (65.885ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
186 affected rows (52.789ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
186 affected rows (84.594ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
93 affected rows (32.994ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
186 affected rows (33.320ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
186 affected rows (8.353ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
186 affected rows (7.711ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
189 affected rows (16.668ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187106 affected rows (161.577ms)
Time: mclient gwacdb -e -i onetomany.sql 2.22
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 103 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(103) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (42.710ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.080ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
93 affected rows (24.704ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image103 12 seconds
104
Tue Jun 23 18:32:50 CEST 2015
Time: CALL insert_tempuniquecatalog 7.74
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
186 affected rows (18.681ms)
DELETE FROM new_to_new;
186 affected rows (9.031ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
168 affected rows (33.269ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
168 affected rows (58.278ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
84 affected rows (33.220ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
168 affected rows (24.885ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
168 affected rows (8.342ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
168 affected rows (7.832ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
171 affected rows (16.513ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187112 affected rows (136.735ms)
Time: mclient gwacdb -e -i onetomany.sql 0.35
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 104 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(104) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (35.747ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (24.743ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
84 affected rows (24.777ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image104 10 seconds
105
Tue Jun 23 18:33:00 CEST 2015
Time: CALL insert_tempuniquecatalog 7.29
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
168 affected rows (18.595ms)
DELETE FROM new_to_new;
168 affected rows (3.595ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
170 affected rows (41.470ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
170 affected rows (58.843ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
85 affected rows (33.275ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
170 affected rows (33.291ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
170 affected rows (8.271ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
170 affected rows (7.912ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
171 affected rows (16.608ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187277 affected rows (127.791ms)
Time: mclient gwacdb -e -i onetomany.sql 0.35
Time: CALL update_1_to_1_uniq() 1.95
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 105 AND tuc.targetid IS NULL ORDER BY t.id;
10 affected rows
Time: insert_new_uniq(105) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
10 affected rows (34.407ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
10 affected rows (24.841ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
85 affected rows (24.777ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image105 11 seconds
106
Tue Jun 23 18:33:11 CEST 2015
Time: CALL insert_tempuniquecatalog 7.58
Time: CALL flag_n_to_m_tempunique() 2.13
DELETE FROM one_to_many;
170 affected rows (44.552ms)
DELETE FROM new_to_new;
170 affected rows (13.320ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
182 affected rows (41.596ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
182 affected rows (66.677ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
91 affected rows (33.142ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
182 affected rows (33.260ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
182 affected rows (8.341ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
182 affected rows (7.815ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
185 affected rows (16.601ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187387 affected rows (134.583ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
10 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 106 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(106) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (52.662ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (32.921ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
91 affected rows (24.831ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image106 11 seconds
107
Tue Jun 23 18:33:22 CEST 2015
Time: CALL insert_tempuniquecatalog 7.23
Time: CALL flag_n_to_m_tempunique() 0.52
DELETE FROM one_to_many;
182 affected rows (21.527ms)
DELETE FROM new_to_new;
182 affected rows (8.171ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
170 affected rows (50.034ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
170 affected rows (75.002ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
85 affected rows (33.036ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
170 affected rows (33.178ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
170 affected rows (8.401ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
170 affected rows (7.815ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
171 affected rows (16.461ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187377 affected rows (163.160ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.29
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 107 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(107) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (43.798ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (32.838ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
85 affected rows (24.805ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image107 10 seconds
108
Tue Jun 23 18:33:32 CEST 2015
Time: CALL insert_tempuniquecatalog 7.58
Time: CALL flag_n_to_m_tempunique() 0.57
DELETE FROM one_to_many;
170 affected rows (46.160ms)
DELETE FROM new_to_new;
170 affected rows (15.762ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
160 affected rows (41.545ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
160 affected rows (66.703ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
80 affected rows (33.183ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
160 affected rows (24.879ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
160 affected rows (8.383ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
160 affected rows (9.302ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
160 affected rows (16.566ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187539 affected rows (114.736ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.33
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 108 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(108) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (36.624ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (24.817ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
80 affected rows (24.711ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image108 10 seconds
109
Tue Jun 23 18:33:42 CEST 2015
Time: CALL insert_tempuniquecatalog 7.54
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
160 affected rows (29.752ms)
DELETE FROM new_to_new;
160 affected rows (40.796ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
152 affected rows (72.290ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
152 affected rows (91.802ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
76 affected rows (33.057ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
152 affected rows (33.261ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
152 affected rows (8.352ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
152 affected rows (7.824ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
152 affected rows (16.590ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187585 affected rows (142.964ms)
Time: mclient gwacdb -e -i onetomany.sql 2.14
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 109 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(109) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (35.100ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.119ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
76 affected rows (33.210ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image109 12 seconds
110
Tue Jun 23 18:33:54 CEST 2015
Time: CALL insert_tempuniquecatalog 7.53
Time: CALL flag_n_to_m_tempunique() 0.52
DELETE FROM one_to_many;
152 affected rows (34.203ms)
DELETE FROM new_to_new;
152 affected rows (5.660ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
182 affected rows (58.105ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
182 affected rows (75.002ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
91 affected rows (32.981ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
182 affected rows (33.270ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
182 affected rows (8.393ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
182 affected rows (7.699ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
182 affected rows (16.676ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187570 affected rows (148.740ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.61
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 110 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(110) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (35.257ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (33.123ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
91 affected rows (24.838ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image110 10 seconds
111
Tue Jun 23 18:34:04 CEST 2015
Time: CALL insert_tempuniquecatalog 7.42
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
182 affected rows (35.381ms)
DELETE FROM new_to_new;
182 affected rows (4.807ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
178 affected rows (49.800ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
178 affected rows (66.581ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
89 affected rows (33.167ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
178 affected rows (24.911ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
178 affected rows (8.344ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
178 affected rows (7.846ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
178 affected rows (16.695ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187578 affected rows (135.588ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 111 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(111) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (60.133ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (41.288ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
89 affected rows (24.722ms)
Time: mclient gwacdb -e -i newsource.sql 0.13
Time for image111 10 seconds
112
Tue Jun 23 18:34:14 CEST 2015
Time: CALL insert_tempuniquecatalog 7.54
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
178 affected rows (22.498ms)
DELETE FROM new_to_new;
178 affected rows (58.075ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
150 affected rows (46.789ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
150 affected rows (91.638ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
75 affected rows (33.052ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
150 affected rows (33.261ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
150 affected rows (8.287ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
150 affected rows (7.862ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
152 affected rows (16.479ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187681 affected rows (154.160ms)
Time: mclient gwacdb -e -i onetomany.sql 1.81
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 112 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(112) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.063ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (32.987ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
75 affected rows (24.821ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image112 12 seconds
113
Tue Jun 23 18:34:26 CEST 2015
Time: CALL insert_tempuniquecatalog 7.46
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
150 affected rows (18.627ms)
DELETE FROM new_to_new;
150 affected rows (10.286ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
160 affected rows (58.130ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
160 affected rows (66.622ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
80 affected rows (33.133ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
160 affected rows (33.237ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
160 affected rows (8.424ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
160 affected rows (7.788ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
160 affected rows (16.558ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187736 affected rows (135.232ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 113 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(113) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (36.124ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.806ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
80 affected rows (24.733ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image113 10 seconds
114
Tue Jun 23 18:34:36 CEST 2015
Time: CALL insert_tempuniquecatalog 7.59
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
160 affected rows (38.813ms)
DELETE FROM new_to_new;
160 affected rows (14.941ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
134 affected rows (41.600ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
134 affected rows (66.654ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
67 affected rows (33.165ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
134 affected rows (33.211ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
134 affected rows (8.322ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
134 affected rows (7.910ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
134 affected rows (16.577ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188011 affected rows (117.420ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.32
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 114 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(114) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (36.328ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (24.746ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
67 affected rows (24.885ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image114 10 seconds
115
Tue Jun 23 18:34:46 CEST 2015
Time: CALL insert_tempuniquecatalog 9.57
Time: CALL flag_n_to_m_tempunique() 2.07
DELETE FROM one_to_many;
134 affected rows (33.237ms)
DELETE FROM new_to_new;
134 affected rows (8.749ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
164 affected rows (49.818ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
164 affected rows (75.047ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
82 affected rows (33.102ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
164 affected rows (33.261ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
164 affected rows (8.348ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
164 affected rows (7.813ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
166 affected rows (16.549ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188046 affected rows (141.777ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 115 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(115) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (35.425ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (25.089ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
82 affected rows (24.410ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image115 14 seconds
116
Tue Jun 23 18:35:00 CEST 2015
Time: CALL insert_tempuniquecatalog 7.61
Time: CALL flag_n_to_m_tempunique() 0.47
DELETE FROM one_to_many;
164 affected rows (20.083ms)
DELETE FROM new_to_new;
164 affected rows (10.605ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
164 affected rows (33.948ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
164 affected rows (58.205ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
82 affected rows (33.215ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
164 affected rows (33.272ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
164 affected rows (8.280ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
164 affected rows (7.890ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
165 affected rows (16.527ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
187696 affected rows (109.078ms)
Time: mclient gwacdb -e -i onetomany.sql 0.33
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 116 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(116) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (43.696ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.065ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
82 affected rows (24.753ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image116 10 seconds
117
Tue Jun 23 18:35:10 CEST 2015
Time: CALL insert_tempuniquecatalog 7.69
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
164 affected rows (36.817ms)
DELETE FROM new_to_new;
164 affected rows (12.889ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
186 affected rows (33.241ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
186 affected rows (58.888ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
93 affected rows (33.160ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
186 affected rows (24.962ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
186 affected rows (8.370ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
186 affected rows (7.769ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
186 affected rows (16.594ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188037 affected rows (126.918ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.33
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 117 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(117) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (36.240ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.175ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
93 affected rows (24.859ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image117 10 seconds
118
Tue Jun 23 18:35:20 CEST 2015
Time: CALL insert_tempuniquecatalog 7.54
Time: CALL flag_n_to_m_tempunique() 1.92
DELETE FROM one_to_many;
186 affected rows (32.223ms)
DELETE FROM new_to_new;
186 affected rows (9.044ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
122 affected rows (49.904ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
122 affected rows (75.016ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
61 affected rows (33.057ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
122 affected rows (33.255ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
122 affected rows (8.371ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
122 affected rows (7.753ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
122 affected rows (16.616ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188159 affected rows (166.838ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.51
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 118 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(118) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.326ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.214ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
61 affected rows (24.736ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image118 12 seconds
119
Tue Jun 23 18:35:32 CEST 2015
Time: CALL insert_tempuniquecatalog 7.35
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
122 affected rows (36.101ms)
DELETE FROM new_to_new;
122 affected rows (17.935ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
148 affected rows (41.617ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
148 affected rows (74.867ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
74 affected rows (33.236ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
148 affected rows (33.181ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
148 affected rows (8.414ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
148 affected rows (7.813ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
149 affected rows (16.567ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188174 affected rows (145.472ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.34
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 119 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(119) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (43.681ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.289ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
74 affected rows (24.856ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image119 10 seconds
120
Tue Jun 23 18:35:42 CEST 2015
Time: CALL insert_tempuniquecatalog 7.68
Time: CALL flag_n_to_m_tempunique() 0.56
DELETE FROM one_to_many;
148 affected rows (38.766ms)
DELETE FROM new_to_new;
148 affected rows (5.826ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
140 affected rows (41.592ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
140 affected rows (58.256ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
70 affected rows (33.189ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
140 affected rows (33.239ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
140 affected rows (8.280ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
140 affected rows (7.893ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
141 affected rows (16.569ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188076 affected rows (126.255ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.33
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 120 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(120) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (44.279ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.027ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
70 affected rows (24.789ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image120 10 seconds
121
Tue Jun 23 18:35:52 CEST 2015
Time: CALL insert_tempuniquecatalog 9.95
Time: CALL flag_n_to_m_tempunique() 2.04
DELETE FROM one_to_many;
140 affected rows (41.336ms)
DELETE FROM new_to_new;
140 affected rows (16.959ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
138 affected rows (41.536ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
138 affected rows (66.828ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
69 affected rows (33.128ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
138 affected rows (33.168ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
138 affected rows (8.399ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
138 affected rows (7.900ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
138 affected rows (16.547ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188291 affected rows (139.771ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 121 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(121) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (43.639ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.073ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
69 affected rows (24.691ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image121 14 seconds
122
Tue Jun 23 18:36:06 CEST 2015
Time: CALL insert_tempuniquecatalog 7.72
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
138 affected rows (17.406ms)
DELETE FROM new_to_new;
138 affected rows (6.755ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
146 affected rows (41.524ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
146 affected rows (66.692ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
73 affected rows (33.167ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
146 affected rows (33.298ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
146 affected rows (8.363ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
146 affected rows (7.956ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
147 affected rows (16.580ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188253 affected rows (131.609ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 122 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(122) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.545ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (32.954ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
73 affected rows (24.785ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image122 10 seconds
123
Tue Jun 23 18:36:16 CEST 2015
Time: CALL insert_tempuniquecatalog 7.31
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
146 affected rows (38.030ms)
DELETE FROM new_to_new;
146 affected rows (4.507ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
144 affected rows (49.902ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
144 affected rows (75.088ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
72 affected rows (33.102ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
144 affected rows (33.288ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
144 affected rows (8.349ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
144 affected rows (7.795ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
146 affected rows (16.511ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188173 affected rows (137.108ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 123 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(123) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (43.762ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.054ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
72 affected rows (33.100ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image123 10 seconds
124
Tue Jun 23 18:36:26 CEST 2015
Time: CALL insert_tempuniquecatalog 7.54
Time: CALL flag_n_to_m_tempunique() 2.07
DELETE FROM one_to_many;
144 affected rows (42.349ms)
DELETE FROM new_to_new;
144 affected rows (8.983ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
146 affected rows (49.767ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
146 affected rows (58.469ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
73 affected rows (33.171ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
146 affected rows (24.782ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
146 affected rows (8.384ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
146 affected rows (7.896ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
147 affected rows (16.441ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188236 affected rows (131.629ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.52
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 124 AND tuc.targetid IS NULL ORDER BY t.id;
7 affected rows
Time: insert_new_uniq(124) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
7 affected rows (36.015ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
7 affected rows (24.686ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
73 affected rows (24.895ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image124 12 seconds
125
Tue Jun 23 18:36:38 CEST 2015
Time: CALL insert_tempuniquecatalog 7.61
Time: CALL flag_n_to_m_tempunique() 0.53
DELETE FROM one_to_many;
146 affected rows (45.227ms)
DELETE FROM new_to_new;
146 affected rows (7.701ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
122 affected rows (41.619ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
122 affected rows (66.627ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
61 affected rows (33.122ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
122 affected rows (33.358ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
122 affected rows (8.289ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
122 affected rows (7.806ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
126 affected rows (16.682ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188394 affected rows (129.190ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
7 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 125 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(125) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (52.149ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.111ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
61 affected rows (24.831ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image125 10 seconds
126
Tue Jun 23 18:36:48 CEST 2015
Time: CALL insert_tempuniquecatalog 7.44
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
122 affected rows (21.374ms)
DELETE FROM new_to_new;
122 affected rows (236.155ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
134 affected rows (58.780ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
134 affected rows (75.102ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
67 affected rows (33.072ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
134 affected rows (33.216ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
134 affected rows (8.338ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
134 affected rows (7.806ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
136 affected rows (16.559ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188368 affected rows (155.581ms)
Time: mclient gwacdb -e -i onetomany.sql 0.65
Time: CALL update_1_to_1_uniq() 1.32
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 126 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(126) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (34.595ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (34.265ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
67 affected rows (23.476ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image126 10 seconds
127
Tue Jun 23 18:36:58 CEST 2015
Time: CALL insert_tempuniquecatalog 8.74
Time: CALL flag_n_to_m_tempunique() 1.94
DELETE FROM one_to_many;
134 affected rows (49.054ms)
DELETE FROM new_to_new;
134 affected rows (5.322ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
150 affected rows (49.909ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
150 affected rows (75.049ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
75 affected rows (33.075ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
150 affected rows (33.264ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
150 affected rows (8.341ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
150 affected rows (7.827ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
151 affected rows (16.572ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188207 affected rows (152.890ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.52
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 127 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(127) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (52.080ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (32.994ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
75 affected rows (24.942ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image127 13 seconds
128
Tue Jun 23 18:37:11 CEST 2015
Time: CALL insert_tempuniquecatalog 7.69
Time: CALL flag_n_to_m_tempunique() 0.56
DELETE FROM one_to_many;
150 affected rows (46.098ms)
DELETE FROM new_to_new;
150 affected rows (12.086ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
142 affected rows (41.551ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
142 affected rows (58.266ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
71 affected rows (33.241ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
142 affected rows (25.015ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
142 affected rows (8.348ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
142 affected rows (7.762ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
142 affected rows (16.525ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188442 affected rows (134.377ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 128 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(128) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (35.191ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.738ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
71 affected rows (24.867ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image128 11 seconds
129
Tue Jun 23 18:37:22 CEST 2015
Time: CALL insert_tempuniquecatalog 7.47
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
142 affected rows (28.854ms)
DELETE FROM new_to_new;
142 affected rows (10.498ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
154 affected rows (49.828ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
154 affected rows (74.937ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
77 affected rows (41.435ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
154 affected rows (33.225ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
154 affected rows (8.677ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
154 affected rows (7.502ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
155 affected rows (16.548ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188702 affected rows (147.415ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 129 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(129) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (35.894ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (32.994ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
77 affected rows (25.035ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image129 10 seconds
130
Tue Jun 23 18:37:32 CEST 2015
Time: CALL insert_tempuniquecatalog 7.98
Time: CALL flag_n_to_m_tempunique() 1.47
DELETE FROM one_to_many;
154 affected rows (41.241ms)
DELETE FROM new_to_new;
154 affected rows (4.530ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
162 affected rows (58.135ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
162 affected rows (75.019ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
81 affected rows (41.305ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
162 affected rows (33.231ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
162 affected rows (8.394ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
162 affected rows (7.669ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
163 affected rows (16.468ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188592 affected rows (153.867ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 130 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(130) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (34.664ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (24.773ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
81 affected rows (24.885ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image130 12 seconds
131
Tue Jun 23 18:37:44 CEST 2015
Time: CALL insert_tempuniquecatalog 7.53
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
162 affected rows (34.105ms)
DELETE FROM new_to_new;
162 affected rows (4.215ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
140 affected rows (49.765ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
140 affected rows (66.667ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
70 affected rows (33.199ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
140 affected rows (24.879ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
140 affected rows (8.373ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
140 affected rows (7.784ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
142 affected rows (16.576ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188694 affected rows (141.928ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.55
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 131 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(131) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (35.429ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (24.705ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
70 affected rows (24.884ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image131 10 seconds
132
Tue Jun 23 18:37:54 CEST 2015
Time: CALL insert_tempuniquecatalog 7.21
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
140 affected rows (53.195ms)
DELETE FROM new_to_new;
140 affected rows (3.514ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
124 affected rows (49.799ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
124 affected rows (75.057ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
62 affected rows (33.097ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
124 affected rows (33.341ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
124 affected rows (8.335ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
124 affected rows (7.786ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
124 affected rows (16.616ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188695 affected rows (150.780ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.35
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 132 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(132) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.779ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.050ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
62 affected rows (24.798ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image132 9 seconds
133
Tue Jun 23 18:38:03 CEST 2015
Time: CALL insert_tempuniquecatalog 8.25
Time: CALL flag_n_to_m_tempunique() 2.58
DELETE FROM one_to_many;
124 affected rows (43.272ms)
DELETE FROM new_to_new;
124 affected rows (17.653ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
122 affected rows (41.519ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
122 affected rows (66.697ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
61 affected rows (33.247ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
122 affected rows (24.920ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
122 affected rows (8.338ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
122 affected rows (10.458ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
122 affected rows (13.894ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188689 affected rows (137.456ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 133 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(133) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (36.342ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.073ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
61 affected rows (24.855ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image133 13 seconds
134
Tue Jun 23 18:38:16 CEST 2015
Time: CALL insert_tempuniquecatalog 7.59
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
122 affected rows (36.608ms)
DELETE FROM new_to_new;
122 affected rows (3.887ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
142 affected rows (49.764ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
142 affected rows (75.115ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
71 affected rows (33.019ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
142 affected rows (33.286ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
142 affected rows (8.328ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
142 affected rows (7.764ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
143 affected rows (16.599ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188695 affected rows (139.445ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 134 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(134) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (35.625ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.151ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
71 affected rows (24.862ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image134 11 seconds
135
Tue Jun 23 18:38:27 CEST 2015
Time: CALL insert_tempuniquecatalog 7.56
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
142 affected rows (31.012ms)
DELETE FROM new_to_new;
142 affected rows (14.351ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
174 affected rows (41.562ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
174 affected rows (66.631ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
87 affected rows (33.280ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
174 affected rows (24.887ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
174 affected rows (8.333ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
174 affected rows (7.762ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
175 affected rows (16.528ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188811 affected rows (117.459ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.37
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 135 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(135) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (43.834ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.149ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
87 affected rows (24.744ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image135 10 seconds
136
Tue Jun 23 18:38:37 CEST 2015
Time: CALL insert_tempuniquecatalog 7.82
Time: CALL flag_n_to_m_tempunique() 2.19
DELETE FROM one_to_many;
174 affected rows (41.227ms)
DELETE FROM new_to_new;
174 affected rows (18.627ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
132 affected rows (49.832ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
132 affected rows (74.875ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
66 affected rows (33.022ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
132 affected rows (41.533ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
132 affected rows (8.393ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
132 affected rows (7.775ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
132 affected rows (16.467ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188891 affected rows (166.095ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 136 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(136) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.792ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.074ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
66 affected rows (24.743ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image136 12 seconds
137
Tue Jun 23 18:38:49 CEST 2015
Time: CALL insert_tempuniquecatalog 7.43
Time: CALL flag_n_to_m_tempunique() 0.52
DELETE FROM one_to_many;
132 affected rows (19.238ms)
DELETE FROM new_to_new;
132 affected rows (9.083ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
112 affected rows (49.796ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
112 affected rows (66.565ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
56 affected rows (33.294ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
112 affected rows (33.279ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
112 affected rows (8.192ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
112 affected rows (7.852ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
112 affected rows (16.547ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188813 affected rows (117.241ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 137 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(137) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (36.988ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.750ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
56 affected rows (24.852ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image137 10 seconds
138
Tue Jun 23 18:38:59 CEST 2015
Time: CALL insert_tempuniquecatalog 7.31
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
112 affected rows (43.242ms)
DELETE FROM new_to_new;
112 affected rows (6.469ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
126 affected rows (41.636ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
126 affected rows (66.726ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
63 affected rows (33.040ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
126 affected rows (33.284ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
126 affected rows (8.345ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
126 affected rows (7.854ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
126 affected rows (16.536ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
188808 affected rows (133.906ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 138 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(138) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (36.208ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.798ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
63 affected rows (33.220ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image138 10 seconds
139
Tue Jun 23 18:39:09 CEST 2015
Time: CALL insert_tempuniquecatalog 8.23
Time: CALL flag_n_to_m_tempunique() 2.79
DELETE FROM one_to_many;
126 affected rows (24.642ms)
DELETE FROM new_to_new;
126 affected rows (8.892ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
110 affected rows (49.896ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
110 affected rows (74.910ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
55 affected rows (33.007ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
110 affected rows (33.288ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
110 affected rows (8.303ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
110 affected rows (8.874ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
111 affected rows (15.568ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189092 affected rows (175.570ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 139 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(139) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.961ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (22.728ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
55 affected rows (35.598ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image139 13 seconds
140
Tue Jun 23 18:39:22 CEST 2015
Time: CALL insert_tempuniquecatalog 7.49
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
110 affected rows (21.128ms)
DELETE FROM new_to_new;
110 affected rows (7.668ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
126 affected rows (58.091ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
126 affected rows (74.978ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
63 affected rows (33.044ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
126 affected rows (33.266ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
126 affected rows (8.549ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
126 affected rows (7.637ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
128 affected rows (33.208ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189154 affected rows (147.105ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 140 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(140) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (35.387ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.140ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
63 affected rows (24.851ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image140 10 seconds
141
Tue Jun 23 18:39:32 CEST 2015
Time: CALL insert_tempuniquecatalog 7.39
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
126 affected rows (29.854ms)
DELETE FROM new_to_new;
126 affected rows (11.485ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
154 affected rows (49.964ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
154 affected rows (74.871ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
77 affected rows (33.130ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
154 affected rows (33.221ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
154 affected rows (8.346ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
154 affected rows (7.905ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
155 affected rows (16.629ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189146 affected rows (120.244ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 141 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(141) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.958ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.212ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
77 affected rows (24.706ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image141 10 seconds
142
Tue Jun 23 18:39:42 CEST 2015
Time: CALL insert_tempuniquecatalog 8.02
Time: CALL flag_n_to_m_tempunique() 1.92
DELETE FROM one_to_many;
154 affected rows (18.243ms)
DELETE FROM new_to_new;
154 affected rows (9.312ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
124 affected rows (41.565ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
124 affected rows (58.352ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
62 affected rows (33.175ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
124 affected rows (24.892ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
124 affected rows (8.206ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
124 affected rows (7.887ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
126 affected rows (16.546ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189186 affected rows (147.411ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 142 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(142) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (42.963ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.027ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
62 affected rows (24.857ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image142 12 seconds
143
Tue Jun 23 18:39:54 CEST 2015
Time: CALL insert_tempuniquecatalog 7.44
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
124 affected rows (45.304ms)
DELETE FROM new_to_new;
124 affected rows (17.817ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
168 affected rows (41.566ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
168 affected rows (75.081ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
84 affected rows (33.106ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
168 affected rows (33.247ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
168 affected rows (8.348ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
168 affected rows (7.804ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
169 affected rows (16.506ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189182 affected rows (154.926ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 143 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(143) 0.09
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (63.371ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (32.832ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
84 affected rows (24.731ms)
Time: mclient gwacdb -e -i newsource.sql 0.12
Time for image143 10 seconds
144
Tue Jun 23 18:40:04 CEST 2015
Time: CALL insert_tempuniquecatalog 7.60
Time: CALL flag_n_to_m_tempunique() 0.52
DELETE FROM one_to_many;
168 affected rows (37.824ms)
DELETE FROM new_to_new;
168 affected rows (4.981ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
152 affected rows (41.752ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
152 affected rows (74.890ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
76 affected rows (33.129ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
152 affected rows (33.272ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
152 affected rows (8.423ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
152 affected rows (7.764ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
153 affected rows (16.473ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189093 affected rows (153.123ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 144 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(144) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (43.225ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (41.319ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
76 affected rows (24.763ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image144 10 seconds
145
Tue Jun 23 18:40:14 CEST 2015
Time: CALL insert_tempuniquecatalog 8.48
Time: CALL flag_n_to_m_tempunique() 3.28
DELETE FROM one_to_many;
152 affected rows (37.361ms)
DELETE FROM new_to_new;
152 affected rows (13.173ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
104 affected rows (49.945ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
104 affected rows (74.982ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
52 affected rows (41.963ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
104 affected rows (33.294ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
104 affected rows (8.340ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
104 affected rows (8.354ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
104 affected rows (15.954ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189169 affected rows (144.024ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 145 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(145) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (43.289ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (32.970ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
52 affected rows (24.945ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image145 14 seconds
146
Tue Jun 23 18:40:28 CEST 2015
Time: CALL insert_tempuniquecatalog 7.82
Time: CALL flag_n_to_m_tempunique() 0.59
DELETE FROM one_to_many;
104 affected rows (35.442ms)
DELETE FROM new_to_new;
104 affected rows (17.758ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
114 affected rows (41.652ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
114 affected rows (66.580ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
57 affected rows (33.194ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
114 affected rows (33.174ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
114 affected rows (8.379ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
114 affected rows (7.924ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
115 affected rows (16.483ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189376 affected rows (128.032ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.36
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 146 AND tuc.targetid IS NULL ORDER BY t.id;
8 affected rows
Time: insert_new_uniq(146) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
8 affected rows (44.290ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
8 affected rows (33.058ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
57 affected rows (24.838ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image146 11 seconds
147
Tue Jun 23 18:40:39 CEST 2015
Time: CALL insert_tempuniquecatalog 7.14
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
114 affected rows (19.920ms)
DELETE FROM new_to_new;
114 affected rows (3.970ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
160 affected rows (49.911ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
160 affected rows (66.634ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
80 affected rows (33.157ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
160 affected rows (33.290ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
160 affected rows (8.323ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
160 affected rows (8.062ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
161 affected rows (16.362ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189371 affected rows (135.775ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.37
DELETE FROM newsrc;
8 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 147 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(147) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (35.959ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.020ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
80 affected rows (24.828ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image147 9 seconds
148
Tue Jun 23 18:40:48 CEST 2015
Time: CALL insert_tempuniquecatalog 7.64
Time: CALL flag_n_to_m_tempunique() 1.86
DELETE FROM one_to_many;
160 affected rows (40.791ms)
DELETE FROM new_to_new;
160 affected rows (6.700ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
128 affected rows (49.797ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
128 affected rows (75.091ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
64 affected rows (41.291ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
128 affected rows (33.257ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
128 affected rows (8.294ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
128 affected rows (7.742ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
131 affected rows (16.531ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189327 affected rows (158.964ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.89
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 148 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(148) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.182ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.153ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
64 affected rows (24.675ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image148 12 seconds
149
Tue Jun 23 18:41:00 CEST 2015
Time: CALL insert_tempuniquecatalog 7.88
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
128 affected rows (70.657ms)
DELETE FROM new_to_new;
128 affected rows (16.719ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
126 affected rows (41.645ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
126 affected rows (66.650ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
63 affected rows (33.101ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
126 affected rows (33.277ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
126 affected rows (8.333ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
126 affected rows (7.984ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
126 affected rows (16.484ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189495 affected rows (307.700ms)
Time: mclient gwacdb -e -i onetomany.sql 0.61
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 149 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(149) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (35.598ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (24.793ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
63 affected rows (24.835ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image149 11 seconds
150
Tue Jun 23 18:41:11 CEST 2015
Time: CALL insert_tempuniquecatalog 7.43
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
126 affected rows (43.476ms)
DELETE FROM new_to_new;
126 affected rows (7.504ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
136 affected rows (49.874ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
136 affected rows (66.529ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
68 affected rows (33.133ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
136 affected rows (24.919ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
136 affected rows (8.368ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
136 affected rows (7.907ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
137 affected rows (16.614ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189495 affected rows (126.037ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 150 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(150) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (36.431ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (24.793ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
68 affected rows (24.873ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image150 10 seconds
151
Tue Jun 23 18:41:21 CEST 2015
Time: CALL insert_tempuniquecatalog 7.51
Time: CALL flag_n_to_m_tempunique() 2.00
DELETE FROM one_to_many;
136 affected rows (65.026ms)
DELETE FROM new_to_new;
136 affected rows (16.904ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
144 affected rows (49.908ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
144 affected rows (75.038ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
72 affected rows (33.058ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
144 affected rows (33.273ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
144 affected rows (8.327ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
144 affected rows (7.865ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
145 affected rows (16.460ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189443 affected rows (149.355ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 151 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(151) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (44.208ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (32.943ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
72 affected rows (25.017ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image151 12 seconds
152
Tue Jun 23 18:41:33 CEST 2015
Time: CALL insert_tempuniquecatalog 8.14
Time: CALL flag_n_to_m_tempunique() 0.55
DELETE FROM one_to_many;
144 affected rows (37.146ms)
DELETE FROM new_to_new;
144 affected rows (15.200ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
120 affected rows (41.549ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
120 affected rows (58.432ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
60 affected rows (33.249ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
120 affected rows (24.912ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
120 affected rows (8.298ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
120 affected rows (7.784ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
120 affected rows (16.502ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189781 affected rows (122.776ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 152 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(152) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (36.066ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (24.780ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
60 affected rows (24.856ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image152 10 seconds
153
Tue Jun 23 18:41:43 CEST 2015
Time: CALL insert_tempuniquecatalog 7.69
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
120 affected rows (44.826ms)
DELETE FROM new_to_new;
120 affected rows (4.007ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
164 affected rows (49.693ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
164 affected rows (75.009ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
82 affected rows (33.085ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
164 affected rows (33.270ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
164 affected rows (8.997ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
164 affected rows (7.217ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
167 affected rows (16.563ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189647 affected rows (155.865ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 153 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(153) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (35.820ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (24.821ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
82 affected rows (24.961ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image153 11 seconds
154
Tue Jun 23 18:41:54 CEST 2015
Time: CALL insert_tempuniquecatalog 7.44
Time: CALL flag_n_to_m_tempunique() 2.13
DELETE FROM one_to_many;
164 affected rows (32.289ms)
DELETE FROM new_to_new;
164 affected rows (6.363ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
134 affected rows (49.946ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
134 affected rows (66.642ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
67 affected rows (33.125ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
134 affected rows (33.273ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
134 affected rows (8.333ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
134 affected rows (8.345ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
135 affected rows (16.104ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189912 affected rows (176.691ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 154 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(154) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.676ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (23.578ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
67 affected rows (39.106ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image154 11 seconds
155
Tue Jun 23 18:42:05 CEST 2015
Time: CALL insert_tempuniquecatalog 8.10
Time: CALL flag_n_to_m_tempunique() 0.53
DELETE FROM one_to_many;
134 affected rows (43.742ms)
DELETE FROM new_to_new;
134 affected rows (21.328ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
154 affected rows (49.829ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
154 affected rows (66.669ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
77 affected rows (33.158ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
154 affected rows (33.271ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
154 affected rows (8.277ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
154 affected rows (7.927ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
154 affected rows (16.562ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189706 affected rows (132.338ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.58
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 155 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(155) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (36.114ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (24.725ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
77 affected rows (24.839ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image155 11 seconds
156
Tue Jun 23 18:42:16 CEST 2015
Time: CALL insert_tempuniquecatalog 7.20
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
154 affected rows (29.910ms)
DELETE FROM new_to_new;
154 affected rows (6.094ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
126 affected rows (41.486ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
126 affected rows (67.652ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
63 affected rows (40.565ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
126 affected rows (33.234ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
126 affected rows (8.900ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
126 affected rows (7.227ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
128 affected rows (16.564ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189828 affected rows (134.409ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 156 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(156) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (35.292ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.767ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
63 affected rows (24.874ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image156 10 seconds
157
Tue Jun 23 18:42:26 CEST 2015
Time: CALL insert_tempuniquecatalog 7.57
Time: CALL flag_n_to_m_tempunique() 2.13
DELETE FROM one_to_many;
126 affected rows (41.232ms)
DELETE FROM new_to_new;
126 affected rows (17.528ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
118 affected rows (49.794ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
118 affected rows (75.140ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
59 affected rows (41.356ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
118 affected rows (33.226ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
118 affected rows (8.340ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
118 affected rows (7.978ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
118 affected rows (16.476ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189718 affected rows (130.732ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 157 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(157) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (44.458ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (32.955ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
59 affected rows (24.867ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image157 12 seconds
158
Tue Jun 23 18:42:38 CEST 2015
Time: CALL insert_tempuniquecatalog 9.43
Time: CALL flag_n_to_m_tempunique() 0.53
DELETE FROM one_to_many;
118 affected rows (43.573ms)
DELETE FROM new_to_new;
118 affected rows (7.859ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
114 affected rows (41.650ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
114 affected rows (58.257ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
57 affected rows (33.218ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
114 affected rows (33.218ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
114 affected rows (8.332ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
114 affected rows (7.905ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
116 affected rows (16.507ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189554 affected rows (130.560ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.33
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 158 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(158) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.126ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.053ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
57 affected rows (24.850ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image158 12 seconds
159
Tue Jun 23 18:42:50 CEST 2015
Time: CALL insert_tempuniquecatalog 7.83
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
114 affected rows (41.281ms)
DELETE FROM new_to_new;
114 affected rows (5.740ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
118 affected rows (41.524ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
118 affected rows (66.646ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
59 affected rows (33.152ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
118 affected rows (24.864ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
118 affected rows (8.384ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
118 affected rows (7.858ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
118 affected rows (16.597ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189780 affected rows (134.983ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 159 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(159) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.404ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (176.003ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
59 affected rows (40.084ms)
Time: mclient gwacdb -e -i newsource.sql 0.26
Time for image159 11 seconds
160
Tue Jun 23 18:43:01 CEST 2015
Time: CALL insert_tempuniquecatalog 7.81
Time: CALL flag_n_to_m_tempunique() 1.40
DELETE FROM one_to_many;
118 affected rows (42.208ms)
DELETE FROM new_to_new;
118 affected rows (10.339ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
130 affected rows (49.750ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
130 affected rows (66.706ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
65 affected rows (33.161ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
130 affected rows (33.252ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
130 affected rows (8.344ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
130 affected rows (7.839ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
130 affected rows (16.596ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189997 affected rows (145.616ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.54
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 160 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(160) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (43.095ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.064ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
65 affected rows (24.797ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image160 11 seconds
161
Tue Jun 23 18:43:12 CEST 2015
Time: CALL insert_tempuniquecatalog 7.85
Time: CALL flag_n_to_m_tempunique() 1.92
DELETE FROM one_to_many;
130 affected rows (46.073ms)
DELETE FROM new_to_new;
130 affected rows (21.080ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
92 affected rows (49.827ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
92 affected rows (74.872ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
46 affected rows (41.547ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
92 affected rows (33.242ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
92 affected rows (8.328ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
92 affected rows (7.863ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
94 affected rows (16.506ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189895 affected rows (154.701ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.52
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 161 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(161) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (43.821ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.181ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
46 affected rows (24.823ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image161 12 seconds
162
Tue Jun 23 18:43:24 CEST 2015
Time: CALL insert_tempuniquecatalog 7.53
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
92 affected rows (21.055ms)
DELETE FROM new_to_new;
92 affected rows (9.321ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
124 affected rows (49.777ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
124 affected rows (75.031ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
62 affected rows (33.139ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
124 affected rows (33.296ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
124 affected rows (8.401ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
124 affected rows (7.775ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
127 affected rows (16.438ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190010 affected rows (149.142ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.35
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 162 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(162) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (52.846ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (32.879ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
62 affected rows (24.813ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image162 10 seconds
163
Tue Jun 23 18:43:34 CEST 2015
Time: CALL insert_tempuniquecatalog 7.64
Time: CALL flag_n_to_m_tempunique() 1.50
DELETE FROM one_to_many;
124 affected rows (31.132ms)
DELETE FROM new_to_new;
124 affected rows (3.922ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
110 affected rows (41.623ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
110 affected rows (66.552ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
55 affected rows (33.106ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
110 affected rows (25.051ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
110 affected rows (8.217ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
110 affected rows (7.946ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
111 affected rows (16.534ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190093 affected rows (136.070ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.54
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 163 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(163) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (44.065ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (32.997ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
55 affected rows (24.820ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image163 11 seconds
164
Tue Jun 23 18:43:45 CEST 2015
Time: CALL insert_tempuniquecatalog 7.72
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
110 affected rows (43.063ms)
DELETE FROM new_to_new;
110 affected rows (18.149ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
118 affected rows (49.822ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
118 affected rows (75.093ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
59 affected rows (33.140ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
118 affected rows (33.253ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
118 affected rows (8.351ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
118 affected rows (7.815ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
118 affected rows (16.456ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190115 affected rows (144.684ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.34
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 164 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(164) 0.97
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (415.996ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (32.927ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
59 affected rows (24.840ms)
Time: mclient gwacdb -e -i newsource.sql 0.48
Time for image164 12 seconds
165
Tue Jun 23 18:43:57 CEST 2015
Time: CALL insert_tempuniquecatalog 7.85
Time: CALL flag_n_to_m_tempunique() 0.58
DELETE FROM one_to_many;
118 affected rows (37.444ms)
DELETE FROM new_to_new;
118 affected rows (8.154ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
120 affected rows (41.687ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
120 affected rows (58.260ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
60 affected rows (74.876ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
120 affected rows (33.230ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
120 affected rows (8.321ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
120 affected rows (7.876ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
122 affected rows (16.589ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190266 affected rows (134.581ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.36
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 165 AND tuc.targetid IS NULL ORDER BY t.id;
6 affected rows
Time: insert_new_uniq(165) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
6 affected rows (43.887ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
6 affected rows (32.991ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
60 affected rows (24.837ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image165 10 seconds
166
Tue Jun 23 18:44:07 CEST 2015
Time: CALL insert_tempuniquecatalog 7.64
Time: CALL flag_n_to_m_tempunique() 1.62
DELETE FROM one_to_many;
120 affected rows (23.188ms)
DELETE FROM new_to_new;
120 affected rows (15.124ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
104 affected rows (58.192ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
104 affected rows (74.960ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
52 affected rows (41.383ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
104 affected rows (33.276ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
104 affected rows (8.290ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
104 affected rows (8.321ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
104 affected rows (16.479ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
189984 affected rows (149.890ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
6 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 166 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(166) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (36.331ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (24.761ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
52 affected rows (24.854ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image166 12 seconds
167
Tue Jun 23 18:44:19 CEST 2015
Time: CALL insert_tempuniquecatalog 7.58
Time: CALL flag_n_to_m_tempunique() 0.48
DELETE FROM one_to_many;
104 affected rows (30.069ms)
DELETE FROM new_to_new;
104 affected rows (5.280ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
120 affected rows (49.896ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
120 affected rows (66.636ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
60 affected rows (33.197ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
120 affected rows (33.215ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
120 affected rows (8.364ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
120 affected rows (7.834ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
121 affected rows (16.517ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190449 affected rows (115.016ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 167 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(167) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (43.585ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.088ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
60 affected rows (24.804ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image167 10 seconds
168
Tue Jun 23 18:44:29 CEST 2015
Time: CALL insert_tempuniquecatalog 7.83
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
120 affected rows (33.290ms)
DELETE FROM new_to_new;
120 affected rows (12.849ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
140 affected rows (41.578ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
140 affected rows (66.716ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
70 affected rows (33.173ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
140 affected rows (33.287ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
140 affected rows (8.295ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
140 affected rows (7.884ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
142 affected rows (16.542ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190426 affected rows (110.628ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 168 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(168) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (43.728ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (41.110ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
70 affected rows (24.798ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image168 10 seconds
169
Tue Jun 23 18:44:39 CEST 2015
Time: CALL insert_tempuniquecatalog 7.69
Time: CALL flag_n_to_m_tempunique() 1.85
DELETE FROM one_to_many;
140 affected rows (15.452ms)
DELETE FROM new_to_new;
140 affected rows (4.194ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
118 affected rows (50.025ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
118 affected rows (75.058ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
59 affected rows (41.448ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
118 affected rows (33.220ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
118 affected rows (8.358ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
118 affected rows (7.818ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
118 affected rows (16.424ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190373 affected rows (143.601ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 169 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(169) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (43.904ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.028ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
59 affected rows (24.767ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image169 12 seconds
170
Tue Jun 23 18:44:51 CEST 2015
Time: CALL insert_tempuniquecatalog 7.88
Time: CALL flag_n_to_m_tempunique() 0.53
DELETE FROM one_to_many;
118 affected rows (28.387ms)
DELETE FROM new_to_new;
118 affected rows (8.109ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
166 affected rows (41.465ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
166 affected rows (66.745ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
83 affected rows (33.083ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
166 affected rows (33.297ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
166 affected rows (8.335ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
166 affected rows (7.938ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
170 affected rows (16.560ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190337 affected rows (129.625ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.52
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 170 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(170) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (93.833ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (32.893ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
83 affected rows (24.850ms)
Time: mclient gwacdb -e -i newsource.sql 0.15
Time for image170 11 seconds
171
Tue Jun 23 18:45:02 CEST 2015
Time: CALL insert_tempuniquecatalog 7.87
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
166 affected rows (19.899ms)
DELETE FROM new_to_new;
166 affected rows (10.211ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
150 affected rows (41.489ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
150 affected rows (58.312ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
75 affected rows (33.272ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
150 affected rows (33.184ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
150 affected rows (8.321ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
150 affected rows (7.936ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
150 affected rows (16.519ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190570 affected rows (130.943ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.36
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 171 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(171) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (43.842ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (32.948ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
75 affected rows (24.835ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image171 10 seconds
172
Tue Jun 23 18:45:12 CEST 2015
Time: CALL insert_tempuniquecatalog 7.62
Time: CALL flag_n_to_m_tempunique() 2.12
DELETE FROM one_to_many;
150 affected rows (32.110ms)
DELETE FROM new_to_new;
150 affected rows (7.795ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
134 affected rows (49.881ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
134 affected rows (75.012ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
67 affected rows (41.334ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
134 affected rows (33.285ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
134 affected rows (8.341ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
134 affected rows (7.870ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
135 affected rows (16.534ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190506 affected rows (150.633ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.51
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 172 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(172) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (43.364ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.079ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
67 affected rows (24.813ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image172 12 seconds
173
Tue Jun 23 18:45:24 CEST 2015
Time: CALL insert_tempuniquecatalog 7.33
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
134 affected rows (45.248ms)
DELETE FROM new_to_new;
134 affected rows (7.339ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
124 affected rows (41.652ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
124 affected rows (74.937ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
62 affected rows (33.032ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
124 affected rows (33.287ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
124 affected rows (8.324ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
124 affected rows (7.897ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
124 affected rows (16.491ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190398 affected rows (156.224ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 173 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(173) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (43.990ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (24.709ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
62 affected rows (24.917ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image173 10 seconds
174
Tue Jun 23 18:45:34 CEST 2015
Time: CALL insert_tempuniquecatalog 8.24
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
124 affected rows (12.822ms)
DELETE FROM new_to_new;
124 affected rows (10.071ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
128 affected rows (49.930ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
128 affected rows (76.857ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
64 affected rows (33.112ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
128 affected rows (33.287ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
128 affected rows (8.299ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
128 affected rows (7.833ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
130 affected rows (16.481ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190493 affected rows (154.343ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.37
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 174 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(174) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.276ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.102ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
64 affected rows (24.799ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image174 11 seconds
175
Tue Jun 23 18:45:45 CEST 2015
Time: CALL insert_tempuniquecatalog 7.45
Time: CALL flag_n_to_m_tempunique() 2.04
DELETE FROM one_to_many;
128 affected rows (40.289ms)
DELETE FROM new_to_new;
128 affected rows (10.116ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
116 affected rows (49.749ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
116 affected rows (74.976ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
58 affected rows (41.505ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
116 affected rows (33.248ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
116 affected rows (8.339ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
116 affected rows (7.763ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
116 affected rows (16.474ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190578 affected rows (171.920ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 175 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(175) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (35.477ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.150ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
58 affected rows (24.850ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image175 11 seconds
176
Tue Jun 23 18:45:56 CEST 2015
Time: CALL insert_tempuniquecatalog 7.54
Time: CALL flag_n_to_m_tempunique() 0.53
DELETE FROM one_to_many;
116 affected rows (39.651ms)
DELETE FROM new_to_new;
116 affected rows (7.891ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
104 affected rows (58.187ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
104 affected rows (74.940ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
52 affected rows (41.506ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
104 affected rows (33.228ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
104 affected rows (8.256ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
104 affected rows (7.809ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
106 affected rows (16.552ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190630 affected rows (163.598ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.52
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 176 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(176) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.561ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.012ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
52 affected rows (24.841ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image176 11 seconds
177
Tue Jun 23 18:46:07 CEST 2015
Time: CALL insert_tempuniquecatalog 7.47
Time: CALL flag_n_to_m_tempunique() 0.55
DELETE FROM one_to_many;
104 affected rows (48.036ms)
DELETE FROM new_to_new;
104 affected rows (9.478ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
152 affected rows (41.570ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
152 affected rows (66.625ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
76 affected rows (33.233ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
152 affected rows (33.258ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
152 affected rows (8.369ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
152 affected rows (7.827ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
156 affected rows (16.489ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190510 affected rows (139.012ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 2.75
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 177 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(177) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (43.403ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (32.928ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
76 affected rows (24.838ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image177 11 seconds
178
Tue Jun 23 18:46:18 CEST 2015
Time: CALL insert_tempuniquecatalog 7.80
Time: CALL flag_n_to_m_tempunique() 2.22
DELETE FROM one_to_many;
152 affected rows (41.020ms)
DELETE FROM new_to_new;
152 affected rows (9.255ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
138 affected rows (49.825ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
138 affected rows (74.950ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
69 affected rows (41.291ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
138 affected rows (33.289ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
138 affected rows (8.347ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
138 affected rows (7.803ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
139 affected rows (16.553ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190645 affected rows (155.816ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 178 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(178) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (44.118ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.046ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
69 affected rows (24.909ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image178 12 seconds
179
Tue Jun 23 18:46:30 CEST 2015
Time: CALL insert_tempuniquecatalog 7.55
Time: CALL flag_n_to_m_tempunique() 0.52
DELETE FROM one_to_many;
138 affected rows (21.187ms)
DELETE FROM new_to_new;
138 affected rows (10.826ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
134 affected rows (41.643ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
134 affected rows (74.880ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
67 affected rows (41.507ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
134 affected rows (33.249ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
134 affected rows (8.324ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
134 affected rows (7.906ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
135 affected rows (16.482ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190581 affected rows (143.747ms)
Time: mclient gwacdb -e -i onetomany.sql 0.40
Time: CALL update_1_to_1_uniq() 1.34
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 179 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(179) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (44.470ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (33.039ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
67 affected rows (24.871ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image179 10 seconds
180
Tue Jun 23 18:46:40 CEST 2015
Time: CALL insert_tempuniquecatalog 7.34
Time: CALL flag_n_to_m_tempunique() 0.52
DELETE FROM one_to_many;
134 affected rows (37.285ms)
DELETE FROM new_to_new;
134 affected rows (19.313ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
122 affected rows (41.650ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
122 affected rows (58.211ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
61 affected rows (33.245ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
122 affected rows (24.885ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
122 affected rows (8.323ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
122 affected rows (7.754ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
123 affected rows (16.634ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190763 affected rows (124.200ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 180 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(180) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (44.431ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (33.084ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
61 affected rows (24.735ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image180 10 seconds
181
Tue Jun 23 18:46:50 CEST 2015
Time: CALL insert_tempuniquecatalog 7.51
Time: CALL flag_n_to_m_tempunique() 2.31
DELETE FROM one_to_many;
122 affected rows (28.076ms)
DELETE FROM new_to_new;
122 affected rows (7.654ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
112 affected rows (41.634ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
112 affected rows (66.685ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
56 affected rows (33.103ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
112 affected rows (33.251ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
112 affected rows (8.352ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
112 affected rows (7.872ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
113 affected rows (16.539ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190776 affected rows (140.422ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 181 AND tuc.targetid IS NULL ORDER BY t.id;
7 affected rows
Time: insert_new_uniq(181) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
7 affected rows (36.005ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
7 affected rows (33.189ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
56 affected rows (24.825ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image181 12 seconds
182
Tue Jun 23 18:47:02 CEST 2015
Time: CALL insert_tempuniquecatalog 7.43
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
112 affected rows (37.303ms)
DELETE FROM new_to_new;
112 affected rows (10.198ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
140 affected rows (41.580ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
140 affected rows (66.623ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
70 affected rows (33.157ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
140 affected rows (33.200ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
140 affected rows (14.917ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
140 affected rows (7.917ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
140 affected rows (16.619ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190750 affected rows (110.996ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.36
DELETE FROM newsrc;
7 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 182 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(182) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (23.070ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (23.430ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
70 affected rows (37.050ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image182 10 seconds
183
Tue Jun 23 18:47:12 CEST 2015
Time: CALL insert_tempuniquecatalog 7.68
Time: CALL flag_n_to_m_tempunique() 0.49
DELETE FROM one_to_many;
140 affected rows (44.267ms)
DELETE FROM new_to_new;
140 affected rows (14.546ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
118 affected rows (49.936ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
118 affected rows (74.924ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
59 affected rows (41.421ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
118 affected rows (33.194ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
118 affected rows (8.348ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
118 affected rows (7.845ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
118 affected rows (16.554ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190853 affected rows (143.440ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.35
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 183 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(183) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.421ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.119ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
59 affected rows (24.794ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image183 10 seconds
184
Tue Jun 23 18:47:22 CEST 2015
Time: CALL insert_tempuniquecatalog 7.76
Time: CALL flag_n_to_m_tempunique() 2.02
DELETE FROM one_to_many;
118 affected rows (40.912ms)
DELETE FROM new_to_new;
118 affected rows (14.056ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
124 affected rows (49.827ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
124 affected rows (74.901ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
62 affected rows (41.450ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
124 affected rows (33.208ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
124 affected rows (8.411ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
124 affected rows (7.826ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
124 affected rows (16.448ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191017 affected rows (155.814ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 184 AND tuc.targetid IS NULL ORDER BY t.id;
5 affected rows
Time: insert_new_uniq(184) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
5 affected rows (36.174ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
5 affected rows (24.849ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
62 affected rows (24.871ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image184 12 seconds
185
Tue Jun 23 18:47:34 CEST 2015
Time: CALL insert_tempuniquecatalog 7.81
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
124 affected rows (43.782ms)
DELETE FROM new_to_new;
124 affected rows (29.146ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
136 affected rows (41.647ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
136 affected rows (66.643ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
68 affected rows (33.195ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
136 affected rows (33.270ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
136 affected rows (8.298ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
136 affected rows (8.043ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
136 affected rows (16.436ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190951 affected rows (127.115ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.35
DELETE FROM newsrc;
5 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 185 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(185) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.427ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (24.595ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
68 affected rows (29.135ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image185 11 seconds
186
Tue Jun 23 18:47:45 CEST 2015
Time: CALL insert_tempuniquecatalog 7.78
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
136 affected rows (38.021ms)
DELETE FROM new_to_new;
136 affected rows (14.176ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
152 affected rows (41.654ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
152 affected rows (66.656ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
76 affected rows (33.187ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
152 affected rows (33.262ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
152 affected rows (8.382ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
152 affected rows (7.818ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
152 affected rows (16.592ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190910 affected rows (115.124ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 186 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(186) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (43.212ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (32.998ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
76 affected rows (24.832ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image186 10 seconds
187
Tue Jun 23 18:47:55 CEST 2015
Time: CALL insert_tempuniquecatalog 8.67
Time: CALL flag_n_to_m_tempunique() 1.48
DELETE FROM one_to_many;
152 affected rows (18.313ms)
DELETE FROM new_to_new;
152 affected rows (6.099ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
118 affected rows (41.489ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
118 affected rows (66.593ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
59 affected rows (33.210ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
118 affected rows (33.291ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
118 affected rows (8.302ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
118 affected rows (7.869ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
118 affected rows (16.595ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
190982 affected rows (137.550ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 187 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(187) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.124ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (25.029ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
59 affected rows (31.658ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image187 12 seconds
188
Tue Jun 23 18:48:07 CEST 2015
Time: CALL insert_tempuniquecatalog 7.73
Time: CALL flag_n_to_m_tempunique() 0.53
DELETE FROM one_to_many;
118 affected rows (52.081ms)
DELETE FROM new_to_new;
118 affected rows (11.046ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
106 affected rows (58.165ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
106 affected rows (66.685ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
53 affected rows (33.129ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
106 affected rows (33.201ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
106 affected rows (8.354ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
106 affected rows (7.729ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
106 affected rows (16.550ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191144 affected rows (134.634ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.54
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 188 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(188) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (43.235ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (32.994ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
53 affected rows (24.768ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image188 11 seconds
189
Tue Jun 23 18:48:18 CEST 2015
Time: CALL insert_tempuniquecatalog 7.49
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
106 affected rows (37.482ms)
DELETE FROM new_to_new;
106 affected rows (5.559ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
130 affected rows (41.559ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
130 affected rows (66.582ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
65 affected rows (33.238ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
130 affected rows (33.267ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
130 affected rows (8.325ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
130 affected rows (7.902ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
131 affected rows (16.558ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191076 affected rows (140.025ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.37
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 189 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(189) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (44.671ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (33.064ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
65 affected rows (24.848ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image189 10 seconds
190
Tue Jun 23 18:48:28 CEST 2015
Time: CALL insert_tempuniquecatalog 8.58
Time: CALL flag_n_to_m_tempunique() 2.44
DELETE FROM one_to_many;
130 affected rows (24.059ms)
DELETE FROM new_to_new;
130 affected rows (5.139ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
112 affected rows (49.935ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
112 affected rows (74.842ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
56 affected rows (41.364ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
112 affected rows (33.247ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
112 affected rows (8.349ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
112 affected rows (7.730ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
113 affected rows (16.577ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191149 affected rows (165.375ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.39
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 190 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(190) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (43.918ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.059ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
56 affected rows (24.895ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image190 13 seconds
191
Tue Jun 23 18:48:41 CEST 2015
Time: CALL insert_tempuniquecatalog 7.65
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
112 affected rows (45.700ms)
DELETE FROM new_to_new;
112 affected rows (17.528ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
126 affected rows (50.047ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
126 affected rows (74.908ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
63 affected rows (41.383ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
126 affected rows (33.226ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
126 affected rows (8.354ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
126 affected rows (7.796ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
127 affected rows (16.546ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191197 affected rows (145.787ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.35
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 191 AND tuc.targetid IS NULL ORDER BY t.id;
1 affected row
Time: insert_new_uniq(191) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
1 affected row (44.770ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
1 affected row (33.353ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
63 affected rows (24.380ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image191 10 seconds
192
Tue Jun 23 18:48:51 CEST 2015
Time: CALL insert_tempuniquecatalog 7.65
Time: CALL flag_n_to_m_tempunique() 0.66
DELETE FROM one_to_many;
126 affected rows (40.565ms)
DELETE FROM new_to_new;
126 affected rows (18.251ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
98 affected rows (49.727ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
98 affected rows (74.944ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
49 affected rows (41.558ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
98 affected rows (33.133ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
98 affected rows (8.588ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
98 affected rows (7.607ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
98 affected rows (16.541ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191055 affected rows (144.574ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.54
DELETE FROM newsrc;
1 affected row
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 192 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(192) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (35.553ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (24.775ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
49 affected rows (24.862ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image192 11 seconds
193
Tue Jun 23 18:49:02 CEST 2015
Time: CALL insert_tempuniquecatalog 7.88
Time: CALL flag_n_to_m_tempunique() 1.84
DELETE FROM one_to_many;
98 affected rows (18.037ms)
DELETE FROM new_to_new;
98 affected rows (7.878ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
138 affected rows (59.561ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
138 affected rows (73.526ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
69 affected rows (41.393ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
138 affected rows (33.238ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
138 affected rows (8.333ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
138 affected rows (8.167ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
138 affected rows (16.146ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191311 affected rows (138.670ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
3 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 193 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(193) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (43.799ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (32.970ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
69 affected rows (24.745ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image193 11 seconds
194
Tue Jun 23 18:49:13 CEST 2015
Time: CALL insert_tempuniquecatalog 7.39
Time: CALL flag_n_to_m_tempunique() 0.53
DELETE FROM one_to_many;
138 affected rows (22.774ms)
DELETE FROM new_to_new;
138 affected rows (5.190ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
92 affected rows (41.533ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
92 affected rows (66.614ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
46 affected rows (33.161ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
92 affected rows (33.304ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
92 affected rows (8.345ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
92 affected rows (7.809ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
92 affected rows (16.556ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191315 affected rows (123.729ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.35
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 194 AND tuc.targetid IS NULL ORDER BY t.id;
4 affected rows
Time: insert_new_uniq(194) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
4 affected rows (44.156ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
4 affected rows (32.995ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
46 affected rows (24.886ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image194 10 seconds
195
Tue Jun 23 18:49:23 CEST 2015
Time: CALL insert_tempuniquecatalog 7.65
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
92 affected rows (46.067ms)
DELETE FROM new_to_new;
92 affected rows (2.936ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
106 affected rows (49.941ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
106 affected rows (74.869ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
53 affected rows (41.459ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
106 affected rows (33.234ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
106 affected rows (8.347ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
106 affected rows (7.790ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
106 affected rows (16.476ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191231 affected rows (143.603ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.57
DELETE FROM newsrc;
4 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 195 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(195) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (36.075ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (24.836ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
53 affected rows (24.894ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image195 11 seconds
196
Tue Jun 23 18:49:34 CEST 2015
Time: CALL insert_tempuniquecatalog 9.18
Time: CALL flag_n_to_m_tempunique() 1.85
DELETE FROM one_to_many;
106 affected rows (19.965ms)
DELETE FROM new_to_new;
106 affected rows (3.610ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
108 affected rows (41.631ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
108 affected rows (66.615ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
54 affected rows (33.115ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
108 affected rows (24.946ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
108 affected rows (8.407ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
108 affected rows (7.806ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
109 affected rows (16.473ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191510 affected rows (137.153ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 196 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(196) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (52.220ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.244ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
54 affected rows (24.741ms)
Time: mclient gwacdb -e -i newsource.sql 0.11
Time for image196 13 seconds
197
Tue Jun 23 18:49:47 CEST 2015
Time: CALL insert_tempuniquecatalog 7.89
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
108 affected rows (44.604ms)
DELETE FROM new_to_new;
108 affected rows (7.480ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
102 affected rows (41.633ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
102 affected rows (66.648ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
51 affected rows (33.187ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
102 affected rows (33.235ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
102 affected rows (8.315ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
102 affected rows (7.990ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
102 affected rows (16.566ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191580 affected rows (129.889ms)
Time: mclient gwacdb -e -i onetomany.sql 0.39
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 197 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(197) 0.04
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (22.793ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (21.360ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
51 affected rows (27.334ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image197 10 seconds
198
Tue Jun 23 18:49:57 CEST 2015
Time: CALL insert_tempuniquecatalog 7.58
Time: CALL flag_n_to_m_tempunique() 0.50
DELETE FROM one_to_many;
102 affected rows (19.078ms)
DELETE FROM new_to_new;
102 affected rows (5.218ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
98 affected rows (41.516ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
98 affected rows (66.599ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
49 affected rows (33.227ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
98 affected rows (24.882ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
98 affected rows (8.308ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
98 affected rows (7.844ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
100 affected rows (16.522ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191366 affected rows (127.230ms)
Time: mclient gwacdb -e -i onetomany.sql 0.35
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 198 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(198) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (43.643ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (32.859ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
49 affected rows (24.866ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image198 11 seconds
199
Tue Jun 23 18:50:08 CEST 2015
Time: CALL insert_tempuniquecatalog 8.04
Time: CALL flag_n_to_m_tempunique() 2.37
DELETE FROM one_to_many;
98 affected rows (56.686ms)
DELETE FROM new_to_new;
98 affected rows (17.116ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
106 affected rows (49.782ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
106 affected rows (74.969ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
53 affected rows (41.356ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
106 affected rows (83.275ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
106 affected rows (12.794ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
106 affected rows (3.405ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
108 affected rows (16.509ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191610 affected rows (162.801ms)
Time: mclient gwacdb -e -i onetomany.sql 0.52
Time: CALL update_1_to_1_uniq() 1.57
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 199 AND tuc.targetid IS NULL ORDER BY t.id;
2 affected rows
Time: insert_new_uniq(199) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
2 affected rows (44.250ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
2 affected rows (33.139ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
53 affected rows (24.699ms)
Time: mclient gwacdb -e -i newsource.sql 0.10
Time for image199 12 seconds
200
Tue Jun 23 18:50:20 CEST 2015
Time: CALL insert_tempuniquecatalog 7.75
Time: CALL flag_n_to_m_tempunique() 0.51
DELETE FROM one_to_many;
106 affected rows (19.471ms)
DELETE FROM new_to_new;
106 affected rows (7.536ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
106 affected rows (41.617ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
106 affected rows (75.078ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT old_uniqueid FROM one_to_many);
53 affected rows (41.305ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
106 affected rows (33.336ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
106 affected rows (8.343ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
106 affected rows (7.753ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
107 affected rows (16.527ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
191664 affected rows (160.279ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.38
DELETE FROM newsrc;
2 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 200 AND tuc.targetid IS NULL ORDER BY t.id;
3 affected rows
Time: insert_new_uniq(200) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
3 affected rows (36.460ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
3 affected rows (24.769ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
53 affected rows (24.849ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image200 11 seconds
du /scratch/meng/gwac/dbfarm2 -sh
141G	/scratch/meng/gwac/dbfarm2
Total time 2126 seconds
