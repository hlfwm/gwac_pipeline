du /scratch/meng/gwac/dbfarm -sh
1.9T	/scratch/meng/gwac/dbfarm
DROP TABLE tempuniquecatalog CASCADE;
operation successful
create table tempuniquecatalog(uniqueid bigint, targetid bigint, distance_arcsec double, datapoints int, zone smallint, ra_avg double, decl_avg double, x double, y double, z double, flux_ref double, flux_tgs double, inactive BOOLEAN);
operation successful
CREATE PROCEDURE flag_n_to_m_tempunique()
BEGIN
UPDATE tempuniquecatalog SET INACTIVE = FALSE;    

UPDATE tempuniquecatalog
SET INACTIVE = TRUE
WHERE EXISTS (SELECT uniqueid,
                     targetid
              FROM (SELECT t1.uniqueid,
                           t1.targetid
                      FROM (SELECT targetid,
                                   MIN(distance_arcsec) as min_d
                              FROM tempuniquecatalog
				WHERE  uniqueid IN ( select uniqueid
						       from tempuniquecatalog
operation successful (50.556ms)
CREATE procedure update_1_to_1_uniq()
BEGIN
UPDATE uniquecatalog3
           SET datapoints = (SELECT datapoints  
                               FROM tempuniquecatalog
                              WHERE tempuniquecatalog.uniqueid = uniquecatalog3.id
                              AND tempuniquecatalog.inactive = FALSE
                             )
              ,zone = (SELECT zone
                         FROM tempuniquecatalog
                        WHERE tempuniquecatalog.uniqueid = uniquecatalog3.id
operation successful (21.208ms)
create function distance_sin(uid int, tid int)
RETURNS double
BEGIN
declare x1,y1,z1,x2,y2,z2 double;
SET x1=(select x from uniquecatalog3 where id=uid);
SET y1=(select y from uniquecatalog3 where id=uid);
SET z1=(select z from uniquecatalog3 where id=uid);
SET x2=(select x from targets3 where id=tid);
SET y2=(select y from targets3 where id=tid);
SET z2=(select z from targets3 where id=tid);
RETURN 3600*DEGREES(2*ASIN(SQRT( (x1 - x2) * (x1 - x2)+
                          (y1 - y2) * (y1 - y2)+
                          (z1 - z2) * (z1 - z2)
operation successful (21.460ms)
CREATE FUNCTION: name 'associates' (int(32), double(53)) already in use
48001
Tue Jul  7 08:29:31 CEST 2015
DELETE FROM tempuniquecatalog;
0 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48001,.00166666666666666666)
535698 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 6.02
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
6 affected rows (45.744ms)
DELETE FROM new_to_new;
6 affected rows (14.144ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
16 affected rows (50.027ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
16 affected rows (82.784ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
8 affected rows (25.337ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
16 affected rows (24.753ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
16 affected rows (27.354ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
16 affected rows (159.199ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
16 affected rows (21.288ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373238 affected rows (472.367ms)
Time: mclient gwacdb -e -i onetomany.sql 0.94
Time: CALL update_1_to_1_uniq() 1.52
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48001 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48001) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (2.630ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (4.250ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
8 affected rows (20.456ms)
Time: mclient gwacdb -e -i newsource.sql 0.04
Time for image48001 10 seconds
48002
Tue Jul  7 08:29:41 CEST 2015
DELETE FROM tempuniquecatalog;
535698 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48002,.00166666666666666666)
536409 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.34
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
16 affected rows (23.996ms)
DELETE FROM new_to_new;
16 affected rows (7.885ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
26 affected rows (49.898ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
26 affected rows (91.799ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
13 affected rows (16.406ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
26 affected rows (16.472ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
26 affected rows (8.234ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
26 affected rows (8.047ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
26 affected rows (8.202ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372669 affected rows (192.931ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48002 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48002) 0.08
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (23.221ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.962ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
13 affected rows (11.089ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48002 6 seconds
48003
Tue Jul  7 08:29:47 CEST 2015
DELETE FROM tempuniquecatalog;
536409 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48003,.00166666666666666666)
536156 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.32
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
26 affected rows (34.192ms)
DELETE FROM new_to_new;
26 affected rows (18.691ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
18 affected rows (49.965ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
18 affected rows (74.928ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
9 affected rows (25.015ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
18 affected rows (49.853ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
18 affected rows (8.187ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
18 affected rows (8.022ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
18 affected rows (16.444ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372627 affected rows (181.495ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48003 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48003) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (25.599ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.808ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
9 affected rows (14.546ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48003 6 seconds
48004
Tue Jul  7 08:29:53 CEST 2015
DELETE FROM tempuniquecatalog;
536156 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48004,.00166666666666666666)
536621 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.41
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
18 affected rows (32.644ms)
DELETE FROM new_to_new;
18 affected rows (5.202ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
14 affected rows (58.310ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
14 affected rows (91.747ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
7 affected rows (24.730ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
14 affected rows (24.693ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
14 affected rows (8.253ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
14 affected rows (8.017ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
14 affected rows (16.569ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372423 affected rows (192.609ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48004 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48004) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.107ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.653ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
7 affected rows (14.219ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48004 6 seconds
48005
Tue Jul  7 08:29:59 CEST 2015
DELETE FROM tempuniquecatalog;
536621 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48005,.00166666666666666666)
534255 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.99
Time: CALL flag_n_to_m_tempunique() 3.25
DELETE FROM one_to_many;
14 affected rows (46.518ms)
DELETE FROM new_to_new;
14 affected rows (18.825ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
10 affected rows (58.181ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
10 affected rows (100.100ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
5 affected rows (16.297ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
10 affected rows (16.528ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
10 affected rows (8.305ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
10 affected rows (8.090ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
10 affected rows (16.452ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373736 affected rows (255.307ms)
Time: mclient gwacdb -e -i onetomany.sql 0.55
Time: CALL update_1_to_1_uniq() 1.56
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48005 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48005) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.582ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.385ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
5 affected rows (25.123ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48005 10 seconds
48006
Tue Jul  7 08:30:09 CEST 2015
DELETE FROM tempuniquecatalog;
534255 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48006,.00166666666666666666)
533076 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.46
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
10 affected rows (29.505ms)
DELETE FROM new_to_new;
10 affected rows (8.182ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
12 affected rows (49.964ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
12 affected rows (83.397ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
6 affected rows (16.368ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
12 affected rows (16.534ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
12 affected rows (8.281ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
12 affected rows (8.080ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
12 affected rows (16.540ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
375755 affected rows (197.930ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48006 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48006) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (25.185ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.400ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
6 affected rows (23.517ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48006 6 seconds
48007
Tue Jul  7 08:30:15 CEST 2015
DELETE FROM tempuniquecatalog;
533076 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48007,.00166666666666666666)
536610 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.29
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
12 affected rows (39.796ms)
DELETE FROM new_to_new;
12 affected rows (4.882ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
16 affected rows (58.312ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
16 affected rows (100.016ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
8 affected rows (24.700ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
16 affected rows (16.491ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
16 affected rows (8.259ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
16 affected rows (8.015ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
16 affected rows (8.252ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372399 affected rows (192.468ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.64
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48007 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48007) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (25.798ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.850ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
8 affected rows (23.784ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48007 6 seconds
48008
Tue Jul  7 08:30:21 CEST 2015
DELETE FROM tempuniquecatalog;
536610 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48008,.00166666666666666666)
540426 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.49
Time: CALL flag_n_to_m_tempunique() 0.67
DELETE FROM one_to_many;
16 affected rows (39.732ms)
DELETE FROM new_to_new;
16 affected rows (5.274ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
18 affected rows (49.981ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
18 affected rows (91.624ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
9 affected rows (16.542ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
18 affected rows (16.386ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
18 affected rows (8.335ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
18 affected rows (8.145ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
18 affected rows (8.144ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
368660 affected rows (191.761ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48008 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48008) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (23.838ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.665ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
9 affected rows (12.046ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48008 6 seconds
48009
Tue Jul  7 08:30:27 CEST 2015
DELETE FROM tempuniquecatalog;
540426 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48009,.00166666666666666666)
538348 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.83
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
18 affected rows (26.492ms)
DELETE FROM new_to_new;
18 affected rows (8.840ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
16 affected rows (50.005ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
16 affected rows (91.629ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
8 affected rows (16.404ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
16 affected rows (16.447ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
16 affected rows (8.324ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
16 affected rows (8.019ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
16 affected rows (8.239ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370666 affected rows (195.967ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48009 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48009) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.441ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.181ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
8 affected rows (16.446ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48009 7 seconds
48010
Tue Jul  7 08:30:34 CEST 2015
DELETE FROM tempuniquecatalog;
538348 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48010,.00166666666666666666)
539173 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.39
Time: CALL flag_n_to_m_tempunique() 1.92
DELETE FROM one_to_many;
16 affected rows (41.007ms)
DELETE FROM new_to_new;
16 affected rows (16.690ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
14 affected rows (49.841ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
14 affected rows (91.793ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
7 affected rows (24.728ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
14 affected rows (16.502ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
14 affected rows (8.270ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
14 affected rows (8.052ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
14 affected rows (8.219ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
369875 affected rows (221.428ms)
Time: mclient gwacdb -e -i onetomany.sql 0.49
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48010 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48010) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.038ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.038ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
7 affected rows (14.479ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48010 7 seconds
48011
Tue Jul  7 08:30:41 CEST 2015
DELETE FROM tempuniquecatalog;
539173 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48011,.00166666666666666666)
536538 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.24
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
14 affected rows (41.009ms)
DELETE FROM new_to_new;
14 affected rows (18.506ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
14 affected rows (58.195ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
14 affected rows (91.810ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
7 affected rows (16.227ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
14 affected rows (24.890ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
14 affected rows (8.282ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
14 affected rows (8.136ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
14 affected rows (16.509ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372932 affected rows (193.308ms)
Time: mclient gwacdb -e -i onetomany.sql 0.48
Time: CALL update_1_to_1_uniq() 1.52
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48011 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48011) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (25.756ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.084ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
7 affected rows (11.367ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48011 6 seconds
48012
Tue Jul  7 08:30:47 CEST 2015
DELETE FROM tempuniquecatalog;
536538 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48012,.00166666666666666666)
537028 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.35
Time: CALL flag_n_to_m_tempunique() 0.66
DELETE FROM one_to_many;
14 affected rows (46.611ms)
DELETE FROM new_to_new;
14 affected rows (18.831ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
28 affected rows (58.273ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
28 affected rows (91.585ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
14 affected rows (24.972ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
28 affected rows (16.399ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
28 affected rows (8.353ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
28 affected rows (8.051ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
29 affected rows (8.207ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372127 affected rows (188.278ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48012 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48012) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.514ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.645ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
14 affected rows (27.004ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48012 7 seconds
48013
Tue Jul  7 08:30:54 CEST 2015
DELETE FROM tempuniquecatalog;
537028 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48013,.00166666666666666666)
535610 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.44
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
28 affected rows (38.015ms)
DELETE FROM new_to_new;
28 affected rows (6.540ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
20 affected rows (58.231ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
20 affected rows (91.634ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
10 affected rows (16.359ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
20 affected rows (16.703ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
20 affected rows (8.307ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
20 affected rows (7.931ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
20 affected rows (16.522ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373523 affected rows (191.725ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48013 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48013) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.728ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.811ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
10 affected rows (22.212ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48013 6 seconds
48014
Tue Jul  7 08:31:00 CEST 2015
DELETE FROM tempuniquecatalog;
535610 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48014,.00166666666666666666)
539390 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.24
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
20 affected rows (41.482ms)
DELETE FROM new_to_new;
20 affected rows (19.717ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
36 affected rows (49.900ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
36 affected rows (91.620ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
18 affected rows (24.756ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
36 affected rows (16.566ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
36 affected rows (8.311ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
36 affected rows (8.072ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
36 affected rows (16.563ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
369818 affected rows (177.042ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.86
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48014 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48014) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (25.863ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.284ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
18 affected rows (17.798ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48014 6 seconds
48015
Tue Jul  7 08:31:06 CEST 2015
DELETE FROM tempuniquecatalog;
539390 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48015,.00166666666666666666)
537076 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.25
Time: CALL flag_n_to_m_tempunique() 1.81
DELETE FROM one_to_many;
36 affected rows (39.098ms)
DELETE FROM new_to_new;
36 affected rows (19.743ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.907ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (83.313ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.458ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.581ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.290ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.135ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (8.062ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371741 affected rows (201.723ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48015 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48015) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.729ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.849ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (12.078ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48015 7 seconds
48016
Tue Jul  7 08:31:13 CEST 2015
DELETE FROM tempuniquecatalog;
537076 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48016,.00166666666666666666)
536106 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.34
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
8 affected rows (30.265ms)
DELETE FROM new_to_new;
8 affected rows (13.199ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
18 affected rows (49.932ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
18 affected rows (91.728ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
9 affected rows (24.659ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
18 affected rows (24.935ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
18 affected rows (8.232ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
18 affected rows (7.997ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
19 affected rows (16.578ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373315 affected rows (173.843ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48016 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48016) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.183ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.361ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
9 affected rows (15.551ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48016 6 seconds
48017
Tue Jul  7 08:31:19 CEST 2015
DELETE FROM tempuniquecatalog;
536106 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48017,.00166666666666666666)
537491 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.56
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
18 affected rows (50.175ms)
DELETE FROM new_to_new;
18 affected rows (17.147ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
12 affected rows (49.842ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
12 affected rows (83.441ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
6 affected rows (24.720ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
12 affected rows (24.872ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
12 affected rows (8.239ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
12 affected rows (8.126ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
12 affected rows (16.370ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371891 affected rows (183.671ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48017 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48017) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.235ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.487ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
6 affected rows (12.270ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48017 7 seconds
48018
Tue Jul  7 08:31:26 CEST 2015
DELETE FROM tempuniquecatalog;
537491 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48018,.00166666666666666666)
536937 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.35
Time: CALL flag_n_to_m_tempunique() 0.68
DELETE FROM one_to_many;
12 affected rows (24.773ms)
DELETE FROM new_to_new;
12 affected rows (10.087ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
26 affected rows (49.915ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
26 affected rows (91.691ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
13 affected rows (16.306ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
26 affected rows (24.976ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
26 affected rows (8.285ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
26 affected rows (7.987ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
27 affected rows (8.225ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372166 affected rows (185.272ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48018 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48018) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.358ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.241ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
13 affected rows (18.787ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48018 6 seconds
48019
Tue Jul  7 08:31:32 CEST 2015
DELETE FROM tempuniquecatalog;
536937 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48019,.00166666666666666666)
537573 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.29
Time: CALL flag_n_to_m_tempunique() 0.69
DELETE FROM one_to_many;
26 affected rows (28.969ms)
DELETE FROM new_to_new;
26 affected rows (9.882ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
34 affected rows (58.193ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
34 affected rows (91.733ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
17 affected rows (24.649ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
34 affected rows (24.936ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
34 affected rows (8.238ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
34 affected rows (8.014ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
34 affected rows (16.547ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371712 affected rows (170.955ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.63
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48019 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48019) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (33.297ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.222ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
17 affected rows (23.692ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48019 6 seconds
48020
Tue Jul  7 08:31:38 CEST 2015
DELETE FROM tempuniquecatalog;
537573 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48020,.00166666666666666666)
539816 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.31
Time: CALL flag_n_to_m_tempunique() 1.86
DELETE FROM one_to_many;
34 affected rows (31.511ms)
DELETE FROM new_to_new;
34 affected rows (3.752ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
36 affected rows (58.257ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
36 affected rows (108.419ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
18 affected rows (24.672ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
36 affected rows (16.550ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
36 affected rows (8.411ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
36 affected rows (8.002ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
36 affected rows (16.562ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
369285 affected rows (257.705ms)
Time: mclient gwacdb -e -i onetomany.sql 0.54
Time: CALL update_1_to_1_uniq() 1.68
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48020 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48020) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (34.192ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.800ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
18 affected rows (31.687ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image48020 8 seconds
48021
Tue Jul  7 08:31:46 CEST 2015
DELETE FROM tempuniquecatalog;
539816 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48021,.00166666666666666666)
536011 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.36
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
36 affected rows (36.716ms)
DELETE FROM new_to_new;
36 affected rows (27.799ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
0 affected rows (46.003ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
0 affected rows (62.063ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
0 affected rows (9.887ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
0 affected rows (10.357ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
0 affected rows (1.943ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
0 affected rows (0.677ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
0 affected rows (2.252ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373336 affected rows (183.583ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48021 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48021) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.160ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.867ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
0 affected rows (9.120ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48021 6 seconds
48022
Tue Jul  7 08:31:52 CEST 2015
DELETE FROM tempuniquecatalog;
536011 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48022,.00166666666666666666)
536717 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.55
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
0 affected rows (35.741ms)
DELETE FROM new_to_new;
0 affected rows (8.142ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
14 affected rows (49.945ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
14 affected rows (83.314ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
7 affected rows (24.717ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
14 affected rows (16.486ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
14 affected rows (8.370ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
14 affected rows (8.142ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
14 affected rows (7.962ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372752 affected rows (178.406ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48022 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48022) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (32.033ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.529ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
7 affected rows (28.819ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48022 6 seconds
48023
Tue Jul  7 08:31:58 CEST 2015
DELETE FROM tempuniquecatalog;
536717 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48023,.00166666666666666666)
536444 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.26
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
14 affected rows (38.402ms)
DELETE FROM new_to_new;
14 affected rows (17.680ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.886ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (83.405ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (24.716ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.527ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.344ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.033ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.535ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372716 affected rows (181.009ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48023 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48023) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.992ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.625ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (17.203ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48023 6 seconds
48024
Tue Jul  7 08:32:04 CEST 2015
DELETE FROM tempuniquecatalog;
536444 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48024,.00166666666666666666)
536903 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.28
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
8 affected rows (35.608ms)
DELETE FROM new_to_new;
8 affected rows (12.808ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
12 affected rows (58.272ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
12 affected rows (91.570ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
6 affected rows (16.418ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
12 affected rows (16.416ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
12 affected rows (8.424ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
12 affected rows (7.997ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
12 affected rows (8.148ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372500 affected rows (189.008ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48024 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48024) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.671ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.122ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
6 affected rows (29.431ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48024 6 seconds
48025
Tue Jul  7 08:32:10 CEST 2015
DELETE FROM tempuniquecatalog;
536903 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48025,.00166666666666666666)
534536 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.26
Time: CALL flag_n_to_m_tempunique() 1.96
DELETE FROM one_to_many;
12 affected rows (56.288ms)
DELETE FROM new_to_new;
12 affected rows (16.427ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (49.810ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (83.327ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (24.621ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.551ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.306ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.092ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.182ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373812 affected rows (226.124ms)
Time: mclient gwacdb -e -i onetomany.sql 0.50
Time: CALL update_1_to_1_uniq() 1.54
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48025 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48025) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (33.872ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.593ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (14.218ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48025 8 seconds
48026
Tue Jul  7 08:32:18 CEST 2015
DELETE FROM tempuniquecatalog;
534536 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48026,.00166666666666666666)
533356 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.44
Time: CALL flag_n_to_m_tempunique() 0.68
DELETE FROM one_to_many;
6 affected rows (38.764ms)
DELETE FROM new_to_new;
6 affected rows (18.687ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.700ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (83.338ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (24.718ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.471ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.409ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (7.957ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.518ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
375830 affected rows (195.350ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48026 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48026) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.623ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.346ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (24.346ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48026 6 seconds
48027
Tue Jul  7 08:32:24 CEST 2015
DELETE FROM tempuniquecatalog;
533356 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48027,.00166666666666666666)
536886 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.39
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
8 affected rows (29.521ms)
DELETE FROM new_to_new;
8 affected rows (9.996ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (49.911ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (83.381ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.310ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.583ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.286ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.030ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (16.523ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372480 affected rows (189.691ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48027 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48027) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.440ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.554ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (21.455ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48027 6 seconds
48028
Tue Jul  7 08:32:30 CEST 2015
DELETE FROM tempuniquecatalog;
536886 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48028,.00166666666666666666)
540694 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.32
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
6 affected rows (32.164ms)
DELETE FROM new_to_new;
6 affected rows (5.852ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.907ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (100.103ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.303ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.476ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.462ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (7.931ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.570ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
368739 affected rows (182.834ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48028 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48028) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.331ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.959ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (17.860ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48028 6 seconds
48029
Tue Jul  7 08:32:36 CEST 2015
DELETE FROM tempuniquecatalog;
540694 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48029,.00166666666666666666)
538607 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.24
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
8 affected rows (41.357ms)
DELETE FROM new_to_new;
8 affected rows (16.810ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (50.016ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (83.255ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (24.868ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.348ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.312ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (7.964ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.214ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370744 affected rows (183.705ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48029 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48029) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.435ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.739ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (26.585ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48029 6 seconds
48030
Tue Jul  7 08:32:42 CEST 2015
DELETE FROM tempuniquecatalog;
538607 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48030,.00166666666666666666)
539418 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.29
Time: CALL flag_n_to_m_tempunique() 1.74
DELETE FROM one_to_many;
6 affected rows (41.824ms)
DELETE FROM new_to_new;
6 affected rows (14.317ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
2 affected rows (50.031ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
2 affected rows (91.580ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
1 affected row (16.266ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
2 affected rows (16.588ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
2 affected rows (8.337ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
2 affected rows (8.084ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
2 affected rows (8.156ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
369959 affected rows (222.933ms)
Time: mclient gwacdb -e -i onetomany.sql 0.48
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48030 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48030) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.584ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.121ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
1 affected row (14.118ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48030 8 seconds
48031
Tue Jul  7 08:32:50 CEST 2015
DELETE FROM tempuniquecatalog;
539418 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48031,.00166666666666666666)
536768 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.25
Time: CALL flag_n_to_m_tempunique() 0.68
DELETE FROM one_to_many;
2 affected rows (39.836ms)
DELETE FROM new_to_new;
2 affected rows (12.241ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (58.269ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.715ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.297ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (24.892ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.272ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (7.964ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.158ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373015 affected rows (185.179ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48031 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48031) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.862ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.844ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (14.719ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48031 6 seconds
48032
Tue Jul  7 08:32:56 CEST 2015
DELETE FROM tempuniquecatalog;
536768 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48032,.00166666666666666666)
537258 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.35
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
6 affected rows (40.099ms)
DELETE FROM new_to_new;
6 affected rows (12.516ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
18 affected rows (49.928ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
18 affected rows (83.395ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
9 affected rows (16.368ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
18 affected rows (24.936ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
18 affected rows (8.253ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
18 affected rows (8.039ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
19 affected rows (16.541ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372204 affected rows (174.480ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48032 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48032) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.995ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.542ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
9 affected rows (27.380ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48032 6 seconds
48033
Tue Jul  7 08:33:02 CEST 2015
DELETE FROM tempuniquecatalog;
537258 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48033,.00166666666666666666)
535827 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.34
Time: CALL flag_n_to_m_tempunique() 0.66
DELETE FROM one_to_many;
18 affected rows (26.395ms)
DELETE FROM new_to_new;
18 affected rows (3.990ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.981ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (91.737ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (24.602ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.491ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.368ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (7.970ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.549ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373605 affected rows (185.099ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48033 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48033) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.371ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.060ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (17.986ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48033 6 seconds
48034
Tue Jul  7 08:33:08 CEST 2015
DELETE FROM tempuniquecatalog;
535827 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48034,.00166666666666666666)
539604 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.39
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
8 affected rows (25.436ms)
DELETE FROM new_to_new;
8 affected rows (10.194ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
20 affected rows (58.197ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
20 affected rows (91.616ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
10 affected rows (16.420ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
20 affected rows (16.542ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
20 affected rows (8.346ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
20 affected rows (8.033ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
20 affected rows (16.545ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
369895 affected rows (185.682ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48034 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48034) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.109ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.480ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
10 affected rows (20.704ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48034 6 seconds
48035
Tue Jul  7 08:33:14 CEST 2015
DELETE FROM tempuniquecatalog;
539604 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48035,.00166666666666666666)
537271 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.25
Time: CALL flag_n_to_m_tempunique() 1.78
DELETE FROM one_to_many;
20 affected rows (45.997ms)
DELETE FROM new_to_new;
20 affected rows (6.025ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
2 affected rows (58.290ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
2 affected rows (100.081ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
1 affected row (16.345ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
2 affected rows (16.473ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
2 affected rows (8.307ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
2 affected rows (8.121ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
2 affected rows (16.429ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371811 affected rows (215.337ms)
Time: mclient gwacdb -e -i onetomany.sql 0.50
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48035 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48035) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.525ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.781ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
1 affected row (26.284ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48035 7 seconds
48036
Tue Jul  7 08:33:21 CEST 2015
DELETE FROM tempuniquecatalog;
537271 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48036,.00166666666666666666)
536291 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.39
Time: CALL flag_n_to_m_tempunique() 0.66
DELETE FROM one_to_many;
2 affected rows (42.088ms)
DELETE FROM new_to_new;
2 affected rows (3.272ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (58.355ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (947.707ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (28.583ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (23.449ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.288ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.041ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
9 affected rows (16.391ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373393 affected rows (193.583ms)
Time: mclient gwacdb -e -i onetomany.sql 1.33
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48036 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48036) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.285ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.567ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (27.664ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48036 7 seconds
48037
Tue Jul  7 08:33:28 CEST 2015
DELETE FROM tempuniquecatalog;
536291 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48037,.00166666666666666666)
537666 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.31
Time: CALL flag_n_to_m_tempunique() 0.66
DELETE FROM one_to_many;
8 affected rows (33.807ms)
DELETE FROM new_to_new;
8 affected rows (4.487ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
4 affected rows (50.031ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
4 affected rows (83.205ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
2 affected rows (16.448ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
4 affected rows (24.957ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
4 affected rows (8.289ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
4 affected rows (8.168ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
4 affected rows (16.350ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371967 affected rows (196.346ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48037 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48037) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.775ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.118ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
2 affected rows (27.892ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48037 6 seconds
48038
Tue Jul  7 08:33:34 CEST 2015
DELETE FROM tempuniquecatalog;
537666 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48038,.00166666666666666666)
537108 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.29
Time: CALL flag_n_to_m_tempunique() 0.66
DELETE FROM one_to_many;
4 affected rows (23.879ms)
DELETE FROM new_to_new;
4 affected rows (7.141ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
16 affected rows (58.262ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
16 affected rows (91.563ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
8 affected rows (16.318ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
16 affected rows (16.569ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
16 affected rows (8.283ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
16 affected rows (8.014ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
16 affected rows (8.188ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372240 affected rows (190.832ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48038 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48038) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (25.814ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.446ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
8 affected rows (26.763ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48038 6 seconds
48039
Tue Jul  7 08:33:40 CEST 2015
DELETE FROM tempuniquecatalog;
537108 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48039,.00166666666666666666)
537739 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.52
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
16 affected rows (30.006ms)
DELETE FROM new_to_new;
16 affected rows (8.007ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.989ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (91.742ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.240ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.924ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.304ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (7.991ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.621ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371796 affected rows (188.570ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48039 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48039) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.519ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.702ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (16.208ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48039 7 seconds
48040
Tue Jul  7 08:33:47 CEST 2015
DELETE FROM tempuniquecatalog;
537739 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48040,.00166666666666666666)
539959 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.28
Time: CALL flag_n_to_m_tempunique() 1.69
DELETE FROM one_to_many;
8 affected rows (32.023ms)
DELETE FROM new_to_new;
8 affected rows (8.541ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
20 affected rows (49.984ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
20 affected rows (91.551ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
10 affected rows (16.318ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
20 affected rows (16.547ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
20 affected rows (8.420ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
20 affected rows (7.926ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
20 affected rows (16.537ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
369356 affected rows (220.684ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48040 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48040) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.886ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.254ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
10 affected rows (18.923ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48040 7 seconds
48041
Tue Jul  7 08:33:54 CEST 2015
DELETE FROM tempuniquecatalog;
539959 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48041,.00166666666666666666)
536130 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.32
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
20 affected rows (46.241ms)
DELETE FROM new_to_new;
20 affected rows (12.699ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
0 affected rows (43.870ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
0 affected rows (65.040ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
0 affected rows (10.986ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
0 affected rows (12.144ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
0 affected rows (0.899ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
0 affected rows (0.677ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
0 affected rows (2.475ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373399 affected rows (172.770ms)
Time: mclient gwacdb -e -i onetomany.sql 0.37
Time: CALL update_1_to_1_uniq() 1.51
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48041 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48041) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.319ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.705ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
0 affected rows (9.920ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48041 6 seconds
48042
Tue Jul  7 08:34:00 CEST 2015
DELETE FROM tempuniquecatalog;
536130 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48042,.00166666666666666666)
536839 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.36
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
0 affected rows (39.317ms)
DELETE FROM new_to_new;
0 affected rows (3.991ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
14 affected rows (50.028ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
14 affected rows (100.071ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
7 affected rows (16.374ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
14 affected rows (16.390ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
14 affected rows (8.314ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
14 affected rows (8.029ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
14 affected rows (16.542ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372812 affected rows (186.399ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48042 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48042) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.147ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.739ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
7 affected rows (14.336ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48042 6 seconds
48043
Tue Jul  7 08:34:06 CEST 2015
DELETE FROM tempuniquecatalog;
536839 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48043,.00166666666666666666)
536565 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.39
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
14 affected rows (46.735ms)
DELETE FROM new_to_new;
14 affected rows (2.816ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.878ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (83.345ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.396ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.953ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.164ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.034ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.607ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372777 affected rows (178.373ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48043 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48043) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.801ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.672ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (18.204ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48043 6 seconds
48044
Tue Jul  7 08:34:12 CEST 2015
DELETE FROM tempuniquecatalog;
536565 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48044,.00166666666666666666)
537030 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.23
Time: CALL flag_n_to_m_tempunique() 0.73
DELETE FROM one_to_many;
8 affected rows (37.071ms)
DELETE FROM new_to_new;
8 affected rows (14.233ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
10 affected rows (58.265ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
10 affected rows (91.669ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
5 affected rows (24.743ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
10 affected rows (16.377ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
10 affected rows (8.360ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
10 affected rows (8.031ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
10 affected rows (8.317ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372557 affected rows (172.963ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48044 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48044) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.773ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.844ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
5 affected rows (25.035ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48044 6 seconds
48045
Tue Jul  7 08:34:18 CEST 2015
DELETE FROM tempuniquecatalog;
537030 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48045,.00166666666666666666)
534658 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.17
Time: CALL flag_n_to_m_tempunique() 1.79
DELETE FROM one_to_many;
10 affected rows (45.894ms)
DELETE FROM new_to_new;
10 affected rows (17.338ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (58.426ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (99.887ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (24.549ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (24.944ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.272ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.029ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (16.593ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373868 affected rows (248.174ms)
Time: mclient gwacdb -e -i onetomany.sql 0.56
Time: CALL update_1_to_1_uniq() 1.68
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48045 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48045) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (36.164ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.510ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (17.402ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48045 7 seconds
48046
Tue Jul  7 08:34:25 CEST 2015
DELETE FROM tempuniquecatalog;
534658 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48046,.00166666666666666666)
533474 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.27
Time: CALL flag_n_to_m_tempunique() 0.67
DELETE FROM one_to_many;
6 affected rows (35.265ms)
DELETE FROM new_to_new;
6 affected rows (17.499ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (66.644ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (99.936ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.481ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.844ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.296ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (7.953ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.513ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
375892 affected rows (177.351ms)
Time: mclient gwacdb -e -i onetomany.sql 0.48
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48046 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48046) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.580ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.241ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (26.738ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48046 7 seconds
48047
Tue Jul  7 08:34:32 CEST 2015
DELETE FROM tempuniquecatalog;
533474 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48047,.00166666666666666666)
537005 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.37
Time: CALL flag_n_to_m_tempunique() 0.76
DELETE FROM one_to_many;
8 affected rows (448.795ms)
DELETE FROM new_to_new;
8 affected rows (12.638ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
4 affected rows (49.937ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
4 affected rows (83.359ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
2 affected rows (16.280ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
4 affected rows (16.608ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
4 affected rows (8.352ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
4 affected rows (7.964ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
4 affected rows (16.564ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372543 affected rows (200.069ms)
Time: mclient gwacdb -e -i onetomany.sql 0.87
Time: CALL update_1_to_1_uniq() 1.65
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48047 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48047) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.955ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.140ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
2 affected rows (20.562ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48047 7 seconds
48048
Tue Jul  7 08:34:39 CEST 2015
DELETE FROM tempuniquecatalog;
537005 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48048,.00166666666666666666)
540814 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.38
Time: CALL flag_n_to_m_tempunique() 0.66
DELETE FROM one_to_many;
4 affected rows (47.457ms)
DELETE FROM new_to_new;
4 affected rows (13.124ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.997ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (98.194ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (17.931ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.636ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.325ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (7.946ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (8.267ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
368797 affected rows (198.316ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48048 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48048) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.184ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.264ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (25.255ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48048 6 seconds
48049
Tue Jul  7 08:34:45 CEST 2015
DELETE FROM tempuniquecatalog;
540814 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48049,.00166666666666666666)
538725 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.39
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
8 affected rows (32.323ms)
DELETE FROM new_to_new;
8 affected rows (9.511ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (49.832ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.678ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.311ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (24.861ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.295ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.028ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.203ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370804 affected rows (187.391ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48049 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48049) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.334ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.898ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (28.627ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48049 6 seconds
48050
Tue Jul  7 08:34:51 CEST 2015
DELETE FROM tempuniquecatalog;
538725 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48050,.00166666666666666666)
539535 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.27
Time: CALL flag_n_to_m_tempunique() 1.30
DELETE FROM one_to_many;
6 affected rows (57.985ms)
DELETE FROM new_to_new;
6 affected rows (13.175ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
2 affected rows (58.265ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
2 affected rows (91.788ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
1 affected row (24.910ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
2 affected rows (16.220ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
2 affected rows (8.292ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
2 affected rows (16.360ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
2 affected rows (8.219ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370020 affected rows (212.717ms)
Time: mclient gwacdb -e -i onetomany.sql 0.51
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48050 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48050) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.475ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.495ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
1 affected row (14.556ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48050 7 seconds
48051
Tue Jul  7 08:34:58 CEST 2015
DELETE FROM tempuniquecatalog;
539535 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48051,.00166666666666666666)
536887 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.17
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
2 affected rows (35.715ms)
DELETE FROM new_to_new;
2 affected rows (11.989ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (49.948ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.570ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.371ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (24.897ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.256ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.044ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.209ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373074 affected rows (188.507ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48051 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48051) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.570ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.405ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (16.907ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48051 6 seconds
48052
Tue Jul  7 08:35:04 CEST 2015
DELETE FROM tempuniquecatalog;
536887 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48052,.00166666666666666666)
537373 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.69
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
6 affected rows (20.209ms)
DELETE FROM new_to_new;
6 affected rows (5.498ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
18 affected rows (50.020ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
18 affected rows (91.509ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
9 affected rows (16.491ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
18 affected rows (16.450ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
18 affected rows (8.310ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
18 affected rows (7.962ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
19 affected rows (16.566ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372267 affected rows (174.839ms)
Time: mclient gwacdb -e -i onetomany.sql 0.41
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48052 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48052) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.585ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.370ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
9 affected rows (12.679ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48052 6 seconds
48053
Tue Jul  7 08:35:10 CEST 2015
DELETE FROM tempuniquecatalog;
537373 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48053,.00166666666666666666)
535944 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.33
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
18 affected rows (28.684ms)
DELETE FROM new_to_new;
18 affected rows (6.443ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.894ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (83.374ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (24.677ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.520ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.353ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (7.939ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (8.227ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373666 affected rows (177.418ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48053 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48053) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (26.851ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.050ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (18.320ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48053 6 seconds
48054
Tue Jul  7 08:35:16 CEST 2015
DELETE FROM tempuniquecatalog;
535944 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48054,.00166666666666666666)
539722 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.19
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
8 affected rows (25.951ms)
DELETE FROM new_to_new;
8 affected rows (10.393ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
18 affected rows (49.975ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
18 affected rows (91.649ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
9 affected rows (16.255ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
18 affected rows (16.721ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
18 affected rows (8.165ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
18 affected rows (8.013ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
18 affected rows (16.475ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
369957 affected rows (187.106ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48054 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48054) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.371ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.378ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
9 affected rows (21.732ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48054 6 seconds
48055
Tue Jul  7 08:35:22 CEST 2015
DELETE FROM tempuniquecatalog;
539722 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48055,.00166666666666666666)
537389 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.20
Time: CALL flag_n_to_m_tempunique() 1.74
DELETE FROM one_to_many;
18 affected rows (37.225ms)
DELETE FROM new_to_new;
18 affected rows (7.235ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
2 affected rows (58.287ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
2 affected rows (100.097ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
1 affected row (24.583ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
2 affected rows (16.586ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
2 affected rows (8.303ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
2 affected rows (8.024ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
2 affected rows (8.206ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371869 affected rows (239.229ms)
Time: mclient gwacdb -e -i onetomany.sql 0.51
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48055 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48055) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.780ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (14.370ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
1 affected row (22.478ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48055 7 seconds
48056
Tue Jul  7 08:35:29 CEST 2015
DELETE FROM tempuniquecatalog;
537389 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48056,.00166666666666666666)
536405 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.43
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
2 affected rows (42.064ms)
DELETE FROM new_to_new;
2 affected rows (13.990ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (49.931ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.643ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.495ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.358ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.378ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (7.973ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
7 affected rows (16.592ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373457 affected rows (174.379ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48056 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48056) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.472ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.977ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (29.195ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48056 6 seconds
48057
Tue Jul  7 08:35:35 CEST 2015
DELETE FROM tempuniquecatalog;
536405 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48057,.00166666666666666666)
537782 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.35
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
6 affected rows (25.967ms)
DELETE FROM new_to_new;
6 affected rows (7.139ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
4 affected rows (58.209ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
4 affected rows (91.555ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
2 affected rows (16.515ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
4 affected rows (16.496ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
4 affected rows (8.236ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
4 affected rows (8.022ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
4 affected rows (8.220ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372025 affected rows (190.008ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 2.13
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48057 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48057) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.267ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.512ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
2 affected rows (22.486ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48057 7 seconds
48058
Tue Jul  7 08:35:42 CEST 2015
DELETE FROM tempuniquecatalog;
537782 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48058,.00166666666666666666)
537225 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.21
Time: CALL flag_n_to_m_tempunique() 0.67
DELETE FROM one_to_many;
4 affected rows (45.486ms)
DELETE FROM new_to_new;
4 affected rows (16.100ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
16 affected rows (58.212ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
16 affected rows (100.108ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
8 affected rows (24.633ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
16 affected rows (24.927ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
16 affected rows (8.264ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
16 affected rows (7.855ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
16 affected rows (8.170ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372297 affected rows (191.878ms)
Time: mclient gwacdb -e -i onetomany.sql 0.49
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48058 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48058) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (34.466ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.848ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
8 affected rows (14.193ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48058 6 seconds
48059
Tue Jul  7 08:35:48 CEST 2015
DELETE FROM tempuniquecatalog;
537225 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48059,.00166666666666666666)
537854 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.39
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
16 affected rows (34.329ms)
DELETE FROM new_to_new;
16 affected rows (19.947ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (50.082ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.544ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (24.811ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (24.800ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.322ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (7.920ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (16.564ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371857 affected rows (179.777ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48059 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48059) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.434ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.584ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (16.456ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48059 6 seconds
48060
Tue Jul  7 08:35:54 CEST 2015
DELETE FROM tempuniquecatalog;
537854 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48060,.00166666666666666666)
540074 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.34
Time: CALL flag_n_to_m_tempunique() 1.93
DELETE FROM one_to_many;
6 affected rows (28.871ms)
DELETE FROM new_to_new;
6 affected rows (8.640ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
20 affected rows (49.924ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
20 affected rows (83.343ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
10 affected rows (16.382ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
20 affected rows (24.833ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
20 affected rows (8.318ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
20 affected rows (8.129ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
20 affected rows (16.260ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
369413 affected rows (228.429ms)
Time: mclient gwacdb -e -i onetomany.sql 0.48
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48060 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48060) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.299ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.169ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
10 affected rows (20.201ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48060 8 seconds
48061
Tue Jul  7 08:36:02 CEST 2015
DELETE FROM tempuniquecatalog;
540074 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48061,.00166666666666666666)
536240 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.36
Time: CALL flag_n_to_m_tempunique() 0.68
DELETE FROM one_to_many;
20 affected rows (38.644ms)
DELETE FROM new_to_new;
20 affected rows (4.710ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
0 affected rows (51.883ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
0 affected rows (70.876ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
0 affected rows (12.199ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
0 affected rows (11.344ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
0 affected rows (0.803ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
0 affected rows (0.707ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
0 affected rows (2.187ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373461 affected rows (219.424ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48061 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48061) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (34.198ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.997ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
0 affected rows (9.959ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48061 6 seconds
48062
Tue Jul  7 08:36:08 CEST 2015
DELETE FROM tempuniquecatalog;
536240 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48062,.00166666666666666666)
536953 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.32
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
0 affected rows (30.665ms)
DELETE FROM new_to_new;
0 affected rows (17.067ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
14 affected rows (54.359ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
14 affected rows (100.067ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
7 affected rows (16.352ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
14 affected rows (24.932ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
14 affected rows (8.227ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
14 affected rows (7.990ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
14 affected rows (8.282ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372870 affected rows (173.277ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48062 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48062) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.938ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.406ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
7 affected rows (12.319ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48062 6 seconds
48063
Tue Jul  7 08:36:14 CEST 2015
DELETE FROM tempuniquecatalog;
536953 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48063,.00166666666666666666)
536676 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.55
Time: CALL flag_n_to_m_tempunique() 0.67
DELETE FROM one_to_many;
14 affected rows (45.294ms)
DELETE FROM new_to_new;
14 affected rows (15.342ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (58.264ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (83.245ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.449ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.930ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.297ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.015ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (8.262ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372838 affected rows (182.018ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48063 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48063) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.075ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.925ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (11.529ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48063 6 seconds
48064
Tue Jul  7 08:36:20 CEST 2015
DELETE FROM tempuniquecatalog;
536676 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48064,.00166666666666666666)
537142 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.14
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
8 affected rows (33.168ms)
DELETE FROM new_to_new;
8 affected rows (7.243ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
10 affected rows (49.828ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
10 affected rows (108.379ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
5 affected rows (16.319ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
10 affected rows (24.753ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
10 affected rows (8.322ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
10 affected rows (8.016ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
10 affected rows (16.516ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372617 affected rows (181.022ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48064 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48064) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.200ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.976ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
5 affected rows (20.596ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48064 6 seconds
48065
Tue Jul  7 08:36:26 CEST 2015
DELETE FROM tempuniquecatalog;
537142 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48065,.00166666666666666666)
534771 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.17
Time: CALL flag_n_to_m_tempunique() 1.84
DELETE FROM one_to_many;
10 affected rows (40.201ms)
DELETE FROM new_to_new;
10 affected rows (12.983ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (58.176ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (99.995ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.330ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (24.872ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.259ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.256ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (16.375ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373925 affected rows (234.306ms)
Time: mclient gwacdb -e -i onetomany.sql 0.52
Time: CALL update_1_to_1_uniq() 1.68
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48065 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48065) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (34.102ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.548ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (28.393ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image48065 8 seconds
48066
Tue Jul  7 08:36:34 CEST 2015
DELETE FROM tempuniquecatalog;
534771 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48066,.00166666666666666666)
533584 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.34
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
6 affected rows (34.297ms)
DELETE FROM new_to_new;
6 affected rows (2.616ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (58.220ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (100.023ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.276ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.974ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.241ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.000ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.612ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
375954 affected rows (201.574ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48066 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48066) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.833ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.097ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (15.270ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48066 6 seconds
48067
Tue Jul  7 08:36:40 CEST 2015
DELETE FROM tempuniquecatalog;
533584 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48067,.00166666666666666666)
537115 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.38
Time: CALL flag_n_to_m_tempunique() 0.67
DELETE FROM one_to_many;
8 affected rows (41.974ms)
DELETE FROM new_to_new;
8 affected rows (18.723ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
4 affected rows (58.327ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
4 affected rows (99.908ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
2 affected rows (16.375ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
4 affected rows (24.928ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
4 affected rows (8.323ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
4 affected rows (8.026ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
4 affected rows (8.180ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372605 affected rows (180.403ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48067 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48067) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.478ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.631ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
2 affected rows (15.343ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48067 6 seconds
48068
Tue Jul  7 08:36:46 CEST 2015
DELETE FROM tempuniquecatalog;
537115 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48068,.00166666666666666666)
540927 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.42
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
4 affected rows (45.290ms)
DELETE FROM new_to_new;
4 affected rows (14.208ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (58.699ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (91.111ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (24.807ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.507ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.316ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (7.985ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.527ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
368856 affected rows (191.402ms)
Time: mclient gwacdb -e -i onetomany.sql 0.48
Time: CALL update_1_to_1_uniq() 1.67
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48068 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48068) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.028ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.567ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (22.332ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48068 6 seconds
48069
Tue Jul  7 08:36:52 CEST 2015
DELETE FROM tempuniquecatalog;
540927 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48069,.00166666666666666666)
538839 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.41
Time: CALL flag_n_to_m_tempunique() 0.70
DELETE FROM one_to_many;
8 affected rows (37.751ms)
DELETE FROM new_to_new;
8 affected rows (33.165ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (58.172ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.755ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (24.818ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (24.811ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.215ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.043ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.246ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370862 affected rows (188.297ms)
Time: mclient gwacdb -e -i onetomany.sql 0.49
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48069 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48069) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.920ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.772ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (14.730ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48069 7 seconds
48070
Tue Jul  7 08:36:59 CEST 2015
DELETE FROM tempuniquecatalog;
538839 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48070,.00166666666666666666)
539645 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.26
Time: CALL flag_n_to_m_tempunique() 1.86
DELETE FROM one_to_many;
6 affected rows (38.813ms)
DELETE FROM new_to_new;
6 affected rows (13.756ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
2 affected rows (58.347ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
2 affected rows (116.711ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
1 affected row (16.253ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
2 affected rows (24.956ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
2 affected rows (8.246ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
2 affected rows (7.989ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
2 affected rows (16.524ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370082 affected rows (234.230ms)
Time: mclient gwacdb -e -i onetomany.sql 0.54
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48070 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48070) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.194ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.034ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
1 affected row (15.269ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48070 7 seconds
48071
Tue Jul  7 08:37:06 CEST 2015
DELETE FROM tempuniquecatalog;
539645 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48071,.00166666666666666666)
536998 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.40
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
2 affected rows (21.700ms)
DELETE FROM new_to_new;
2 affected rows (10.477ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (50.047ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.658ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.277ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.581ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.287ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.046ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (16.563ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373135 affected rows (188.562ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48071 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48071) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.648ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.658ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (18.830ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48071 6 seconds
48072
Tue Jul  7 08:37:12 CEST 2015
DELETE FROM tempuniquecatalog;
536998 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48072,.00166666666666666666)
537485 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.41
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
6 affected rows (25.091ms)
DELETE FROM new_to_new;
6 affected rows (4.341ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
18 affected rows (66.652ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
18 affected rows (174.837ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
9 affected rows (24.734ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
18 affected rows (16.607ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
18 affected rows (8.217ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
18 affected rows (8.020ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
19 affected rows (16.560ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372327 affected rows (180.133ms)
Time: mclient gwacdb -e -i onetomany.sql 0.53
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48072 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48072) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.961ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.414ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
9 affected rows (14.674ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48072 6 seconds
48073
Tue Jul  7 08:37:18 CEST 2015
DELETE FROM tempuniquecatalog;
537485 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48073,.00166666666666666666)
536058 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.28
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
18 affected rows (39.183ms)
DELETE FROM new_to_new;
18 affected rows (18.368ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (58.283ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (91.641ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (24.835ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.722ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.417ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (7.904ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.716ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373724 affected rows (184.572ms)
Time: mclient gwacdb -e -i onetomany.sql 0.48
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48073 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48073) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.170ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.033ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (22.841ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48073 6 seconds
48074
Tue Jul  7 08:37:25 CEST 2015
DELETE FROM tempuniquecatalog;
536058 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48074,.00166666666666666666)
539835 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.31
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
8 affected rows (39.031ms)
DELETE FROM new_to_new;
8 affected rows (13.299ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
20 affected rows (58.444ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
20 affected rows (99.799ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
10 affected rows (24.674ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
20 affected rows (24.925ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
20 affected rows (8.319ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
20 affected rows (8.007ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
20 affected rows (16.527ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370014 affected rows (201.859ms)
Time: mclient gwacdb -e -i onetomany.sql 0.50
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48074 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48074) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.737ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.323ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
10 affected rows (24.574ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48074 6 seconds
48075
Tue Jul  7 08:37:31 CEST 2015
DELETE FROM tempuniquecatalog;
539835 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48075,.00166666666666666666)
537505 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.32
Time: CALL flag_n_to_m_tempunique() 1.84
DELETE FROM one_to_many;
20 affected rows (34.253ms)
DELETE FROM new_to_new;
20 affected rows (8.416ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
2 affected rows (58.255ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
2 affected rows (91.595ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
1 affected row (24.768ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
2 affected rows (24.890ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
2 affected rows (8.141ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
2 affected rows (8.081ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
2 affected rows (16.502ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371927 affected rows (271.610ms)
Time: mclient gwacdb -e -i onetomany.sql 0.55
Time: CALL update_1_to_1_uniq() 1.48
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48075 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48075) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.892ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.715ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
1 affected row (22.151ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48075 7 seconds
48076
Tue Jul  7 08:37:38 CEST 2015
DELETE FROM tempuniquecatalog;
537505 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48076,.00166666666666666666)
536518 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.24
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
2 affected rows (41.782ms)
DELETE FROM new_to_new;
2 affected rows (5.286ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (49.864ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (83.373ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (24.658ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.472ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.351ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.127ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
7 affected rows (8.101ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373518 affected rows (186.155ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48076 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48076) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.788ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.907ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (13.964ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48076 6 seconds
48077
Tue Jul  7 08:37:44 CEST 2015
DELETE FROM tempuniquecatalog;
536518 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48077,.00166666666666666666)
537895 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.38
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
6 affected rows (36.691ms)
DELETE FROM new_to_new;
6 affected rows (11.466ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
4 affected rows (58.237ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
4 affected rows (99.985ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
2 affected rows (16.401ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
4 affected rows (24.832ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
4 affected rows (8.322ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
4 affected rows (8.013ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
4 affected rows (8.245ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372086 affected rows (195.841ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48077 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48077) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.988ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.036ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
2 affected rows (14.202ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48077 6 seconds
48078
Tue Jul  7 08:37:50 CEST 2015
DELETE FROM tempuniquecatalog;
537895 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48078,.00166666666666666666)
537342 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.34
Time: CALL flag_n_to_m_tempunique() 0.66
DELETE FROM one_to_many;
4 affected rows (39.319ms)
DELETE FROM new_to_new;
4 affected rows (12.644ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
16 affected rows (58.256ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
16 affected rows (91.673ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
8 affected rows (16.398ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
16 affected rows (24.817ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
16 affected rows (8.308ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
16 affected rows (8.012ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
16 affected rows (16.527ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372354 affected rows (196.705ms)
Time: mclient gwacdb -e -i onetomany.sql 0.48
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48078 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48078) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.853ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.675ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
8 affected rows (15.703ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48078 6 seconds
48079
Tue Jul  7 08:37:56 CEST 2015
DELETE FROM tempuniquecatalog;
537342 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48079,.00166666666666666666)
537967 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.24
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
16 affected rows (25.774ms)
DELETE FROM new_to_new;
16 affected rows (3.043ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (58.340ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.540ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (24.825ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.397ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.338ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.108ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.017ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371918 affected rows (176.152ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.75
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48079 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48079) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.033ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.658ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (26.853ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48079 7 seconds
48080
Tue Jul  7 08:38:03 CEST 2015
DELETE FROM tempuniquecatalog;
537967 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48080,.00166666666666666666)
540196 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.18
Time: CALL flag_n_to_m_tempunique() 1.91
DELETE FROM one_to_many;
6 affected rows (35.672ms)
DELETE FROM new_to_new;
6 affected rows (10.586ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
20 affected rows (58.234ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
20 affected rows (91.662ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
10 affected rows (24.558ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
20 affected rows (16.534ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
20 affected rows (8.345ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
20 affected rows (8.057ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
20 affected rows (8.158ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
369465 affected rows (235.029ms)
Time: mclient gwacdb -e -i onetomany.sql 0.50
Time: CALL update_1_to_1_uniq() 1.57
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48080 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48080) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.533ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.959ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
10 affected rows (20.066ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48080 7 seconds
48081
Tue Jul  7 08:38:10 CEST 2015
DELETE FROM tempuniquecatalog;
540196 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48081,.00166666666666666666)
536348 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.33
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
20 affected rows (22.514ms)
DELETE FROM new_to_new;
20 affected rows (10.760ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
0 affected rows (45.388ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
0 affected rows (68.583ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
0 affected rows (11.263ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
0 affected rows (11.938ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
0 affected rows (2.949ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
0 affected rows (0.734ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
0 affected rows (4.563ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373527 affected rows (182.107ms)
Time: mclient gwacdb -e -i onetomany.sql 0.36
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48081 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48081) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.675ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.577ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
0 affected rows (8.354ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48081 6 seconds
48082
Tue Jul  7 08:38:16 CEST 2015
DELETE FROM tempuniquecatalog;
536348 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48082,.00166666666666666666)
537067 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.26
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
0 affected rows (39.445ms)
DELETE FROM new_to_new;
0 affected rows (10.771ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
14 affected rows (58.222ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
14 affected rows (83.203ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
7 affected rows (24.655ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
14 affected rows (24.983ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
14 affected rows (8.234ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
14 affected rows (8.001ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
14 affected rows (8.192ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372930 affected rows (200.231ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.72
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48082 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48082) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.709ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.710ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
7 affected rows (11.659ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48082 6 seconds
48083
Tue Jul  7 08:38:22 CEST 2015
DELETE FROM tempuniquecatalog;
537067 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48083,.00166666666666666666)
536789 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.36
Time: CALL flag_n_to_m_tempunique() 0.66
DELETE FROM one_to_many;
14 affected rows (26.660ms)
DELETE FROM new_to_new;
14 affected rows (7.029ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (58.113ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (99.960ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (24.749ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.839ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.273ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.055ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (8.153ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372899 affected rows (290.569ms)
Time: mclient gwacdb -e -i onetomany.sql 0.56
Time: CALL update_1_to_1_uniq() 1.67
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48083 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48083) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (36.098ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.076ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (25.944ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image48083 7 seconds
48084
Tue Jul  7 08:38:29 CEST 2015
DELETE FROM tempuniquecatalog;
536789 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48084,.00166666666666666666)
537255 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.55
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
8 affected rows (47.347ms)
DELETE FROM new_to_new;
8 affected rows (3.905ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
10 affected rows (49.950ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
10 affected rows (83.398ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
5 affected rows (16.291ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
10 affected rows (16.475ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
10 affected rows (8.343ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
10 affected rows (8.042ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
10 affected rows (26.238ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372678 affected rows (174.507ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48084 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48084) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.923ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.622ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
5 affected rows (25.511ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48084 6 seconds
48085
Tue Jul  7 08:38:35 CEST 2015
DELETE FROM tempuniquecatalog;
537255 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48085,.00166666666666666666)
534889 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.26
Time: CALL flag_n_to_m_tempunique() 1.74
DELETE FROM one_to_many;
10 affected rows (32.198ms)
DELETE FROM new_to_new;
10 affected rows (20.272ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (58.210ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (100.048ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.280ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.558ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.342ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.026ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.173ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373979 affected rows (225.480ms)
Time: mclient gwacdb -e -i onetomany.sql 0.50
Time: CALL update_1_to_1_uniq() 1.52
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48085 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48085) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (31.300ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.064ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (16.111ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48085 7 seconds
48086
Tue Jul  7 08:38:42 CEST 2015
DELETE FROM tempuniquecatalog;
534889 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48086,.00166666666666666666)
533697 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.21
Time: CALL flag_n_to_m_tempunique() 0.60
DELETE FROM one_to_many;
6 affected rows (26.183ms)
DELETE FROM new_to_new;
6 affected rows (6.691ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.825ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (91.638ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.428ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.431ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.322ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.011ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (8.280ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
376015 affected rows (191.466ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.50
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48086 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48086) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.519ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.821ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (14.091ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48086 6 seconds
48087
Tue Jul  7 08:38:48 CEST 2015
DELETE FROM tempuniquecatalog;
533697 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48087,.00166666666666666666)
537228 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.35
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
8 affected rows (25.238ms)
DELETE FROM new_to_new;
8 affected rows (6.611ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
4 affected rows (58.251ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
4 affected rows (120.563ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
2 affected rows (20.763ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
4 affected rows (16.434ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
4 affected rows (8.383ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
4 affected rows (8.024ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
4 affected rows (8.159ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372666 affected rows (207.926ms)
Time: mclient gwacdb -e -i onetomany.sql 0.49
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48087 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48087) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (34.800ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.641ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
2 affected rows (24.834ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48087 7 seconds
48088
Tue Jul  7 08:38:55 CEST 2015
DELETE FROM tempuniquecatalog;
537228 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48088,.00166666666666666666)
541045 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.37
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
4 affected rows (31.488ms)
DELETE FROM new_to_new;
4 affected rows (8.637ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (58.271ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (99.938ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (24.676ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.756ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.306ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.081ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (8.122ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
368912 affected rows (220.058ms)
Time: mclient gwacdb -e -i onetomany.sql 0.50
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48088 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48088) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (35.439ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.008ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (31.355ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image48088 6 seconds
48089
Tue Jul  7 08:39:01 CEST 2015
DELETE FROM tempuniquecatalog;
541045 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48089,.00166666666666666666)
538957 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.43
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
8 affected rows (24.850ms)
DELETE FROM new_to_new;
8 affected rows (2.739ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (58.272ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (100.263ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (24.505ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (24.939ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.162ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (7.998ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (16.550ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370918 affected rows (197.286ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.53
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48089 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48089) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.280ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.723ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (29.895ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48089 6 seconds
48090
Tue Jul  7 08:39:07 CEST 2015
DELETE FROM tempuniquecatalog;
538957 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48090,.00166666666666666666)
539759 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.40
Time: CALL flag_n_to_m_tempunique() 2.22
DELETE FROM one_to_many;
6 affected rows (28.427ms)
DELETE FROM new_to_new;
6 affected rows (7.751ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
2 affected rows (66.565ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
2 affected rows (100.005ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
1 affected row (16.302ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
2 affected rows (24.889ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
2 affected rows (8.298ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
2 affected rows (7.961ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
2 affected rows (16.513ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370142 affected rows (257.069ms)
Time: mclient gwacdb -e -i onetomany.sql 0.54
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48090 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48090) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (34.692ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.854ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
1 affected row (14.183ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48090 8 seconds
48091
Tue Jul  7 08:39:15 CEST 2015
DELETE FROM tempuniquecatalog;
539759 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48091,.00166666666666666666)
537111 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 4.69
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
2 affected rows (21.833ms)
DELETE FROM new_to_new;
2 affected rows (10.098ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (49.865ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (83.373ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.250ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (25.092ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.196ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (7.967ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.180ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373196 affected rows (195.582ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48091 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48091) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.256ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.665ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (22.091ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48091 7 seconds
48092
Tue Jul  7 08:39:22 CEST 2015
DELETE FROM tempuniquecatalog;
537111 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48092,.00166666666666666666)
537601 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.27
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
6 affected rows (32.032ms)
DELETE FROM new_to_new;
6 affected rows (10.222ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
18 affected rows (50.078ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
18 affected rows (91.668ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
9 affected rows (24.800ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
18 affected rows (16.503ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
18 affected rows (8.233ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
18 affected rows (8.025ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
19 affected rows (16.650ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372385 affected rows (187.253ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48092 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48092) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.215ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.121ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
9 affected rows (24.583ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48092 7 seconds
48093
Tue Jul  7 08:39:29 CEST 2015
DELETE FROM tempuniquecatalog;
537601 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48093,.00166666666666666666)
536171 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.12
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
18 affected rows (38.759ms)
DELETE FROM new_to_new;
18 affected rows (7.275ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.892ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (83.388ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.218ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.919ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.329ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.086ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.521ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373785 affected rows (192.040ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48093 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48093) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.278ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.704ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (19.130ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48093 5 seconds
48094
Tue Jul  7 08:39:34 CEST 2015
DELETE FROM tempuniquecatalog;
536171 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48094,.00166666666666666666)
539949 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.20
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
8 affected rows (38.370ms)
DELETE FROM new_to_new;
8 affected rows (14.129ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
20 affected rows (49.937ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
20 affected rows (91.632ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
10 affected rows (16.333ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
20 affected rows (16.590ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
20 affected rows (8.301ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
20 affected rows (7.990ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
20 affected rows (8.315ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370074 affected rows (174.188ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48094 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48094) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.727ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.919ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
10 affected rows (23.201ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48094 6 seconds
48095
Tue Jul  7 08:39:40 CEST 2015
DELETE FROM tempuniquecatalog;
539949 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48095,.00166666666666666666)
537617 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.14
Time: CALL flag_n_to_m_tempunique() 1.90
DELETE FROM one_to_many;
20 affected rows (38.733ms)
DELETE FROM new_to_new;
20 affected rows (18.709ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
2 affected rows (58.183ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
2 affected rows (91.682ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
1 affected row (16.210ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
2 affected rows (16.555ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
2 affected rows (8.323ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
2 affected rows (8.049ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
2 affected rows (16.471ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371989 affected rows (214.765ms)
Time: mclient gwacdb -e -i onetomany.sql 0.49
Time: CALL update_1_to_1_uniq() 1.67
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48095 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48095) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.704ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.261ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
1 affected row (27.613ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48095 8 seconds
48096
Tue Jul  7 08:39:48 CEST 2015
DELETE FROM tempuniquecatalog;
537617 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48096,.00166666666666666666)
536629 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.22
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
2 affected rows (25.224ms)
DELETE FROM new_to_new;
2 affected rows (4.935ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (58.290ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.665ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.292ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.486ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.312ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.000ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
7 affected rows (16.579ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373581 affected rows (191.995ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48096 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48096) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.874ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.077ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (24.316ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48096 6 seconds
48097
Tue Jul  7 08:39:54 CEST 2015
DELETE FROM tempuniquecatalog;
536629 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48097,.00166666666666666666)
538010 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.20
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
6 affected rows (40.700ms)
DELETE FROM new_to_new;
6 affected rows (9.369ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
4 affected rows (58.334ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
4 affected rows (83.310ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
2 affected rows (24.776ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
4 affected rows (16.559ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
4 affected rows (8.300ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
4 affected rows (7.965ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
4 affected rows (8.203ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372145 affected rows (189.449ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48097 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48097) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.332ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.285ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
2 affected rows (25.366ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48097 6 seconds
48098
Tue Jul  7 08:40:00 CEST 2015
DELETE FROM tempuniquecatalog;
538010 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48098,.00166666666666666666)
537459 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.25
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
4 affected rows (32.243ms)
DELETE FROM new_to_new;
4 affected rows (19.774ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
16 affected rows (66.737ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
16 affected rows (99.843ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
8 affected rows (16.346ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
16 affected rows (16.617ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
16 affected rows (8.175ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
16 affected rows (8.033ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
16 affected rows (8.221ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372411 affected rows (189.056ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48098 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48098) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (31.379ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.918ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
8 affected rows (28.259ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48098 6 seconds
48099
Tue Jul  7 08:40:06 CEST 2015
DELETE FROM tempuniquecatalog;
537459 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48099,.00166666666666666666)
538079 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.18
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
16 affected rows (26.575ms)
DELETE FROM new_to_new;
16 affected rows (6.076ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (50.041ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.706ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.341ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (24.960ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.154ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (7.983ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (16.496ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
371980 affected rows (192.911ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48099 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48099) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.050ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.227ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (14.537ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48099 6 seconds
48100
Tue Jul  7 08:40:12 CEST 2015
DELETE FROM tempuniquecatalog;
538079 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48100,.00166666666666666666)
540315 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.18
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
6 affected rows (6.522ms)
DELETE FROM new_to_new;
6 affected rows (8.291ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
20 affected rows (58.307ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
20 affected rows (108.368ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
10 affected rows (24.762ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
20 affected rows (24.638ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
20 affected rows (24.961ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
20 affected rows (3.226ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
20 affected rows (8.235ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
369520 affected rows (244.483ms)
Time: mclient gwacdb -e -i onetomany.sql 1.56
Time: CALL update_1_to_1_uniq() 1.54
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48100 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48100) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (34.788ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (15.747ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
10 affected rows (14.159ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48100 7 seconds
48101
Tue Jul  7 08:40:19 CEST 2015
DELETE FROM tempuniquecatalog;
540315 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48101,.00166666666666666666)
536458 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.33
Time: CALL flag_n_to_m_tempunique() 0.79
DELETE FROM one_to_many;
20 affected rows (41.675ms)
DELETE FROM new_to_new;
20 affected rows (19.644ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
0 affected rows (47.230ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
0 affected rows (65.139ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
0 affected rows (11.129ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
0 affected rows (12.054ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
0 affected rows (0.806ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
0 affected rows (0.709ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
0 affected rows (5.775ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373591 affected rows (174.864ms)
Time: mclient gwacdb -e -i onetomany.sql 0.38
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48101 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48101) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.284ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.370ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
0 affected rows (9.160ms)
Time: mclient gwacdb -e -i newsource.sql 0.05
Time for image48101 6 seconds
48102
Tue Jul  7 08:40:25 CEST 2015
DELETE FROM tempuniquecatalog;
536458 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48102,.00166666666666666666)
537182 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.51
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
0 affected rows (41.187ms)
DELETE FROM new_to_new;
0 affected rows (14.487ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
14 affected rows (58.060ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
14 affected rows (83.504ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
7 affected rows (24.630ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
14 affected rows (24.896ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
14 affected rows (8.293ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
14 affected rows (8.023ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
14 affected rows (16.544ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372989 affected rows (182.548ms)
Time: mclient gwacdb -e -i onetomany.sql 0.47
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48102 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48102) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.492ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.949ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
7 affected rows (25.149ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48102 6 seconds
48103
Tue Jul  7 08:40:31 CEST 2015
DELETE FROM tempuniquecatalog;
537182 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48103,.00166666666666666666)
536902 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.34
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
14 affected rows (26.242ms)
DELETE FROM new_to_new;
14 affected rows (8.343ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.951ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (83.418ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.302ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.669ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.249ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.106ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (8.238ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372960 affected rows (194.234ms)
Time: mclient gwacdb -e -i onetomany.sql 0.42
Time: CALL update_1_to_1_uniq() 1.40
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48103 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48103) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (27.686ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.776ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (16.186ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48103 6 seconds
48104
Tue Jul  7 08:40:37 CEST 2015
DELETE FROM tempuniquecatalog;
536902 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48104,.00166666666666666666)
537373 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.22
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
8 affected rows (31.874ms)
DELETE FROM new_to_new;
8 affected rows (12.716ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
10 affected rows (50.106ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
10 affected rows (91.570ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
5 affected rows (24.846ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
10 affected rows (16.407ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
10 affected rows (8.334ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
10 affected rows (8.050ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
10 affected rows (16.574ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372734 affected rows (186.473ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48104 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48104) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.162ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.367ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
5 affected rows (18.279ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image48104 6 seconds
48105
Tue Jul  7 08:40:43 CEST 2015
DELETE FROM tempuniquecatalog;
537373 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48105,.00166666666666666666)
535002 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.14
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
10 affected rows (6.088ms)
DELETE FROM new_to_new;
10 affected rows (8.276ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (58.325ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (99.886ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (24.868ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (24.787ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.500ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (7.849ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (16.676ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
374038 affected rows (256.896ms)
Time: mclient gwacdb -e -i onetomany.sql 1.54
Time: CALL update_1_to_1_uniq() 1.68
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48105 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48105) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (36.455ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.488ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (19.130ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48105 7 seconds
48106
Tue Jul  7 08:40:50 CEST 2015
DELETE FROM tempuniquecatalog;
535002 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48106,.00166666666666666666)
533807 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.48
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
6 affected rows (30.922ms)
DELETE FROM new_to_new;
6 affected rows (7.720ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.920ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (91.620ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.348ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.912ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.324ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.175ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (8.017ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
376079 affected rows (191.019ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48106 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48106) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.101ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.796ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (16.149ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48106 7 seconds
48107
Tue Jul  7 08:40:57 CEST 2015
DELETE FROM tempuniquecatalog;
533807 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48107,.00166666666666666666)
537338 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.29
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
8 affected rows (45.147ms)
DELETE FROM new_to_new;
8 affected rows (17.706ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
4 affected rows (50.029ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
4 affected rows (99.952ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
2 affected rows (16.391ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
4 affected rows (16.459ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
4 affected rows (8.308ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
4 affected rows (8.023ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
4 affected rows (8.231ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372730 affected rows (221.252ms)
Time: mclient gwacdb -e -i onetomany.sql 0.50
Time: CALL update_1_to_1_uniq() 1.45
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48107 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48107) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.867ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.749ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
2 affected rows (22.697ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48107 6 seconds
48108
Tue Jul  7 08:41:03 CEST 2015
DELETE FROM tempuniquecatalog;
537338 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48108,.00166666666666666666)
541164 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.29
Time: CALL flag_n_to_m_tempunique() 0.66
DELETE FROM one_to_many;
4 affected rows (34.666ms)
DELETE FROM new_to_new;
4 affected rows (8.823ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.896ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (91.682ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.438ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (24.894ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.265ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.024ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.561ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
368967 affected rows (195.148ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48108 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48108) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (33.653ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.812ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (14.821ms)
Time: mclient gwacdb -e -i newsource.sql 0.09
Time for image48108 6 seconds
48109
Tue Jul  7 08:41:09 CEST 2015
DELETE FROM tempuniquecatalog;
541164 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48109,.00166666666666666666)
539073 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.22
Time: CALL flag_n_to_m_tempunique() 0.64
DELETE FROM one_to_many;
8 affected rows (40.654ms)
DELETE FROM new_to_new;
8 affected rows (14.810ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (49.823ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (83.308ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.349ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.561ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.244ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.041ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.222ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370976 affected rows (187.724ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48109 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48109) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.691ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.347ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (13.936ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48109 6 seconds
48110
Tue Jul  7 08:41:15 CEST 2015
DELETE FROM tempuniquecatalog;
539073 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48110,.00166666666666666666)
539873 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.43
Time: CALL flag_n_to_m_tempunique() 1.53
DELETE FROM one_to_many;
6 affected rows (40.835ms)
DELETE FROM new_to_new;
6 affected rows (7.283ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
2 affected rows (49.932ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
2 affected rows (83.455ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
1 affected row (24.762ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
2 affected rows (24.754ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
2 affected rows (8.334ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
2 affected rows (8.007ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
2 affected rows (16.569ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370202 affected rows (226.589ms)
Time: mclient gwacdb -e -i onetomany.sql 0.49
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48110 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48110) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.997ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.079ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
1 affected row (27.797ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48110 7 seconds
48111
Tue Jul  7 08:41:22 CEST 2015
DELETE FROM tempuniquecatalog;
539873 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48111,.00166666666666666666)
537221 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.16
Time: CALL flag_n_to_m_tempunique() 0.67
DELETE FROM one_to_many;
2 affected rows (39.482ms)
DELETE FROM new_to_new;
2 affected rows (4.546ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (50.026ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (91.464ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.425ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.601ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.403ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (7.912ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
6 affected rows (8.175ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373260 affected rows (189.028ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.42
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48111 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48111) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.136ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.980ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (15.698ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48111 6 seconds
48112
Tue Jul  7 08:41:28 CEST 2015
DELETE FROM tempuniquecatalog;
537221 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48112,.00166666666666666666)
537715 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.42
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
6 affected rows (27.693ms)
DELETE FROM new_to_new;
6 affected rows (12.101ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
18 affected rows (58.355ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
18 affected rows (99.990ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
9 affected rows (24.642ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
18 affected rows (25.028ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
18 affected rows (8.196ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
18 affected rows (8.061ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
19 affected rows (8.273ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372446 affected rows (184.729ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.60
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48112 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48112) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.286ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.651ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
9 affected rows (14.249ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48112 6 seconds
48113
Tue Jul  7 08:41:34 CEST 2015
DELETE FROM tempuniquecatalog;
537715 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48113,.00166666666666666666)
536287 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.11
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
18 affected rows (40.517ms)
DELETE FROM new_to_new;
18 affected rows (11.599ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (49.860ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (91.670ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (16.380ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.626ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.254ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (8.034ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (8.301ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373843 affected rows (190.625ms)
Time: mclient gwacdb -e -i onetomany.sql 0.45
Time: CALL update_1_to_1_uniq() 1.43
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48113 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48113) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.437ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.805ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (21.785ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48113 6 seconds
48114
Tue Jul  7 08:41:40 CEST 2015
DELETE FROM tempuniquecatalog;
536287 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48114,.00166666666666666666)
540065 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.22
Time: CALL flag_n_to_m_tempunique() 0.61
DELETE FROM one_to_many;
8 affected rows (23.716ms)
DELETE FROM new_to_new;
8 affected rows (9.159ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
20 affected rows (49.937ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
20 affected rows (91.719ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
10 affected rows (16.511ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
20 affected rows (16.419ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
20 affected rows (8.352ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
20 affected rows (8.015ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
20 affected rows (16.553ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
370132 affected rows (187.356ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.41
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48114 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48114) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (28.738ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (13.031ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
10 affected rows (21.016ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48114 6 seconds
48115
Tue Jul  7 08:41:46 CEST 2015
DELETE FROM tempuniquecatalog;
540065 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48115,.00166666666666666666)
537732 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.15
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
20 affected rows (6.126ms)
DELETE FROM new_to_new;
20 affected rows (8.304ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
2 affected rows (66.756ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
2 affected rows (99.873ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
1 affected row (24.680ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
2 affected rows (16.575ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
2 affected rows (8.269ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
2 affected rows (8.066ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
2 affected rows (16.518ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372048 affected rows (247.534ms)
Time: mclient gwacdb -e -i onetomany.sql 1.70
Time: CALL update_1_to_1_uniq() 1.49
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48115 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48115) 0.07
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.577ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (12.329ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
1 affected row (36.023ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image48115 7 seconds
48116
Tue Jul  7 08:41:53 CEST 2015
DELETE FROM tempuniquecatalog;
537732 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48116,.00166666666666666666)
536741 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.29
Time: CALL flag_n_to_m_tempunique() 0.59
DELETE FROM one_to_many;
2 affected rows (39.974ms)
DELETE FROM new_to_new;
2 affected rows (3.142ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
6 affected rows (50.038ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
6 affected rows (83.279ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
3 affected rows (16.312ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
6 affected rows (16.574ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
6 affected rows (8.249ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
6 affected rows (8.193ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
7 affected rows (7.964ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
373643 affected rows (186.861ms)
Time: mclient gwacdb -e -i onetomany.sql 0.43
Time: CALL update_1_to_1_uniq() 1.47
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48116 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48116) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.517ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.585ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
3 affected rows (27.809ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48116 6 seconds
48117
Tue Jul  7 08:41:59 CEST 2015
DELETE FROM tempuniquecatalog;
536741 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48117,.00166666666666666666)
538123 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.31
Time: CALL flag_n_to_m_tempunique() 0.63
DELETE FROM one_to_many;
6 affected rows (35.654ms)
DELETE FROM new_to_new;
6 affected rows (5.597ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
4 affected rows (49.965ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
4 affected rows (91.556ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
2 affected rows (16.434ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
4 affected rows (16.558ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
4 affected rows (8.317ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
4 affected rows (8.042ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
4 affected rows (8.182ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372206 affected rows (193.912ms)
Time: mclient gwacdb -e -i onetomany.sql 0.44
Time: CALL update_1_to_1_uniq() 1.44
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48117 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48117) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (29.856ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (10.474ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
2 affected rows (43.964ms)
Time: mclient gwacdb -e -i newsource.sql 0.08
Time for image48117 6 seconds
48118
Tue Jul  7 08:42:05 CEST 2015
DELETE FROM tempuniquecatalog;
538123 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48118,.00166666666666666666)
537575 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.82
Time: CALL flag_n_to_m_tempunique() 0.62
DELETE FROM one_to_many;
4 affected rows (39.487ms)
DELETE FROM new_to_new;
4 affected rows (9.210ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
16 affected rows (49.824ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
16 affected rows (83.340ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
8 affected rows (16.374ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
16 affected rows (25.111ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
16 affected rows (8.172ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
16 affected rows (7.988ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
16 affected rows (16.540ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372469 affected rows (195.241ms)
Time: mclient gwacdb -e -i onetomany.sql 0.46
Time: CALL update_1_to_1_uniq() 1.46
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48118 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48118) 0.05
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.472ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (11.274ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
8 affected rows (20.029ms)
Time: mclient gwacdb -e -i newsource.sql 0.06
Time for image48118 7 seconds
48119
Tue Jul  7 08:42:12 CEST 2015
DELETE FROM tempuniquecatalog;
537575 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48119,.00166666666666666666)
538191 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.20
Time: CALL flag_n_to_m_tempunique() 0.65
DELETE FROM one_to_many;
16 affected rows (31.790ms)
DELETE FROM new_to_new;
16 affected rows (7.962ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
8 affected rows (58.201ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
8 affected rows (108.380ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
4 affected rows (24.571ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
8 affected rows (16.653ms)
INSERT INTO uidlegacy(old_uid, new_uid) select o.old_uniqueid, n.uniqueid from one_to_many o, new_to_new n where o.new_targetid = n.targetid;
8 affected rows (8.185ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT uniqueid, targetid, distance_arcsec,2 FROM new_to_new;
8 affected rows (7.996ms)
UPDATE tempuniquecatalog  SET inactive = TRUE  WHERE uniqueid IN (SELECT old_uniqueid FROM one_to_many);
8 affected rows (16.687ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT t.uniqueid, t.targetid, t.distance_arcsec, 3 FROM tempuniquecatalog t WHERE t.inactive = FALSE order by uniqueid, targetid;
372040 affected rows (205.458ms)
Time: mclient gwacdb -e -i onetomany.sql 0.49
Time: CALL update_1_to_1_uniq() 1.65
DELETE FROM newsrc;
0 affected rows
INSERT INTO newsrc SELECT t.id AS targetid FROM targets3 t LEFT OUTER JOIN tempuniquecatalog tuc ON t.id = tuc.targetid WHERE t.imageid = 48119 AND tuc.targetid IS NULL ORDER BY t.id;
0 affected rows
Time: insert_new_uniq(48119) 0.06
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT t.id AS targetid, 1 AS datapoints ,t.zone, t.ra AS ra_avg, t."dec" AS decl_avg, t.flux AS flux_ref, t.x, t.y, t.z, FALSE FROM newsrc, targets3 t WHERE newsrc.targetid = t.id;
0 affected rows (30.352ms)
INSERT INTO associatedsource(uniqueid, targetid, distance_arcsec, type) SELECT u.id AS uniqueid, newsrc.targetid, 0, 4 FROM newsrc, uniquecatalog3 u WHERE newsrc.targetid = u.targetid;
0 affected rows (14.274ms)
DELETE FROM uniquecatalog3 WHERE inactive = TRUE;
4 affected rows (26.938ms)
Time: mclient gwacdb -e -i newsource.sql 0.07
Time for image48119 6 seconds
48120
Tue Jul  7 08:42:18 CEST 2015
DELETE FROM tempuniquecatalog;
538191 affected rows
INSERT INTO tempuniquecatalog SELECT * FROM associates(48120,.00166666666666666666)
540434 affected rows
Time: INSERT INTO tempuniquecatalog SELECT associates() 3.23
Challenge string is not valid, it is empty
Time: CALL flag_n_to_m_tempunique() 0.00
DELETE FROM one_to_many;
8 affected rows (6.122ms)
DELETE FROM new_to_new;
8 affected rows (8.453ms)
INSERT INTO one_to_many(old_uniqueid, new_targetid, distance_arcsec) SELECT t.uniqueid, t.targetid, t.distance_arcsec FROM tempuniquecatalog t, ( SELECT uniqueid FROM tempuniquecatalog WHERE inactive = FALSE GROUP BY uniqueid HAVING COUNT(*) > 1) t0 WHERE t0.uniqueid = t.uniqueid and t.inactive=false ORDER BY uniqueid, targetid;
174304 affected rows (358.352ms)
INSERT INTO uniquecatalog3(targetid,datapoints,zone,ra_avg,decl_avg,flux_ref,x,y,z,inactive) SELECT targetid, datapoints, zone, ra_avg, decl_avg, flux_ref, x, y, z, FALSE from (select distinct old_uniqueid from one_to_many) o,tempuniquecatalog t  where t.uniqueid = o.old_uniqueid and t.inactive = FALSE ;
174304 affected rows (234.626ms)
UPDATE uniquecatalog3 SET inactive = TRUE WHERE id IN (SELECT DISTINCT old_uniqueid FROM one_to_many);
86387 affected rows (96.028ms)
INSERT INTO new_to_new SELECT u.id AS uniqueid, u.targetid, one_to_many.distance_arcsec FROM uniquecatalog3 u, one_to_many WHERE u.targetid = one_to_many.new_targetid ORDER BY uniqueid, targetid;
39755698 affected rows (8.8s)

sql>select count(*) from "sys"."associatedsource" ;
+-------------+
| L1          |
+=============+
| 13703712875 |
+-------------+
1 tuple (6.522ms)
sql>delete from associatedsource where uniqueid>687093;
34150 affected rows (4m 9s)
sql>select count(*) from "sys"."associatedsource" ;
+-------------+
| L1          |
+=============+
| 13703678725 |
+-------------+
1 tuple (7m 4s)
sql>delete from associatedsource where targetid>48000;
13703678725 affected rows (37m 27s)
sql>select count(*) from "sys"."associatedsource" ;
+------+
| L1   |
+======+
|    0 |
+------+
1 tuple (48m 51s)

